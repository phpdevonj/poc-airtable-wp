var M=Object.defineProperty;var T=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var w=(l,n,e)=>n in l?M(l,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[n]=e,u=(l,n)=>{for(var e in n||(n={}))E.call(n,e)&&w(l,e,n[e]);if(T)for(var e of T(n))D.call(n,e)&&w(l,e,n[e]);return l};import{d as B,j as t,r as H,L as O}from"./main-149.js";import{c as j,d as b,_ as p,m as U,n as z,o as J,p as y,r as K,N as Q}from"./bi.738.82.js";import{T as W}from"./bi.653.689.js";const P=(l,n,e,c,i,a)=>{const h=u({},n),{name:m}=l.target;l.target.value!==""?h[m]=l.target.value:delete h[m],h[l.target.name]=l.target.value,e(u({},h))},S=(l,n,e,c)=>{e(!0);const i={domainName:l.domainName};j(i,"gamiPress_fetch_all_rank_type").then(a=>{if(a&&a.success){const h=u({},l);h.default||(h.default={}),a.data&&(h.default.allRankTypes=a.data),n(u({},h)),e(!1),b.success(p("Rank Type fetched successfully","bit-integrations"));return}e(!1),b.error(p("Rank Type fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))},f=(l,n,e,c)=>{e(!0),j(null,"gamiPress_fetch_all_achievement_type").then(i=>{if(i&&i.success){const a=u({},l);a.default||(a.default={}),i.data&&(a.default.allAchievementTypes=i.data),n(u({},a)),e(!1),b.success(p("All achievement Type fetched successfully","bit-integrations"));return}e(!1),b.error(p("All achievement fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))},R=(l,n,e,c)=>{e(!0);const i={achievementType:l.selectedAchievementType};j(i,"gamiPress_fetch_all_achievement_by_type").then(a=>{if(a&&a.success){const h=u({},l);h.default||(h.default={}),a.data&&(h.default.allAchievements=a.data),n(u({},h)),e(!1),b.success(p("All achievements fetched successfully","bit-integrations"));return}e(!1),b.error(p("All achievements fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))},$=(l,n,e,c)=>{e(!0);const i={domainName:l.rankType};j(i,"gamiPress_fetch_all_rank_by_type").then(a=>{if(a&&a.success){const h=u({},l);h.default||(h.default={}),a.data&&(h.default.allRanks=a.data),n(u({},h)),e(!1),b.success(p("All rank fetched successfully","bit-integrations"));return}e(!1),b.error(p("All rank type fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))},q=(l,n,e,c)=>{e(!0);const i={domainName:l.rankType};j(i,"gamiPress_fetch_all_point_type").then(a=>{if(a&&a.success){const h=u({},l);h.default||(h.default={}),a.data&&(h.default.allPointTypes=a.data),n(u({},h)),e(!1),b.success(p("All point type fetched successfully","bit-integrations"));return}e(!1),b.error(p("All point type fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))},X=l=>{const n=l==null?void 0:l.pointFields.filter(e=>e.required===!0);return n.length>0?n.map(e=>({formField:"",gamiPressFormField:e.key})):[{formField:"",gamiPressFormField:""}]},Y=(l,n,e)=>{const c=u({},n);c.field_map.splice(l,0,{}),e(u({},c))},Z=(l,n,e)=>{const c=u({},n);c.field_map.length>1&&c.field_map.splice(l,1),e(u({},c))},V=(l,n,e,c)=>{const i=u({},e);i.field_map[n][l.target.name]=l.target.value,l.target.value==="custom"&&(i.field_map[n].customValue=""),c(u({},i))};function G({i:l,formFields:n,field:e,gamiPressConf:c,setGamiPressConf:i}){var _,r;if(((_=c==null?void 0:c.field_map)==null?void 0:_.length)===1&&e.gamiPressFormField===""){const s=u({},c),x=X(s);s.field_map=x,i(s)}const a=(c==null?void 0:c.pointFields.filter(s=>s.required===!0))||[],h=(c==null?void 0:c.pointFields.filter(s=>s.required===!1))||[],m=B(U),{isPro:N}=m;return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:e.formField||"",onChange:s=>V(s,l,c,i),children:[t.jsx("option",{value:"",children:p("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Form Fields",children:n==null?void 0:n.map(s=>t.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`))}),t.jsx("option",{value:"custom",children:p("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${N?"":"(PRO)"}`,children:N&&((r=z)==null?void 0:r.map(s=>t.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),e.formField==="custom"&&t.jsx(W,{onChange:s=>J(s,l,c,i),label:p("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:e.customValue,placeholder:p("Custom Value","bit-integrations"),formFields:n}),t.jsxs("select",{className:"btcd-paper-inp",disabled:l<a.length,name:"gamiPressFormField",value:l<a.length?a[l].key||"":e.gamiPressFormField||"",onChange:s=>V(s,l,c,i),children:[t.jsx("option",{value:"",children:p("Select Field","bit-integrations")}),l<a.length?t.jsx("option",{value:a[l].key,children:a[l].label},a[l].key):h.map(({key:s,label:x})=>t.jsx("option",{value:s,children:x},s))]})]}),l>=a.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>Y(l,c,i),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>Z(l,c,i),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function ee({formFields:l,handleInput:n,gamiPressConf:e,setGamiPressConf:c,isLoading:i,setIsLoading:a,setSnackbar:h,allIntegURL:m,isInfo:N,edit:_}){var s,x,A,F,k;H.useEffect(()=>{["1","4"].includes(e.mainAction)&&S(e,c,a),["2","5"].includes(e.mainAction)&&f(e,c,a),["3","6"].includes(e.mainAction)&&q(e,c,a)},[e.mainAction]);const r=(d,o)=>{const v=u({},e);v[o]=d,o==="rankType"&&$(v,c,a),o==="selectedAchievementType"&&R(v,c,a),c(u({},v))};return t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:p("Actions:","bit-integrations")}),t.jsxs("select",{onChange:n,name:"mainAction",value:e.mainAction,className:"btcd-paper-inp w-5",children:[t.jsx("option",{value:"",children:p("Select Actions","bit-integrations")}),e.allActions&&e.allActions.map(({key:d,label:o})=>t.jsx("option",{value:d,children:o},d))]}),t.jsx("br",{}),t.jsx("br",{}),["1","4"].includes(e.mainAction)&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flx mt-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:p("Select Rank Type: ","bit-integrations")}),t.jsx(y,{className:"w-5",defaultValue:e==null?void 0:e.rankType,options:((s=e==null?void 0:e.default)==null?void 0:s.allRankTypes)&&e.default.allRankTypes.map(d=>({label:d.post_title,value:d.post_name.toString()})),singleSelect:!0,onChange:d=>r(d,"rankType")}),t.jsx("button",{onClick:()=>S(e,c,a),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${p("Fetch Rank Type List","bit-integrations")}'`},type:"button",disabled:i,children:"↻"})]}),t.jsx("br",{}),t.jsxs("div",{className:"flx mt-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:p("Select Rank: ","bit-integrations")}),t.jsx(y,{className:"w-5",defaultValue:e==null?void 0:e.selectedRank,options:((x=e==null?void 0:e.default)==null?void 0:x.allRanks)&&e.default.allRanks.map(d=>({label:d.post_title,value:d.ID.toString()})),singleSelect:!0,onChange:d=>r(d,"selectedRank")}),t.jsx("button",{onClick:()=>$(e,c,a),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${p("Fetch Rank","bit-integrations")}'`},type:"button",disabled:i,children:"↻"})]})]}),["2","5"].includes(e.mainAction)&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flx mt-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:p("Select Achievement Type: ","bit-integrations")}),t.jsx(y,{className:"w-5",defaultValue:e==null?void 0:e.selectedAchievementType,options:((A=e==null?void 0:e.default)==null?void 0:A.allAchievementTypes)&&e.default.allAchievementTypes.map(d=>({label:d.post_title,value:d.post_name.toString()})),singleSelect:!0,onChange:d=>r(d,"selectedAchievementType")}),t.jsx("button",{onClick:()=>f(e,c,a),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${p("Fetch achievement type list","bit-integrations")}'`},type:"button",disabled:i,children:"↻"})]}),t.jsx("br",{}),t.jsxs("div",{className:"flx mt-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:p("Select Achievement: ","bit-integrations")}),t.jsx(y,{className:"w-5",defaultValue:e==null?void 0:e.selectedAchievement,options:((F=e==null?void 0:e.default)==null?void 0:F.allAchievements)&&e.default.allAchievements.map(d=>({label:d.post_title,value:d.ID.toString()})),singleSelect:!0,onChange:d=>r(d,"selectedAchievement")}),t.jsx("button",{onClick:()=>R(e,c,a),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${p("Fetch Achievement","bit-integrations")}'`},type:"button",disabled:i,children:"↻"})]})]}),["3","6"].includes(e.mainAction)&&t.jsxs("div",{className:"flx mt-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:p("Enter Point: ","bit-integrations")}),t.jsx(y,{className:"w-5",defaultValue:e==null?void 0:e.selectedPointType,options:((k=e==null?void 0:e.default)==null?void 0:k.allPointTypes)&&e.default.allPointTypes.map(d=>({label:d.post_title,value:d.post_name.toString()})),singleSelect:!0,onChange:d=>r(d,"selectedPointType")}),t.jsx("button",{onClick:()=>q(e,c,a),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${p("Fetch point type","bit-integrations")}'`},type:"button",disabled:i,children:"↻"})]}),t.jsx("br",{}),t.jsx("br",{}),i&&t.jsx(O,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),["3","6"].includes(e.mainAction)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:p("Map Fields","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:p("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:p("GamiPress Fields","bit-integrations")})})]}),e.field_map.map((d,o)=>t.jsx(G,{i:o,field:d,gamiPressConf:e,formFields:l,setGamiPressConf:c},`dash-m-${o+9}`)),t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>K(e.field_map.length,e,c),className:"icn-btn sh-sm",type:"button",children:"+"})}),t.jsx("br",{}),t.jsx("br",{})]}),t.jsx("br",{}),t.jsx(Q,{note:"Some integrations will only work for logged-in users."})]})}export{ee as G,P as h};
