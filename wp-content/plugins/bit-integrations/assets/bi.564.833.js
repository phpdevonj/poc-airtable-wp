var _=Object.defineProperty;var h=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var j=(t,i,s)=>i in t?_(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,r=(t,i)=>{for(var s in i||(i={}))w.call(i,s)&&j(t,s,i[s]);if(h)for(var s of h(i))k.call(i,s)&&j(t,s,i[s]);return t};import{j as e,d as M,r as g}from"./main-149.js";import{q as K,_ as d,H as q,m as $,n as R}from"./bi.738.82.js";import{g as S}from"./bi.551.832.js";function V({smailyConf:t,setSmailyConf:i}){var a;const s=(l,c)=>{const u=r({},t);c==="unsubscribe"&&(l.target.checked?u.actions.unsubscribe=!0:delete u.actions.unsubscribe),i(r({},u))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(K,{checked:((a=t.actions)==null?void 0:a.unsubscribe)||!1,onChange:l=>s(l,"unsubscribe"),className:"wdt-200 mt-4 mr-2",value:"update_subscriber",title:d("unsubscribe subscriber","bit-integrations"),subTitle:d("Set the subscriber's status as unsubscribed.","bit-integrations")})})}const N=(t,i,s)=>{const a=r({},i);a.field_map.splice(t,0,{}),s(r({},a))},I=(t,i,s)=>{const a=r({},i);a.field_map.length>1&&a.field_map.splice(t,1),s(r({},a))},F=(t,i,s,a)=>{const l=r({},s);l.field_map[i][t.target.name]=t.target.value,t.target.value==="custom"&&(l.field_map[i].customValue=""),t.target.value==="customFieldKey"&&(l.field_map[i].customFieldKey=""),a(r({},l))},L=(t,i,s,a,l)=>{const c=r({},s);c.field_map[i][l]=t.target.value,a(r({},c))};function v({field:t,index:i,smailyConf:s,setSmailyConf:a,fieldValue:l,fieldLabel:c,className:u}){return e.jsx(q,{onChange:b=>L(b,i,s,a,l),label:d(c,"bit-integrations"),className:u,type:"text",value:t[l],placeholder:d(c,"bit-integrations")})}function T({i:t,formFields:i,field:s,smailyConf:a,setSmailyConf:l}){var p,x;const c=(a==null?void 0:a.staticFields.filter(n=>n.required===!0))||[],u=(a==null?void 0:a.staticFields.filter(n=>n.required===!1))||[];if(((p=a==null?void 0:a.field_map)==null?void 0:p.length)===1&&s.smailyFormField===""){const n=r({},a),m=S(n);n.field_map=m,l(n)}const b=M($),{isPro:o}=b;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:n=>F(n,t,a,l),children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:i==null?void 0:i.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`))}),e.jsx("option",{value:"custom",children:d("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${o?"":"(PRO)"}`,children:o&&((x=R)==null?void 0:x.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`)))})]}),s.formField==="custom"&&e.jsx(v,{field:s,index:t,smailyConf:a,setSmailyConf:l,fieldValue:"customValue",fieldLabel:"Custom Value",className:"mr-2"}),e.jsxs("select",{className:"btcd-paper-inp",disabled:t<c.length,name:"smailyFormField",value:t<c?c[t].label||"":s.smailyFormField||"",onChange:n=>F(n,t,a,l),children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),t<c.length?e.jsx("option",{value:c[t].key,children:c[t].label},c[t].key):u.map(({key:n,label:m})=>e.jsx("option",{value:n,children:m},n)),e.jsx("option",{value:"customFieldKey",children:d("Custom Field","bit-integrations")})]}),s.smailyFormField==="customFieldKey"&&e.jsx(v,{field:s,index:t,smailyConf:a,setSmailyConf:l,fieldValue:"customFieldKey",fieldLabel:"Custom Field Key",className:"ml-2"})]}),t>=c.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(t,a,l),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>I(t,a,l),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function P({formFields:t,handleInput:i,smailyConf:s,setSmailyConf:a,loading:l,setLoading:c,setSnackbar:u}){return g.useState({name:"",api_user_name:""}),g.useState(!1),e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("br",{}),e.jsx("div",{className:"mt-5",children:e.jsx("b",{className:"wdt-100",children:d("Field Map","bit-integrations")})}),e.jsx("br",{}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Smaily Fields","bit-integrations")})})]}),s==null?void 0:s.field_map.map((b,o)=>e.jsx(T,{i:o,field:b,smailyConf:s,formFields:t,setSmailyConf:a,setSnackbar:u},`rp-m-${o+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>N(s.field_map.length,s,a),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(V,{smailyConf:s,setSmailyConf:a,formFields:t})]})]})}export{P as S};
