var k=Object.defineProperty;var N=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var y=(l,n,t)=>n in l?k(l,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[n]=t,j=(l,n)=>{for(var t in n||(n={}))w.call(n,t)&&y(l,t,n[t]);if(N)for(var t of N(n))$.call(n,t)&&y(l,t,n[t]);return l};import{r as S,j as e,d as f,L as A}from"./main-149.js";import{q as I,_ as r,m as q,n as T,o as L,T as M,r as O}from"./bi.738.82.js";import{f as R,r as V}from"./bi.178.775.js";import{T as D}from"./bi.653.689.js";import{a as _,b as E,c as P}from"./bi.298.716.js";function z({acumbamailConf:l,setAcumbamailConf:n,formFields:t}){var d;S.useState(!1);const i=(o,x)=>{const a=j({},l);x==="double_optin"&&(o.target.checked?a.actions.double_optin=!0:delete a.actions.double_optin),n(j({},a))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(I,{checked:((d=l.actions)==null?void 0:d.double_optin)||!1,onChange:o=>i(o,"double_optin"),className:"wdt-200 mt-4 mr-2",value:"double_optin",title:r("Double Opt-in","bit-integrations"),subTitle:r("Double Opt-In for confirm subscription.","bit-integrations")})})}function B({i:l,formFields:n,field:t,acumbamailConf:i,setAcumbamailConf:d}){var p,m,u,g,F,v;const o=f(q),{isPro:x}=o,a=(p=i.default.allFields[i.listId].required)==null?void 0:p.includes(t.acumbamailFormField),h=Object.entries((u=(m=i.default.allFields)==null?void 0:m[i.listId])==null?void 0:u.fields).filter(s=>s[1].required===!0)||[],c=Object.entries((F=(g=i.default.allFields)==null?void 0:g[i.listId])==null?void 0:F.fields).filter(s=>s[1].required===!1)||[];return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:s=>_(s,l,i,d),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:n.map(s=>s.type!=="file"&&e.jsx("option",{value:s.name,children:s.label},`ff-zhcrm-${s.name}`))}),e.jsx("option",{value:"custom",children:r("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((v=T)==null?void 0:v.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),t.formField==="custom"&&e.jsx(D,{onChange:s=>L(s,l,i,d),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:r("Custom Value","bit-integrations"),formFields:n}),e.jsxs("select",{className:"btcd-paper-inp",name:"acumbamailFormField",disabled:l<1,value:t.acumbamailFormField||"",onChange:s=>_(s,l,i,d),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),a&&h.map((s,b)=>e.jsx("option",{value:s[1].key,children:s[1].label},`mchimp-${b*2}`)),!a&&c.map((s,b)=>e.jsx("option",{value:s[1].key,children:s[1].label},`mchimp-${b*2}`))]})]}),!a&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>E(l,i,d),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>P(l,i,d),className:"icn-btn sh-sm",type:"button","aria-label":"btn",children:e.jsx(M,{})})]})]})}function W({formFields:l,handleInput:n,acumbamailConf:t,setAcumbamailConf:i,isLoading:d,setIsLoading:o,setSnackbar:x}){var a,h;return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("Actions:","bit-integrations")}),e.jsxs("select",{onChange:n,name:"mainAction",value:t.mainAction,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:r("Select Actions","bit-integrations")}),t.allActions&&t.allActions.map(({key:c,label:p})=>e.jsx("option",{value:c,children:p},c))]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("All List:","bit-integrations")}),e.jsxs("select",{onChange:n,name:"listId",value:t.listId,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:r("Select List","bit-integrations")}),((a=t==null?void 0:t.default)==null?void 0:a.allLists)&&Object.entries(t.default.allLists).map(c=>e.jsx("option",{value:c[0],children:c[1].name},c[0]))]}),e.jsx("button",{onClick:()=>R(t,i,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${r("Fetch Subscriber List","bit-integrations")}'`},type:"button",disabled:d,children:"↻"}),e.jsx("br",{}),d&&e.jsx(A,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:r("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>V(null,t,i,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${r("Refresh Acumbamail Fields","bit-integrations")}'`},type:"button",disabled:d,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Acumbamail Fields","bit-integrations")})})]}),((h=t.default)==null?void 0:h.allFields)&&e.jsxs(e.Fragment,{children:[t.field_map.map((c,p)=>e.jsx(B,{i:p,field:c,acumbamailConf:t,formFields:l,setAcumbamailConf:i},`sheet-m-${p+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>O(t.field_map.length,t,i),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:r("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(z,{acumbamailConf:t,setAcumbamailConf:i,formFields:l})]})}export{W as A};
