var z=Object.defineProperty;var R=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var V=(e,s,d)=>s in e?z(e,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):e[s]=d,h=(e,s)=>{for(var d in s||(s={}))H.call(s,d)&&V(e,d,s[d]);if(R)for(var d of R(s))P.call(s,d)&&V(e,d,s[d]);return e};import{r as B,j as t,d as G,L as D}from"./main-149.js";import{q as N,_ as l,f as v,p as S,H as J,m as K,n as Q}from"./bi.738.82.js";import{g as U,a as W}from"./bi.338.896.js";const I=(e,s,d)=>{const i=h({},s);i.field_map.splice(e,0,{}),d(h({},i))},X=(e,s,d)=>{const i=h({},s);i.field_map.length>1&&i.field_map.splice(e,1),d(h({},i))},$=(e,s,d,i)=>{const o=h({},d);o.field_map[s][e.target.name]=e.target.value,e.target.value==="custom"&&(o.field_map[s].customValue=""),i(h({},o))},Y=(e,s,d,i,o)=>{const r=h({},d);r.field_map[s][o]=e.target.value,i(h({},r))};function Z({nimbleConf:e,setNimbleConf:s,loading:d,setLoading:i}){var x,m,c,y,w,F,T,k,L,A;const[o,r]=B.useState({show:!1,action:()=>{}}),n=(a,j)=>{var b,_,E,M,O;const u=h({},e);j==="xofEmployees"?(b=a.target)!=null&&b.checked?u.actions.xofEmployees=!0:(r({show:!1}),delete u.actions.xofEmployees):j==="rating"?(_=a.target)!=null&&_.checked?u.actions.rating=!0:(r({show:!1}),delete u.actions.rating):j==="leadStatus"?(E=a.target)!=null&&E.checked?u.actions.leadStatus=!0:(r({show:!1}),delete u.actions.leadStatus):j==="leadSource"?(M=a.target)!=null&&M.checked?u.actions.leadSource=!0:(r({show:!1}),delete u.actions.leadSource):j==="leadType"&&((O=a.target)!=null&&O.checked?u.actions.leadType=!0:(r({show:!1}),delete u.actions.leadType)),r({show:j}),s(h({},u))},p=()=>{r({show:!1})},g=(a,j)=>{const u=h({},e);u[j]=a,s(h({},u))};return t.jsxs("div",{className:"pos-rel d-flx flx-wrp",children:[e.actionName==="company"&&t.jsx(N,{checked:((x=e==null?void 0:e.selectedxofEmployees)==null?void 0:x.length)||!1,onChange:a=>n(a,"xofEmployees"),className:"wdt-200 mt-4 mr-2",value:"xofEmployees",title:l("Add Employee Size","bit - integrations"),subTitle:l("Add Employee Size")}),(e.actionName==="company"||e.actionName==="person")&&t.jsx(N,{checked:((m=e==null?void 0:e.selectedRating)==null?void 0:m.length)||!1,onChange:a=>n(a,"rating"),className:"wdt-200 mt-4 mr-2",value:"rating",title:l("Add Ratings","bit - integrations"),subTitle:l("Add Ratings")}),(e.actionName==="company"||e.actionName==="person")&&t.jsx(N,{checked:((c=e==null?void 0:e.selectedLeadStatus)==null?void 0:c.length)||!1,onChange:a=>n(a,"leadStatus"),className:"wdt-200 mt-4 mr-2",value:"leadStatus",title:l("Add Lead Status","bit - integrations"),subTitle:l("Add Lead Status")}),(e.actionName==="company"||e.actionName==="person")&&t.jsx(N,{checked:((y=e==null?void 0:e.selectedLeadSource)==null?void 0:y.length)||!1,onChange:a=>n(a,"leadSource"),className:"wdt-200 mt-4 mr-2",value:"leadSource",title:l("Add Lead Source","bit - integrations"),subTitle:l("Add Lead Source")}),(e.actionName==="company"||e.actionName==="person")&&t.jsx(N,{checked:((w=e==null?void 0:e.selectedLeadType)==null?void 0:w.length)||!1,onChange:a=>n(a,"leadType"),className:"wdt-200 mt-4 mr-2",value:"leadType",title:l("Add Lead Type","bit - integrations"),subTitle:l("Add Lead Type")}),t.jsxs(v,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:l("Ok","bit-integrations"),show:o.show==="xofEmployees",close:p,action:p,title:l("Add Employee Size","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:l("Select Employee Size","bit-integrations")}),t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(S,{options:(F=e==null?void 0:e.xofEmployees)==null?void 0:F.map(a=>({label:a,value:`${a}`})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedxofEmployees,onChange:a=>g(a,"selectedxofEmployees"),singleSelect:!0,closeOnSelect:!0})})]}),t.jsxs(v,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:l("Ok","bit-integrations"),show:o.show==="rating",close:p,action:p,title:l("Add Rating","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:l("Select Rating","bit-integrations")}),t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(S,{options:(T=e==null?void 0:e.ratings)==null?void 0:T.map(a=>({label:a,value:`${a}`})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedRating,onChange:a=>g(a,"selectedRating"),singleSelect:!0,closeOnSelect:!0})})]}),t.jsxs(v,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:l("Ok","bit-integrations"),show:o.show==="leadStatus",close:p,action:p,title:l("Add Lead Status","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:l("Select Lead Status","bit-integrations")}),t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(S,{options:(k=e==null?void 0:e.leadStatus)==null?void 0:k.map(a=>({label:a,value:a})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedLeadStatus,onChange:a=>g(a,"selectedLeadStatus"),singleSelect:!0,closeOnSelect:!0})})]}),t.jsxs(v,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:l("Ok","bit-integrations"),show:o.show==="leadSource",close:p,action:p,title:l("Add Lead Source","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:l("Select Lead Source","bit-integrations")}),t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(S,{options:(L=e==null?void 0:e.leadSource)==null?void 0:L.map(a=>({label:a,value:a})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedLeadSource,onChange:a=>g(a,"selectedLeadSource"),singleSelect:!0,closeOnSelect:!0})})]}),t.jsxs(v,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:l("Ok","bit-integrations"),show:o.show==="leadType",close:p,action:p,title:l("Add Lead Type","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:l("Select Lead Type","bit-integrations")}),t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(S,{options:(A=e==null?void 0:e.leadTypes)==null?void 0:A.map(a=>({label:a,value:a})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedLeadType,onChange:a=>g(a,"selectedLeadType"),singleSelect:!0,closeOnSelect:!0})})]})]})}function q({field:e,index:s,conf:d,setConf:i,fieldValue:o,fieldLabel:r,className:n}){return t.jsx(J,{onChange:p=>Y(p,s,d,i,o),label:l(r,"bit-integrations"),className:n,type:"text",value:e[o],placeholder:l(r,"bit-integrations")})}function f({i:e,formFields:s,field:d,nimbleConf:i,setNimbleConf:o}){var m;let r;switch(i.actionName){case"person":r=i==null?void 0:i.peopleFields;break;case"company":r=i==null?void 0:i.companyFields;break;default:r=[];break}const n=r&&(r==null?void 0:r.filter(c=>c.required===!0))||[],p=r&&(r==null?void 0:r.filter(c=>c.required===!1))||[],g=G(K),{isPro:x}=g;return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:d.formField||"",onChange:c=>$(c,e,i,o),children:[t.jsx("option",{value:"",children:l("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Form Fields",children:s==null?void 0:s.map(c=>t.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`))}),t.jsx("option",{value:"custom",children:l("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((m=Q)==null?void 0:m.map(c=>t.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`)))})]}),d.formField==="custom"&&t.jsx(q,{field:d,index:e,conf:i,setConf:o,fieldValue:"customValue",fieldLabel:"Custom Value",className:"mr-2"}),t.jsxs("select",{className:"btcd-paper-inp",disabled:e<(n==null?void 0:n.length),name:"nimbleFormField",value:e<n.length?n[e].key||"":d.nimbleFormField||"",onChange:c=>$(c,e,i,o),children:[t.jsx("option",{value:"",children:l("Select Field","bit-integrations")}),e<(n==null?void 0:n.length)?t.jsx("option",{value:n[e].key,children:n[e].label},n[e].key):p==null?void 0:p.map(({key:c,label:y})=>t.jsx("option",{value:c,children:y},c))]})]}),e>=(n==null?void 0:n.length)&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>I(e,i,o),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>X(e,i,o),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function se({formFields:e,nimbleConf:s,setNimbleConf:d,loading:i,setLoading:o,isLoading:r,setIsLoading:n,setSnackbar:p}){const g=x=>{d(m=>{const c=h({},m);return x.target.value!==""?(c.actionName=x.target.value,c.field_map=W(x.target.value==="person"?c==null?void 0:c.peopleFields:c==null?void 0:c.companyFields)):(delete c.actionName,c.field_map=[{formField:"",nimbleFormField:""}]),c})};return t.jsxs(t.Fragment,{children:[!i.allFields&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:l("Select Action:","bit-integrations")}),t.jsxs("select",{onChange:g,name:"actionName",value:s.actionName,className:"btcd-paper-inp w-5",children:[t.jsx("option",{value:"",children:l("Select an action","bit-integrations")}),t.jsx("option",{value:"person","data-action_name":"account",children:l("Add people","bit-integrations")}),t.jsx("option",{value:"company","data-action_name":"project",children:l("Create Company","bit-integrations")})]})]}),(r||i.allFields)&&t.jsx(D,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.actionName&&!r&&!i.allFields&&t.jsxs("div",{children:[t.jsx("br",{}),t.jsxs("div",{className:"mt-5",children:[t.jsx("b",{className:"wdt-100",children:l("Field Map","bit-integrations")}),t.jsx("button",{onClick:()=>U(s,d,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh Fields","bit-integrations")}'`},type:"button",disabled:i.allFields,children:"↻"})]}),t.jsx("br",{}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:l("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:l("Nimble Fields","bit-integrations")})})]}),s==null?void 0:s.field_map.map((x,m)=>t.jsx(f,{i:m,field:x,nimbleConf:s,formFields:e,setNimbleConf:d,setSnackbar:p},`rp-m-${m+9}`)),t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>I(s.field_map.length,s,d),className:"icn-btn sh-sm",type:"button",children:"+"})}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:l("Actions","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsx(Z,{nimbleConf:s,setNimbleConf:d,loading:i,setLoading:o})]})]})}export{se as N};
