var B=Object.defineProperty;var P=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var A=(e,s,n)=>s in e?B(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,d=(e,s)=>{for(var n in s||(s={}))E.call(s,n)&&A(e,n,s[n]);if(P)for(var n of P(s))G.call(s,n)&&A(e,n,s[n]);return e};import{d as L,j as t,r as V,L as y}from"./main-149.js";import{m as O,_ as o,n as R,o as D,q as N,f as _,p as q,H as z}from"./bi.738.82.js";import{g as J,b as K}from"./bi.605.765.js";import{T as Q}from"./bi.653.689.js";const H=(e,s,n,a,c)=>{const i=d({},s);c?a?i.relatedlists[c-1].upload_field_map.splice(e,0,{}):i.relatedlists[c-1].field_map.splice(e,0,{}):a?i.upload_field_map.splice(e,0,{}):i.field_map.splice(e,0,{}),n(d({},i))},U=(e,s,n)=>{const a=d({},s);a.field_map_contact.splice(e,0,{}),n(d({},a))},W=(e,s,n,a,c)=>{const i=d({},s);c?a?i.relatedlists[c-1].upload_field_map.length>1&&i.relatedlists[c-1].upload_field_map.splice(e,1):i.relatedlists[c-1].field_map.length>1&&i.relatedlists[c-1].field_map.splice(e,1):a?i.upload_field_map.length>1&&i.upload_field_map.splice(e,1):i.field_map.length>1&&i.field_map.splice(e,1),n(d({},i))},X=(e,s,n)=>{const a=d({},s);a.field_map_contact.length>1&&a.field_map_contact.splice(e,1),n(d({},a))},I=(e,s,n,a,c,i)=>{const r=d({},n);i?c?r.relatedlists[i-1].upload_field_map[s][e.target.name]=e.target.value:r.relatedlists[i-1].field_map[s][e.target.name]=e.target.value:c?r.upload_field_map[s][e.target.name]=e.target.value:r.field_map[s][e.target.name]=e.target.value,e.target.value==="custom"&&(i?r.relatedlists[i-1].field_map[s].customValue="":r.field_map[s].customValue=""),a(d({},r))},$=(e,s,n,a)=>{const c=d({},n);c.field_map_contact[s][e.target.name]=e.target.value,a(d({},c))},Y=(e,s,n,a,c)=>{const i=d({},n);c?i.relatedlists[c-1].field_map[s].customValue=e.target.value:i.field_map[s].customValue=e.target.value,a(d({},i))};function Z({i:e,formFields:s,field:n,freshdeskConf:a,setFreshdeskConf:c}){var w,p,u,g;if(((w=a==null?void 0:a.field_map)==null?void 0:w.length)===1&&n.freshdeskFormField===""){const l=d({},a),v=J(l);l.field_map=v,c(l)}const i=((p=a==null?void 0:a.ticketFields)==null?void 0:p.filter(l=>l.required===!0))||[],r=((u=a==null?void 0:a.ticketFields)==null?void 0:u.filter(l=>l.required===!1))||[],h=L(O),{isPro:x}=h;return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:n.formField||"",onChange:l=>I(l,e,a,c),children:[t.jsx("option",{value:"",children:o("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Form Fields",children:s==null?void 0:s.map(l=>t.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))}),t.jsx("option",{value:"custom",children:o("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((g=R)==null?void 0:g.map(l=>t.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),n.formField==="custom"&&t.jsx(Q,{onChange:l=>D(l,e,a,c),label:o("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:n.customValue,placeholder:o("Custom Value","bit-integrations"),formFields:s}),t.jsxs("select",{className:"btcd-paper-inp",disabled:e<i.length,name:"freshdeskFormField",value:e<i.length?i[e].key||"":n.freshdeskFormField||"",onChange:l=>I(l,e,a,c),children:[t.jsx("option",{value:"",children:o("Select Field","bit-integrations")}),e<i.length?t.jsx("option",{value:i[e].key,children:i[e].label},i[e].key):r.map(({key:l,label:v})=>t.jsx("option",{value:l,children:v},l))]})]}),e>=i.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>H(e,a,c),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>W(e,a,c),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function f({freshdeskConf:e,setFreshdeskConf:s,formFields:n}){var l,v,F,S;const[a,c]=V.useState(!1),[i,r]=V.useState({show:!1,action:()=>{}}),h=(m,j)=>{var M,T;const b=d({},e);j==="status"&&((M=m.target)!=null&&M.checked?(b.actions.status=!0,r({show:"status"})):(r({show:!1}),delete b.actions.status,delete b.status)),j==="priority"&&((T=m.target)!=null&&T.checked?(b.actions.priority=!0,r({show:"priority"})):(r({show:!1}),delete b.actions.priority,delete b.priority)),j==="updateContact"&&(m.target.checked?b.updateContact=!0:delete b.updateContact),j==="Attachments"&&(m.target.value!==""?b.actions.attachments=m.target.value:delete b.actions.attachments),j==="file"&&(m.target.value!==""?b.actions.file=m.target.value:delete b.actions.file),s(d({},b))},x=()=>{r({show:!1})},w=m=>{const j=d({},e);j.status=m,s(j)},p=m=>{const j=d({},e);j.priority=m,s(j)},u=[{label:"Open",value:"2"},{label:"Pending",value:"3"},{label:"Resolved",value:"4"},{label:"Closed",value:"5"}],g=[{label:"Low",value:"1"},{label:"Medium",value:"2"},{label:"High",value:"3"},{label:"Urgent",value:"4"}];return t.jsxs("div",{className:"d-flx wdt-200",children:[t.jsxs("div",{className:"pos-rel d-flx flx-col w-8",children:[t.jsx(N,{checked:((l=e==null?void 0:e.actions)==null?void 0:l.status)||!1,onChange:m=>h(m,"status"),className:"wdt-200 mt-4 mr-2",value:"status",title:o("Status","bit-integrations"),subTitle:o("Add Ticket Status","bit-integrations")}),t.jsx("small",{style:{marginLeft:30,marginTop:10,color:"red"},children:o("This Required","bit-integrations")}),t.jsxs(_,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:o("Ok","bit-integrations"),show:i.show==="status",close:x,action:x,title:o("Position","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:o("Select Status","bit-integrations")}),a?t.jsx(y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(q,{options:u,className:"msl-wrp-options",singleSelect:!0,defaultValue:e.status,onChange:m=>w(m)})})]})]}),t.jsxs("div",{className:"pos-rel d-flx flx-col w-8",children:[t.jsx(N,{checked:((v=e==null?void 0:e.actions)==null?void 0:v.priority)||!1,onChange:m=>h(m,"priority"),className:"wdt-200 mt-4 mr-2",value:"priority",title:o("Priority","bit-integrations"),subTitle:o("Add Ticket Priority ","bit-integrations")}),t.jsx("small",{style:{marginLeft:30,marginTop:10,color:"red"},children:o("This Required","bit-integrations")}),t.jsxs(_,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:o("Ok","bit-integrations"),show:i.show==="priority",close:x,action:x,title:o("Position","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:o("Select Priority","bit-integrations")}),a?t.jsx(y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(q,{options:g,className:"msl-wrp-options",singleSelect:!0,defaultValue:e.priority,onChange:m=>p(m)})})]})]}),t.jsxs("div",{className:"pos-rel d-flx w-8l",children:[t.jsx("div",{className:"d-flx flx-wrp",children:t.jsx(N,{onChange:()=>r({show:"attachments"}),checked:"attachments"in e.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:o("Photo","bit-integrations"),subTitle:o("Add Photo on Freshdsk Account.","bit-integrations")})}),t.jsxs(_,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:i.show==="attachments",close:()=>r({show:!1}),action:()=>r({show:!1}),title:o("Select Attachment","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2"}),t.jsx("div",{className:"mt-2",children:o("Please select file upload fields","bit-integrations")}),t.jsxs("select",{onChange:m=>h(m,"Attachments"),name:"attachments",value:(F=e.actions)==null?void 0:F.attachments,className:"btcd-paper-inp w-10 mt-2",children:[t.jsx("option",{value:"",children:o("Select file upload field","bit-integrations")}),n.filter(m=>m.type==="file").map(m=>t.jsx("option",{value:m.name,children:m.label},m.name+1))]})]})]}),t.jsxs("div",{className:"pos-rel d-flx w-8l",children:[t.jsx("div",{className:"d-flx flx-wrp",children:t.jsx(N,{onChange:()=>r({show:"file"}),checked:"file"in e.actions,className:"wdt-200 mt-4 mr-2",value:"file",title:o("File","bit-integrations"),subTitle:o("Add File from Bit Integrations to send Freshdsk.","bit-integrations")})}),t.jsxs(_,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:i.show==="file",close:()=>r({show:!1}),action:()=>r({show:!1}),title:o("Select Attachment","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2"}),t.jsx("div",{className:"mt-2",children:o("Please select file upload fields","bit-integrations")}),t.jsxs("select",{onChange:m=>h(m,"file"),name:"file",value:(S=e.actions)==null?void 0:S.file,className:"btcd-paper-inp w-10 mt-2",children:[t.jsx("option",{value:"",children:o("Select file upload field","bit-integrations")}),n.filter(m=>m.type==="file").map(m=>t.jsx("option",{value:m.name,children:m.label},m.name+1))]})]})]}),t.jsx("div",{className:"pos-rel d-flx w-8",children:t.jsx(N,{checked:(e==null?void 0:e.updateContact)||!1,onChange:m=>h(m,"updateContact"),className:"wdt-200 mt-4 mr-2",value:"updateContact",title:o("Update","bit-integrations"),subTitle:o("Update Contact or Create Contact","bit-integrations")})})]})}function C({i:e,formFields:s,field:n,freshdeskConf:a,setFreshdeskConf:c}){var w,p,u,g;if(((w=a==null?void 0:a.field_map_contact)==null?void 0:w.length)===1&&n.contactFreshdeskFormField===""){const l=d({},a),v=K(l);l.field_map_contact=v,c(l)}const i=((p=a==null?void 0:a.contactFields)==null?void 0:p.filter(l=>l.required===!0))||[],r=((u=a==null?void 0:a.contactFields)==null?void 0:u.filter(l=>l.required===!1))||[],h=L(O),{isPro:x}=h;return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:n.formField||"",onChange:l=>$(l,e,a,c),children:[t.jsx("option",{value:"",children:o("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Form Fields",children:s==null?void 0:s.map(l=>t.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))}),t.jsx("option",{value:"custom",children:o("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((g=R)==null?void 0:g.map(l=>t.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),n.formField==="custom"&&t.jsx(z,{onChange:l=>Y(l,e,a,c),label:o("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:n.customValue,placeholder:o("Custom Value","bit-integrations")}),t.jsxs("select",{className:"btcd-paper-inp",disabled:e<i.length,name:"contactFreshdeskFormField",value:e<i.length?i[e].key||"":n.contactFreshdeskFormField||"",onChange:l=>$(l,e,a,c),children:[t.jsx("option",{value:"",children:o("Select Field","bit-integrations")}),e<i.length?t.jsx("option",{value:i[e].key,children:i[e].label},i[e].key):r.map(({key:l,label:v})=>t.jsx("option",{value:l,children:v},l))]})]}),e>=i.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>U(e,a,c),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>X(e,a,c),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function it({formID:e,formFields:s,handleInput:n,freshdeskConf:a,setFreshdeskConf:c,isLoading:i,setIsLoading:r,setSnackbar:h,a:x}){const w=(p,u)=>{var l;const g=d({},a);u==="contactShow"&&((l=p.target)!=null&&l.checked?g.contactShow=!0:delete g.contactShow),c(d({},g))};return t.jsxs(t.Fragment,{children:[i&&t.jsx(y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:o("Map Fields","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:o("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:o("Freshdesk Fields","bit-integrations")})})]}),a.field_map.map((p,u)=>t.jsx(Z,{i:u,field:p,freshdeskConf:a,formFields:s,setFreshdeskConf:c},`keap-m-${u+9}`)),t.jsx("br",{}),t.jsx("br",{}),t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>H(a.field_map.length,a,c),className:"icn-btn sh-sm",type:"button",children:"+"})}),t.jsx(N,{checked:(a==null?void 0:a.contactShow)||!1,onChange:p=>w(p,"contactShow"),className:"wdt-200 mt-4 mr-2",value:"priority",title:o("Show contact field","bit-integrations"),subTitle:o("if want add more field in contact","bit-integrations")}),a.contactShow&&a.field_map_contact.map((p,u)=>t.jsx(C,{i:u,field:p,freshdeskConf:a,formFields:s,setFreshdeskConf:c},`keap-m-${u+9}`)),t.jsx("br",{}),t.jsx("br",{}),a.contactShow&&t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>U(a.field_map_contact.length,a,c),className:"icn-btn sh-sm",type:"button",children:"+"})}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:o("Actions","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsx(f,{freshdeskConf:a,setFreshdeskConf:c,formFields:s})]})]})}export{it as F};
