var A=Object.defineProperty;var F=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var w=(t,s,l)=>s in t?A(t,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[s]=l,n=(t,s)=>{for(var l in s||(s={}))M.call(s,l)&&w(t,l,s[l]);if(F)for(var l of F(s))S.call(s,l)&&w(t,l,s[l]);return t};import{r as v,j as a,L as T,d as I}from"./main-149.js";import{q as y,_ as d,f as $,p as V,m as q,n as E,o as z}from"./bi.738.82.js";import{g as _,a as O,b as P,f as U}from"./bi.561.812.js";import{T as B}from"./bi.653.689.js";function H({getResponseConf:t,setGetResponseConf:s,formFields:l,loading:i,setLoading:m}){var u,c;const[e,h]=v.useState({show:!1,action:()=>{}}),x=(r,o)=>{var N;const p=n({},t);o==="tag"&&((N=r.target)!=null&&N.checked?(_(t,s,m),p.actions.tags=!0):(h({show:!1}),delete p.actions.tags),h({show:"tag"})),o==="update"&&(r.target.checked?p.actions.update=!0:delete p.actions.update),s(n({},p))},b=()=>{h({show:!1})},j=r=>{const o=n({},t);o.selectedTags=r,s(n({},o))};return a.jsxs("div",{className:"pos-rel d-flx w-8",children:[a.jsx(y,{checked:(t==null?void 0:t.selectedTags.length)||!1,onChange:r=>x(r,"tag"),className:"wdt-200 mt-4 mr-2",value:"tag",title:d("Add Tags","bit-integrations"),subTitle:d("Add tags contact","bit-integrations")}),a.jsx(y,{checked:((u=t.actions)==null?void 0:u.update)||!1,onChange:r=>x(r,"update"),className:"wdt-200 mt-4 mr-2",value:"update_contact",title:d("Update Contact","bit-integrations"),subTitle:d("Update Responses with GetResponse exist contact?","bit-integrations")}),a.jsxs($,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:d("Ok","bit-integrations"),show:e.show==="tag",close:b,action:b,title:d("Tags","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"mt-2",children:d("Select contact Tags","bit-integrations")}),i.tags?a.jsx(T,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):a.jsxs("div",{className:"flx flx-between mt-2",children:[a.jsx(V,{options:(c=t==null?void 0:t.tags)==null?void 0:c.map(r=>({label:r.name,value:r.tagId})),className:"msl-wrp-options",defaultValue:t==null?void 0:t.selectedTags,onChange:r=>j(r)}),a.jsx("button",{onClick:()=>_(t,s,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${d("Refresh Groups","bit-integrations")}'`},type:"button",children:"↻"})]})]})]})}const g=(t,s,l)=>{const i=n({},s);i.field_map.splice(t,0,{}),l(n({},i))},D=(t,s,l)=>{const i=n({},s);i.field_map.length>1&&i.field_map.splice(t,1),l(n({},i))},k=(t,s,l,i)=>{const m=n({},l);m.field_map[s][t.target.name]=t.target.value,t.target.value==="custom"&&(m.field_map[s].customValue=""),i(n({},m))};function J({i:t,formFields:s,field:l,getResponseConf:i,setGetResponseConf:m}){var j,u;if(((j=i==null?void 0:i.field_map)==null?void 0:j.length)===1&&l.getResponseFormField===""){const c=n({},i),r=O(c);c.field_map=r,m(c)}const e=(i==null?void 0:i.contactsFields.filter(c=>c.required===!0))||[],h=(i==null?void 0:i.contactsFields.filter(c=>c.required===!1))||[],x=I(q),{isPro:b}=x;return a.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:a.jsxs("div",{className:"pos-rel flx",children:[a.jsxs("div",{className:"flx integ-fld-wrp",children:[a.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:c=>k(c,t,i,m),children:[a.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),a.jsx("optgroup",{label:"Form Fields",children:s==null?void 0:s.map(c=>a.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`))}),a.jsx("option",{value:"custom",children:d("Custom...","bit-integrations")}),a.jsx("optgroup",{label:`General Smart Codes ${b?"":"(PRO)"}`,children:b&&((u=E)==null?void 0:u.map(c=>a.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`)))})]}),l.formField==="custom"&&a.jsx(B,{onChange:c=>z(c,t,i,m),label:d("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:d("Custom Value","bit-integrations"),formFields:s}),a.jsxs("select",{className:"btcd-paper-inp",disabled:t<e.length,name:"getResponseFormField",value:t<e?e[t].label||"":l.getResponseFormField||"",onChange:c=>k(c,t,i,m),children:[a.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),t<e.length?a.jsx("option",{value:e[t].key,children:e[t].label},e[t].key):h.map(({key:c,label:r})=>a.jsx("option",{value:c,children:r},c))]})]}),t>=e.length&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>g(t,i,m),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),a.jsx("button",{onClick:()=>D(t,i,m),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:a.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function Y({formFields:t,handleInput:s,getResponseConf:l,setGetResponseConf:i,loading:m,setLoading:e,setSnackbar:h}){const[x,b]=v.useState({name:"",auth_token:""}),[j,u]=v.useState(!1);return a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsx("b",{className:"wdt-200 d-in-b",children:d("Campaigns:","bit-integrations")}),a.jsxs("select",{onChange:s,name:"campaignId",value:l.campaignId,className:"btcd-paper-inp w-5",children:[a.jsx("option",{value:"",children:d("Select Campaign","bit-integrations")}),(l==null?void 0:l.campaigns)&&l.campaigns.map(({campaignId:c,name:r})=>a.jsx("option",{value:c,children:r},c))]}),a.jsx("button",{onClick:()=>P(l,i,b,u,m,e,"refreshCampaigns"),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Fetch All Campaigns","bit-integrations")}'`},type:"button",disabled:m.customFields,children:"↻"}),(m.customFields||m.field)&&a.jsx(T,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(l==null?void 0:l.campaignId)&&a.jsxs("div",{children:[a.jsx("br",{}),a.jsx("div",{className:"mt-5",children:a.jsxs("b",{className:"wdt-100",children:[d("Field Map","bit-integrations"),a.jsx("button",{onClick:()=>U(l,i,e,"manual"),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Refresh custom fields","bit-integrations")}'`},type:"button",disabled:m.field,children:"↻"})]})}),a.jsx("br",{}),a.jsx("div",{className:"btcd-hr mt-1"}),a.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[a.jsx("div",{className:"txt-dp",children:a.jsx("b",{children:d("Form Fields","bit-integrations")})}),a.jsx("div",{className:"txt-dp",children:a.jsx("b",{children:d("GetResponse Fields","bit-integrations")})})]}),(l==null?void 0:l.campaignId)&&(l==null?void 0:l.field_map.map((c,r)=>a.jsx(J,{i:r,field:c,getResponseConf:l,formFields:t,setGetResponseConf:i,setSnackbar:h},`rp-m-${r+9}`))),a.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:a.jsx("button",{onClick:()=>g(l.field_map.length,l,i),className:"icn-btn sh-sm",type:"button",children:"+"})}),a.jsx("br",{}),a.jsx("br",{}),a.jsx("div",{className:"mt-4",children:a.jsx("b",{className:"wdt-100",children:d("Actions","bit-integrations")})}),a.jsx("div",{className:"btcd-hr mt-1"}),a.jsx(H,{getResponseConf:l,setGetResponseConf:i,formFields:t,loading:m,setLoading:e})]})]})}export{Y as G};
