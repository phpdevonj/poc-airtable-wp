var G=Object.defineProperty;var P=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var R=(e,n,l)=>n in e?G(e,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[n]=l,j=(e,n)=>{for(var l in n||(n={}))Q.call(n,l)&&R(e,l,n[l]);if(P)for(var l of P(n))U.call(n,l)&&R(e,l,n[l]);return e};import{d as W,j as a,r as z,L as M}from"./main-149.js";import{m as J,_ as i,n as K,o as X,V as Y,q as T,f as u,p as F}from"./bi.738.82.js";import{g as Z,a as b,b as D,d as $,e as q,f as H}from"./bi.291.756.js";import{T as p}from"./bi.653.689.js";const L=(e,n,l)=>{const s=j({},n);s.field_map.splice(e,0,{}),l(j({},s))},h=(e,n,l)=>{const s=j({},n);s.field_map.length>1&&s.field_map.splice(e,1),l(j({},s))},B=(e,n,l,s)=>{const x=j({},l);x.field_map[n][e.target.name]=e.target.value,e.target.value==="custom"&&(x.field_map[n].customValue=""),s(j({},x))};function f({i:e,formFields:n,field:l,hubspotConf:s,setHubspotConf:x}){var v,k,S,m;if(((v=s==null?void 0:s.field_map)==null?void 0:v.length)===1&&l.hubspotField===""){const c=j({},s),w=Z(c);c.field_map=w,x(c)}const r=((k=s==null?void 0:s.hubSpotFields)==null?void 0:k.filter(c=>c.required===!0))||[],_=((S=s==null?void 0:s.hubSpotFields)==null?void 0:S.filter(c=>c.required===!1))||[],N=W(J),{isPro:d}=N;return a.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:a.jsxs("div",{className:"pos-rel flx",children:[a.jsxs("div",{className:"flx integ-fld-wrp",children:[a.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:c=>B(c,e,s,x),children:[a.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),a.jsx("optgroup",{label:"Form Fields",children:n==null?void 0:n.map(c=>a.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`))}),a.jsx("option",{value:"custom",children:i("Custom...","bit-integrations")}),a.jsx("optgroup",{label:`General Smart Codes ${d?"":"(PRO)"}`,children:d&&((m=K)==null?void 0:m.map(c=>a.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`)))})]}),l.formField==="custom"&&a.jsx(p,{onChange:c=>X(c,e,s,x),label:i("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:i("Custom Value","bit-integrations"),formFields:n}),a.jsxs("select",{className:"btcd-paper-inp",disabled:e<r.length,name:"hubspotField",value:e<(r==null?void 0:r.length)?r[e].key||"":l.hubspotField||"",onChange:c=>B(c,e,s,x),children:[a.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),e<r.length?a.jsx("option",{value:r[e].key,children:r[e].label},r[e].key):Y(_,"label","ASC").map(({key:c,label:w})=>a.jsx("option",{value:c,children:w},c))]})]}),e>=r.length&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>L(e,s,x),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),a.jsx("button",{onClick:()=>h(e,s,x),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:a.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function C({hubspotConf:e,setHubspotConf:n,formFields:l,loading:s,setLoading:x}){var w,O,A,V,I,E,o;const[r,_]=z.useState({show:!1,action:()=>{}}),N=(t,y)=>{const g=j({},e);y==="contact_owner"?(b(e,n,x),t.target.checked?g.actions.contact_owner=!0:delete g.actions.contact_owner):y==="contact"?(D(e,n,x),t.target.checked?g.actions.contact=!0:delete g.actions.contact):y==="company"?($(e,n,x),t.target.checked?g.actions.company=!0:delete g.actions.company):y==="deal_type"?t.target.checked?g.actions.deal_type=!0:delete g.actions.deal_type:y==="priority"?t.target.checked?g.actions.priority=!0:delete g.actions.priority:y==="lifecycle_stage"?t.target.checked?g.actions.lifecycle_stage=!0:delete g.actions.lifecycle_stage:y==="lead_status"&&(t.target.checked?g.actions.lead_status=!0:delete g.actions.lead_status),_({show:y}),n(j({},g))},d=()=>{_({show:!1})},v=(t,y)=>{const g=j({},e);g[y]=t,n(j({},g))},k=[{value:"subscriber",label:"Subscriber"},{value:"lead",label:"Lead"},{value:"marketingqualifiedlead",label:"Marketing Qualified Lead"},{value:"salesqualifiedlead",label:"Sales Qualified Lead"},{value:"opportunity",label:"Opportunity"},{value:"evangelist",label:"Evangelist"},{value:"other",label:"Other"},{value:"customer",label:"Customer"}],S=[{value:"OPEN",label:"Open"},{value:"NEW",label:"New"},{value:"IN_PROGRESS",label:"In Progress"},{value:"OPEN_DEAL",label:"Open Deal"},{value:"UNQUALIFIED",label:"Unqualified"},{value:"ATTEMPTED_TO_CONTACT",label:"Attempted to contact"},{value:"CONNECTED",label:"Connected"},{value:"BAD_TIMING",label:"Bad timing"}],m=[{value:"newbusiness",label:"New Business"},{value:"existingbusiness",label:"Existing Business"}],c=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}];return a.jsxs("div",{className:"pos-rel d-flx w-8",children:[(e==null?void 0:e.actionName)&&a.jsx(T,{checked:((w=e==null?void 0:e.contact_owner)==null?void 0:w.length)||!1,onChange:t=>N(t,"contact_owner"),className:"wdt-200 mt-4 mr-2",value:"contact_owner",title:i("Contact Owner","bit-integrations"),subTitle:i("Add a contact owner","bit-integrations")}),(e==null?void 0:e.actionName)==="contact"&&a.jsx(T,{checked:(e==null?void 0:e.lifecycle_stage)||!1,onChange:t=>N(t,"lifecycle_stage"),className:"wdt-200 mt-4 mr-2",value:"lifecycle_stage",title:i("Lifecycle Stage","bit-integrations"),subTitle:i("Add a lifecycle stage","bit-integrations")}),(e==null?void 0:e.actionName)==="contact"&&a.jsx(T,{checked:(e==null?void 0:e.lead_status)||!1,onChange:t=>N(t,"lead_status"),className:"wdt-200 mt-4 mr-2",value:"lead_status",title:i("Lead Status","bit-integrations"),subTitle:i("Add lead status","bit-integrations")}),(e==null?void 0:e.actionName)==="deal"&&a.jsx(T,{checked:(e==null?void 0:e.contact)||!1,onChange:t=>N(t,"contact"),className:"wdt-200 mt-4 mr-2",value:"contact",title:i("Contact","bit-integrations"),subTitle:i("Associate deal with contacts","bit-integrations")}),(e==null?void 0:e.actionName)==="deal"&&a.jsx(T,{checked:(e==null?void 0:e.company)||!1,onChange:t=>N(t,"company"),className:"wdt-200 mt-4 mr-2",value:"company",title:i("Company","bit-integrations"),subTitle:i("Associate deal with company","bit-integrations")}),(e==null?void 0:e.actionName)==="deal"&&a.jsx(T,{checked:(e==null?void 0:e.deal_type)||!1,onChange:t=>N(t,"deal_type"),className:"wdt-200 mt-4 mr-2",value:"deal_type",title:i("Deal Type","bit-integrations"),subTitle:i("Add type to deal","bit-integrations")}),(e==null?void 0:e.actionName)!=="contact"&&a.jsx(T,{checked:(e==null?void 0:e.priority)||!1,onChange:t=>N(t,"priority"),className:"wdt-200 mt-4 mr-2",value:"deal_type",title:i("Priority","bit-integrations"),subTitle:i("Add priority","bit-integrations")}),a.jsxs(u,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:r.show==="contact_owner",close:d,action:d,title:i("Contact Owner","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),s.owners?a.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):a.jsxs("div",{className:"flx flx-between mt-2",children:[a.jsx(F,{className:"msl-wrp-options",defaultValue:e==null?void 0:e.contact_owner,options:(A=(O=e.default)==null?void 0:O.owners)==null?void 0:A.map(t=>({label:t.ownerName,value:t.ownerId.toString()})),onChange:t=>v(t,"contact_owner"),customValue:!0,singleSelect:!0}),a.jsx("button",{onClick:()=>b(e,n,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${i("Refresh Owners","bit-integrations")}'`},type:"button",disabled:s.owners,children:"↻"})]})]}),a.jsxs(u,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:r.show==="lifecycle_stage",close:d,action:d,title:i("Lifecycle Stage","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"flx flx-center mt-2",children:a.jsx(F,{className:"msl-wrp-options",defaultValue:e==null?void 0:e.lifecycle_stage,options:k==null?void 0:k.map(t=>({label:t.label,value:t.value.toString()})),onChange:t=>v(t,"lifecycle_stage"),customValue:!0,singleSelect:!0})})]}),a.jsxs(u,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:r.show==="lead_status",close:d,action:d,title:i("Lead Status","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"flx flx-center mt-2",children:a.jsx(F,{className:"msl-wrp-options",defaultValue:e==null?void 0:e.lead_status,options:S==null?void 0:S.map(t=>({label:t.label,value:t.value.toString()})),onChange:t=>v(t,"lead_status"),customValue:!0,singleSelect:!0})})]}),a.jsxs(u,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:r.show==="contact",close:d,action:d,title:i("Contacts","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),s.contacts?a.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):a.jsxs("div",{className:"flx flx-between mt-2",children:[a.jsx(F,{className:"msl-wrp-options",defaultValue:e==null?void 0:e.contact,options:(I=(V=e==null?void 0:e.default)==null?void 0:V.contacts)==null?void 0:I.map(t=>({label:t.contactName,value:t.contactId.toString()})),onChange:t=>v(t,"contact"),customValue:!0}),a.jsx("button",{onClick:()=>D(e,n,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${i("Refresh CRM Tags","bit-integrations")}'`},type:"button",disabled:s.contacts,children:"↻"})]})]}),a.jsxs(u,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:r.show==="company",close:d,action:d,title:i("Company","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),s.companies?a.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):a.jsxs("div",{className:"flx flx-between mt-2",children:[a.jsx(F,{className:"msl-wrp-options",defaultValue:e==null?void 0:e.company,options:(o=(E=e==null?void 0:e.default)==null?void 0:E.companies)==null?void 0:o.map(t=>({label:t.companyName,value:t.companyId.toString()})),onChange:t=>v(t,"company"),customValue:!0}),a.jsx("button",{onClick:()=>$(e,n,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${i("Refresh CRM Tags","bit-integrations")}'`},type:"button",disabled:s.companies,children:"↻"})]})]}),a.jsxs(u,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:r.show==="deal_type",close:d,action:d,title:i("Deal Type","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"flx flx-center mt-2",children:a.jsx(F,{className:"msl-wrp-options",defaultValue:e==null?void 0:e.deal_type,options:m==null?void 0:m.map(t=>({label:t.label,value:t.value.toString()})),onChange:t=>v(t,"deal_type"),customValue:!0,singleSelect:!0})})]}),a.jsxs(u,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:r.show==="priority",close:d,action:d,title:i("Priority","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"flx flx-center mt-2",children:a.jsx(F,{className:"msl-wrp-options",defaultValue:e==null?void 0:e.priority,options:c==null?void 0:c.map(t=>({label:t.label,value:t.value.toString()})),onChange:t=>v(t,"priority"),customValue:!0,singleSelect:!0})})]})]})}function ce({formFields:e,handleInput:n,hubspotConf:l,setHubspotConf:s,setSnackbar:x,loading:r,setLoading:_}){var v,k,S;const N=[{label:"Create Contact",value:"contact"},{label:"Create Deal",value:"deal"},{label:"Create Ticket",value:"ticket"}],d=m=>{var c;if((m.target.value==="deal"||m.target.value==="ticket")&&H(l,s,_,m.target.value,r),m.target.value==="contact"&&q(l,s,_,m.target.value,r),m.target.name==="pipeline"){const w=j({},l);m.target.value!==""?w[m.target.name]=m.target.value:delete w[m.target.name];const O=(c=l==null?void 0:l.default)==null?void 0:c.pipelines.filter(({pipelineId:A})=>A===m.target.value).map(({stages:A})=>A);w.stageTmp=O,s(j({},w))}};return a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsxs("div",{className:"flx",children:[a.jsx("b",{className:"wdt-200 d-in-b",children:i("Action:","bit-integrations")}),a.jsxs("select",{onChange:d,name:"actionName",value:l==null?void 0:l.actionName,className:"btcd-paper-inp w-5",children:[a.jsx("option",{value:"",children:i("Select Action","bit-integrations")}),N.map(({label:m,value:c})=>a.jsx("option",{value:c,children:m},m))]})]}),(r.customFields||r.pipelines)&&a.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),a.jsx("br",{}),a.jsx("br",{}),r.hubSpotFields&&((l==null?void 0:l.actionName)==="deal"||l.actionName==="ticket")&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flx",children:[a.jsx("b",{className:"wdt-200 d-in-b",children:i("Pipeline:","bit-integrations")}),a.jsxs("select",{onChange:d,name:"pipeline",value:l==null?void 0:l.pipeline,className:"btcd-paper-inp w-5",children:[a.jsx("option",{value:"",children:i("Select Pipeline","bit-integrations")}),(v=l==null?void 0:l.default)==null?void 0:v.pipelines.map(({pipelineId:m,pipelineName:c})=>a.jsx("option",{value:m,children:c},m))]})]}),a.jsx("br",{}),a.jsx("br",{}),a.jsxs("div",{className:"flx",children:[a.jsx("b",{className:"wdt-200 d-in-b",children:i("Stage:","bit-integrations")}),a.jsxs("select",{onChange:n,name:"stage",value:l==null?void 0:l.stage,className:"btcd-paper-inp w-5",children:[a.jsx("option",{value:"",children:i("Select Stage","bit-integrations")}),(S=(k=l==null?void 0:l.stageTmp)==null?void 0:k[0])==null?void 0:S.map(({stageId:m,stageName:c})=>a.jsx("option",{value:m,children:c},m))]})]})]}),a.jsx("br",{}),r.hubSpotFields&&a.jsxs("div",{children:[a.jsx("div",{className:"mt-5",children:a.jsxs("b",{className:"wdt-100",children:[i("Field Map","bit-integrations"),a.jsx("button",{onClick:()=>q(l,s,_,l.actionName,r,!0),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh custom fields","bit-integrations")}'`},type:"button",disabled:r.customFields,children:"↻"})]})}),a.jsx("div",{className:"btcd-hr mt-1"}),r.customFieldsRefresh&&a.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),a.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[a.jsx("div",{className:"txt-dp",children:a.jsx("b",{children:i("Form Fields","bit-integrations")})}),a.jsx("div",{className:"txt-dp",children:a.jsx("b",{children:i("Hubspot Fields","bit-integrations")})})]}),l==null?void 0:l.field_map.map((m,c)=>a.jsx(f,{i:c,field:m,hubspotConf:l,formFields:e,setHubspotConf:s,setSnackbar:x},`rp-m-${c+9}`)),a.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:a.jsx("button",{onClick:()=>L(l.field_map.length,l,s),className:"icn-btn sh-sm",type:"button",children:"+"})}),a.jsx("br",{}),a.jsx("br",{}),a.jsx("div",{className:"mt-4",children:a.jsx("b",{className:"wdt-100",children:i("Actions","bit-integrations")})}),a.jsx("div",{className:"btcd-hr mt-1"}),a.jsx(C,{hubspotConf:l,setHubspotConf:s,formFields:e,loading:r,setLoading:_})]})]})}export{ce as H};
