var F=Object.defineProperty;var g=Object.getOwnPropertySymbols;var u=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var p=(s,c,t)=>c in s?F(s,c,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[c]=t,d=(s,c)=>{for(var t in c||(c={}))u.call(c,t)&&p(s,t,c[t]);if(g)for(var t of g(c))w.call(c,t)&&p(s,t,c[t]);return s};import{j as e,d as y,r as _,L as I}from"./main-149.js";import{q as k,_ as i,m as $,n as A,o as O,U as G,r as q}from"./bi.738.82.js";import{g as S,f as v,a as T}from"./bi.50.820.js";import{T as V}from"./bi.653.689.js";function L({mailupConf:s,setMailupConf:c}){var l;const t=a=>{const n=d({},s);a.target.checked?n.actions.doubleOptIn=!0:delete n.actions.doubleOptIn,c(d({},n))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(k,{checked:((l=s.actions)==null?void 0:l.doubleOptIn)||!1,onChange:a=>t(a),className:"wdt-200 mt-4 mr-2",value:"doubleOptIn",title:i("Double Opt-in","bit-integrations"),subTitle:i("Add Double Opt-in","bit-integrations")})})}const R=(s,c,t)=>{const l=d({},c);l.field_map.splice(s,0,{}),t(d({},l))},E=(s,c,t)=>{const l=d({},c);l.field_map.length>1&&l.field_map.splice(s,1),t(d({},l))},N=(s,c,t,l)=>{const a=d({},t);a.field_map[c][s.target.name]=s.target.value,s.target.value==="custom"&&(a.field_map[c].customValue=""),l(d({},a))};function D({i:s,formFields:c,field:t,mailupConf:l,setMailupConf:a}){var j,m;if(((j=l==null?void 0:l.field_map)==null?void 0:j.length)===1&&t.mailupFormField===""){const r=d({},l),x=S(r);r.field_map=x,a(r)}const n=(l==null?void 0:l.staticFields.filter(r=>r.required===!0))||[],h=(l==null?void 0:l.staticFields.filter(r=>r.required===!1))||[],b=y($),{isPro:o}=b;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:r=>N(r,s,l,a),children:[e.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:c==null?void 0:c.map(r=>e.jsx("option",{value:r.name,children:r.label},`ff-rm-${r.name}`))}),e.jsx("option",{value:"custom",children:i("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${o?"":"(PRO)"}`,children:o&&((m=A)==null?void 0:m.map(r=>e.jsx("option",{value:r.name,children:r.label},`ff-rm-${r.name}`)))})]}),t.formField==="custom"&&e.jsx(V,{onChange:r=>O(r,s,l,a),label:i("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:i("Custom Value","bit-integrations"),formFields:c}),e.jsxs("select",{className:"btcd-paper-inp",disabled:s<n.length,name:"mailupFormField",value:s<n.length?n[s].key||"":t.mailupFormField||"",onChange:r=>N(r,s,l,a),children:[e.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),s<n.length?e.jsx("option",{value:n[s].key,children:n[s].label},n[s].key):h.map(({key:r,label:x})=>e.jsx("option",{value:r,children:x},r))]})]}),s>=n.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>R(s,l,a),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>E(s,l,a),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function U({formFields:s,handleInput:c,mailupConf:t,setMailupConf:l,isLoading:a,setIsLoading:n,setSnackbar:h}){return _.useEffect(()=>{t!=null&&t.listId&&v(t,l,n,h)},[t==null?void 0:t.listId]),e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:i("Select List:","bit-integrations")}),e.jsxs("select",{onChange:c,name:"listId",value:t.listId,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:i("Select List","bit-integrations")}),(t==null?void 0:t.allList)&&t.allList.map(({idList:b,name:o})=>e.jsx("option",{value:b,children:o},b))]}),e.jsx("button",{onClick:()=>T(t,l,n,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Fetch All List","bit-integrations")}'`},type:"button",disabled:a,children:"↻"}),e.jsx("br",{}),a&&e.jsx(I,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(t==null?void 0:t.listId)&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("b",{className:"wdt-200 d-in-b",children:[i("Groups:","bit-integrations"),e.jsx(G,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["If you want to assign a subscriber to a group then select a group otherwise leave it blank.",e.jsx("br",{})]})})]}),e.jsxs("select",{onChange:c,name:"groupId",value:t.groupId,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:i("Select Group","bit-integrations")}),(t==null?void 0:t.allGroup)&&t.allGroup.map(({idGroup:b,name:o})=>e.jsx("option",{value:b,children:o},b))]}),e.jsx("button",{onClick:()=>v(t,l,n,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Fetch All Groups","bit-integrations")}'`},type:"button",disabled:a,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-5",children:e.jsx("b",{className:"wdt-100",children:i("Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Mailup Fields","bit-integrations")})})]}),t==null?void 0:t.field_map.map((b,o)=>e.jsx(D,{i:o,field:b,mailupConf:t,formFields:s,setMailupConf:l,setSnackbar:h},`rp-m-${o+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>q(t.field_map.length,t,l,!1),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:i("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(L,{mailupConf:t,setMailupConf:l,formFields:s})]})]})}export{U as M};
