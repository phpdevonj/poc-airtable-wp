var y=Object.defineProperty;var g=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var w=(t,a,s)=>a in t?y(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,b=(t,a)=>{for(var s in a||(a={}))M.call(a,s)&&w(t,s,a[s]);if(g)for(var s of g(a))T.call(a,s)&&w(t,s,a[s]);return t};import{r as N,j as e,L as k}from"./main-149.js";import{q as F,_ as i,f as S,p as R}from"./bi.738.82.js";import{h as _,g as A,a as E}from"./bi.87.695.js";function L({oneDriveConf:t,setOneDriveConf:a,formFields:s,formID:x,setSnackbar:u}){var p;t.folderMap?t.folderMap[0]:t.folder,N.useState(!1);const[r,d]=N.useState({show:!1}),j=(l,n,h)=>{const o=b({},t);n==="create_folder"?l.target.checked?o.actions.create_folder={name:"",suffix:!1}:(delete o.actions.create_folder,delete o.actions.share.folder):n==="attachments"&&(l!==""?o.actions.attachments=l:(delete o.actions.attachments,delete o.actions.share.file)),a(b({},o))},c=(l,n)=>{const h=b({},t);n==="deleteFile"&&(l.target.checked?h.actions.delete_from_wp=!0:delete h.actions.delete_from_wp),a(b({},h))},m=()=>{var l,n,h;(l=t.actions)!=null&&l.share||(t.actions.share={}),(h=(n=t.actions)==null?void 0:n.share)!=null&&h.file||(t.actions.share.file={permissions:[{email:"",access:"34",accessLabel:"View"},{email:"",access:"5",accessLabel:"Edit"},{email:"",access:"4",accessLabel:"Share"},{email:"",access:"6",accessLabel:"View and Comment"}],mail:"false"}),d({show:"attachments"})},f=()=>s.filter(l=>l.type==="file").map(l=>({label:l.label,value:l.name}));return e.jsxs("div",{className:"pos-rel d-flx w-5",children:[e.jsxs("div",{className:"pos-rel d-flx flx-col w-8",children:[e.jsx(F,{onChange:m,checked:"attachments"in t.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:i("Upload Files","bit-integration-pro"),subTitle:i("Add attachments from Bit-integration-pro to OneDrive folder.","bit-integration-pro")}),e.jsx("small",{style:{marginLeft:30,marginTop:10,color:"red",fontWeight:"bold"},children:i("This Required","bit-integrations")})]}),e.jsx(S,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:r.show==="attachments",close:()=>d({show:!1}),action:()=>d({show:!1}),title:i("Select Attachment","bitform"),children:e.jsxs("div",{style:{height:"95%"},children:[e.jsx("div",{className:"mt-2",children:i("Select file upload fields","bitform")}),e.jsx(R,{defaultValue:t.actions.attachments,className:"mt-2 w-10 mb-25",options:f(),onChange:l=>j(l,"attachments"),height:300})]})}),e.jsx("div",{className:"pos-rel d-flx flx-col w-8",children:e.jsx(F,{checked:((p=t.actions)==null?void 0:p.delete_from_wp)||!1,onChange:l=>c(l,"deleteFile"),className:"mt-4 mr-2",value:"delete_from_wp",title:i("Delete File From Wordpress","bit-integrations"),subTitle:i("Delete file from Wordpress after upload in OneDrive","bit-integrations")})})]})}function q({formID:t,formFields:a,oneDriveConf:s,setOneDriveConf:x,isLoading:u,setIsLoading:r,setSnackbar:d}){var j;return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-100 d-in-b",children:"Folder:"}),e.jsxs("select",{onChange:c=>_(c,s,x,t,r,d),name:"folder",value:s.folderMap[0]||s.folder,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:i("Select Folder","bit-integrations")}),((j=s==null?void 0:s.default)==null?void 0:j.rootFolders)&&s.default.rootFolders.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]}),e.jsx("button",{onClick:()=>A(t,s,x,r),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh  Folders","bit-integrations")}'`},type:"button",disabled:u,children:"↻"}),e.jsx("br",{}),s.folderMap.map((c,m)=>{var f,p;return e.jsxs("div",{children:[e.jsx("br",{}),e.jsxs("div",{className:"flx",children:[e.jsx("b",{className:"wdt-100 d-in-b"}),e.jsx("div",{className:"d-in-b",style:{width:(m+1)*10,marginLeft:1,marginRight:2,height:58,marginTop:-60},children:e.jsx("div",{className:"sub-tree"})}),e.jsxs("div",{className:"flx sub-folder w-7",children:[e.jsxs("select",{onChange:l=>_(l,s,x,t,r,d,m+1),name:"folder",value:s.folderMap[m+1]||s.folder,className:"btcd-paper-inp",children:[e.jsx("option",{value:s.folderMap[m],children:"/ root"}),((p=(f=s==null?void 0:s.default)==null?void 0:f.folders)==null?void 0:p[c])&&s.default.folders[c].map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),e.jsx("button",{onClick:()=>E(t,s,x,r,d,m),className:"d-non icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh Sub Folders","bit-integrations")}'`},type:"button",disabled:u,children:"↻"})]})]})]},c)}),e.jsx("br",{}),e.jsx("br",{}),u&&e.jsx(k,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.folder&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:i("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(L,{oneDriveConf:s,setOneDriveConf:x,formFields:a,formID:t,setIsLoading:r,setSnackbar:d})]})]})}export{q as O};
