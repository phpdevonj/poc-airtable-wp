var T=Object.defineProperty;var d=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var _=(e,l,t)=>l in e?T(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,h=(e,l)=>{for(var t in l||(l={}))k.call(l,t)&&_(e,t,l[t]);if(d)for(var t of d(l))A.call(l,t)&&_(e,t,l[t]);return e};import{j as r,L as P}from"./main-149.js";import{B as N,c as E,d as S,_ as b,p as v,N as R}from"./bi.738.82.js";const $=(e,l,t,n,u)=>{let o=N(l);const{name:c,value:x}=e.target;switch(o[c]=x,c){case"module":o=q(o,t,n,u);break}t(o)},q=(e,l,t,n)=>{var o,c;let u=N(e);return u.field_map=[],(c=(o=u==null?void 0:u.default)==null?void 0:o.fields)!=null&&c[e.module]?u=M(u):refreshFields(u,l,t,n),u},w=(e,l,t,n=null)=>{t(!0);const o=E(null,"academy_lms_all_course",{type:n},"GET").then(c=>{if(c&&c.success){const x=h({},e);return x.default||(x.default={}),x.default.courses=c.data,l(h({},x)),t(!1),"Courses fetched successfully"}return t(!1),"Courses fetch failed. please try again"});S.promise(o,{success:c=>c,error:b("Error Occurred","bit-integrations"),loading:b("Loading Courses...")})},F=(e,l,t)=>{t(!0);const n=E(null,"academy_lms_all_lesson","","GET").then(u=>{if(u&&u.success){const o=h({},e);return o.default||(o.default={}),o.default.lessons=u.data,l(h({},o)),t(!1),"Lessons fetched successfully"}return t(!1),"Lessons fetch failed, please try again..."});S.promise(n,{success:u=>u,error:b("Error Occurred","bit-integrations"),loading:b("Loading Lessons...")})},M=e=>{const l=N(e);return l.default.fields[l.module].required.forEach(t=>{l.field_map.find(n=>n.wcField===t)||l.field_map.unshift({formField:"",wcField:t,required:!0})}),l.field_map.length||(l.field_map=[{formField:"",wcField:""}]),l};function a({academyLmsConf:e,setAcademyLmsConf:l,isLoading:t,setIsLoading:n}){var x,j;const u=[{value:"enroll-course",label:"Enroll the user in a course"},{value:"unenroll-course",label:"Unenroll user from a course"},{value:"complete-course",label:"Mark a course complete for the user"},{value:"complete-lesson",label:"Mark a lesson complete for the user"},{value:"reset-course",label:"Reset the user progress in a course"}],o=i=>{const s=h({},e),{name:p,value:g}=i.target;i.target.value!==""?s[p]=g:delete s[p],p==="actionName"?(s!=null&&s.selectedCourse&&delete s.selectedCourse,s!=null&&s.selectedLesson&&delete s.selectedLesson,s!=null&&s.selectedAllCourse&&delete s.selectedAllCourse,l(h({},s)),g!==""&&(w(s,l,n,g),g==="complete-lesson"&&F(s,l,n))):l(h({},s))},c=(i,s)=>{const p=h({},e);i?(s==="selectedCourse"&&i.includes("all-course")&&(p.selectedAllCourse=p.default.courses),p[s]=i?i.split(","):[]):p!=null&&p.selectedAllCourse&&delete p.selectedAllCourse,l(h({},p))};return r.jsxs(r.Fragment,{children:[r.jsx("br",{}),r.jsxs("div",{className:"flx",children:[r.jsx("b",{className:"wdt-200 d-in-b",children:b("Action:","bit-integrations")}),r.jsxs("select",{onChange:o,name:"actionName",value:e==null?void 0:e.actionName,className:"btcd-paper-inp w-5",children:[r.jsx("option",{value:"",children:b("Select Action","bit-integrations")}),u.map(({label:i,value:s})=>r.jsx("option",{value:s,children:i},i))]})]}),r.jsx("br",{}),((e==null?void 0:e.actionName)==="enroll-course"||(e==null?void 0:e.actionName)==="unenroll-course"||(e==null?void 0:e.actionName)==="complete-course"||(e==null?void 0:e.actionName)==="reset-course"||(e==null?void 0:e.actionName)==="complete-lesson")&&r.jsxs("div",{className:"flx",children:[r.jsx("b",{className:"wdt-200 d-in-b",children:b("Select Course: ","bit-integrations")}),r.jsx(v,{defaultValue:e==null?void 0:e.selectedCourse,className:"btcd-paper-drpdwn w-5",options:((x=e==null?void 0:e.default)==null?void 0:x.courses)&&e.default.courses.map(i=>({label:i.courseTitle,value:i.courseId.toString()})),onChange:i=>c(i,"selectedCourse"),singleSelect:(e==null?void 0:e.actionName)==="complete-course"||(e==null?void 0:e.actionName)==="complete-lesson"||(e==null?void 0:e.actionName)==="reset-course"}),r.jsx("button",{onClick:()=>w(e,l,n,e==null?void 0:e.actionName),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${b("Refresh Courses","bit-integrations")}'`},type:"button",disabled:t,children:"↻"})]}),r.jsx("br",{}),(e==null?void 0:e.actionName)==="complete-lesson"&&r.jsxs("div",{className:"flx",children:[r.jsx("b",{className:"wdt-200 d-in-b",children:b("Select Lessons: ","bit-integrations")}),r.jsx(v,{defaultValue:e==null?void 0:e.selectedLesson,className:"btcd-paper-drpdwn w-5",options:((j=e==null?void 0:e.default)==null?void 0:j.lessons)&&e.default.lessons.map(i=>({label:i.lessonTitle,value:i.lessonId.toString()})),onChange:i=>c(i,"selectedLesson"),singleSelect:!0}),r.jsx("button",{onClick:()=>F(e,l,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${b("Refresh Courses","bit-integrations")}'`},type:"button",disabled:t,children:"↻"})]}),r.jsx("br",{}),r.jsx("br",{}),t&&r.jsx(P,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),r.jsx(R,{note:"This integration will only work for logged-in users."})]})}export{a as A,$ as h};
