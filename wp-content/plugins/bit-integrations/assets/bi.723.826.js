var k=Object.defineProperty;var v=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var N=(e,s,a)=>s in e?k(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,r=(e,s)=>{for(var a in s||(s={}))M.call(s,a)&&N(e,a,s[a]);if(v)for(var a of v(s))L.call(s,a)&&N(e,a,s[a]);return e};import{r as d,j as t,L as y,d as A}from"./main-149.js";import{q,_ as m,f as R,p as $,m as T,n as V,o as I}from"./bi.738.82.js";import{g as F,a as E,s as S}from"./bi.483.825.js";import{T as z}from"./bi.653.689.js";function O({sendGridConf:e,setSendGridConf:s,loading:a,setLoading:l}){var u,p;const[n,o]=d.useState({show:!1,action:()=>{}}),j=c=>{const h=r({},e);c.target.checked?(F(e,s,l),h.actions.lists=!0):(o({show:!1}),delete h.actions.lists),o({show:"lists"}),s(r({},h))},b=()=>{o({show:!1})},x=c=>{const h=r({},e);h.selectedLists=c,s(r({},h))};return t.jsxs("div",{className:"pos-rel d-flx w-8",children:[t.jsx(q,{checked:((u=e==null?void 0:e.selectedLists)==null?void 0:u.length)||!1,onChange:c=>j(c),className:"wdt-200 mt-4 mr-2",value:"add_to_lists",title:m("Select Lists","bit-integrations"),subTitle:m("Add contact to lists")}),t.jsxs(R,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:m("Ok","bit-integrations"),show:n.show==="lists",close:b,action:b,title:m("Lists","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:m("Select contact lists","bit-integrations")}),a.lists?t.jsx(y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):t.jsxs("div",{className:"flx flx-between mt-2",children:[t.jsx($,{options:(p=e==null?void 0:e.lists)==null?void 0:p.map(c=>({label:c.name,value:c.id})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedLists,onChange:c=>x(c)}),t.jsx("button",{onClick:()=>F(e,s,l),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${m("Refresh Lists","bit-integrations")}'`},type:"button",children:"↻"})]})]})]})}const _=(e,s,a)=>{const l=r({},s);l.field_map.splice(e,0,{}),a(r({},l))},P=(e,s,a)=>{const l=r({},s);l.field_map.length>1&&l.field_map.splice(e,1),a(r({},l))},w=(e,s,a,l)=>{const n=r({},a);n.field_map[s][e.target.name]=e.target.value,e.target.value==="custom"&&(n.field_map[s].customValue=""),l(r({},n))};function B({i:e,formFields:s,field:a,sendGridConf:l,setSendGridConf:n}){var p,c,h;const o=(l==null?void 0:l.staticFields.filter(i=>i.required===!0))||[],b=[...((p=l==null?void 0:l.staticFields)==null?void 0:p.filter(i=>i.required===!1))||[],...l.customFields];if(((c=l==null?void 0:l.field_map)==null?void 0:c.length)===1&&a.sendGridFormField===""){const i=r({},l),g=E(i);i.field_map=g,n(i)}const x=A(T),{isPro:u}=x;return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:i=>w(i,e,l,n),children:[t.jsx("option",{value:"",children:m("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Form Fields",children:s==null?void 0:s.map(i=>t.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`))}),t.jsx("option",{value:"custom",children:m("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${u?"":"(PRO)"}`,children:u&&((h=V)==null?void 0:h.map(i=>t.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`)))})]}),a.formField==="custom"&&t.jsx(z,{onChange:i=>I(i,e,l,n),label:m("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:a.customValue,placeholder:m("Custom Value","bit-integrations"),formFields:s}),t.jsxs("select",{className:"btcd-paper-inp",disabled:e<o.length,name:"sendGridFormField",value:e<o?o[e].label||"":a.sendGridFormField||"",onChange:i=>w(i,e,l,n),children:[t.jsx("option",{value:"",children:m("Select Field","bit-integrations")}),e<o.length?t.jsx("option",{value:o[e].key,children:o[e].label},o[e].key):b.map(({key:i,label:g})=>t.jsx("option",{value:i,children:g},i))]})]}),e>=o.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>_(e,l,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>P(e,l,n),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function U({formFields:e,sendGridConf:s,setSendGridConf:a,loading:l,setLoading:n,setSnackbar:o}){const[j,b]=d.useState({name:"",auth_token:""}),[x,u]=d.useState(!1);return t.jsxs("div",{children:[t.jsx("div",{className:"mt-5",children:t.jsxs("b",{className:"wdt-100",children:[m("Field Map","bit-integrations"),t.jsx("button",{onClick:()=>S(s,a,b,u,l,n,"refreshLists"),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${m("Refresh custom fields","bit-integrations")}'`},type:"button",disabled:l.customFields,children:"↻"})]})}),l.customFields&&t.jsx(y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),t.jsx("br",{}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:m("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:m("SendGrid Fields","bit-integrations")})})]}),s==null?void 0:s.field_map.map((p,c)=>t.jsx(B,{i:c,field:p,sendGridConf:s,formFields:e,setSendGridConf:a,setSnackbar:o},`rp-m-${c+9}`)),t.jsxs("div",{children:[t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>_(s.field_map.length,s,a),className:"icn-btn sh-sm",type:"button",children:"+"})}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:m("Actions","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsx(O,{sendGridConf:s,setSendGridConf:a,loading:l,setLoading:n})]})]})}export{U as S};
