var G=Object.defineProperty;var M=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var P=(i,n,s)=>n in i?G(i,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[n]=s,$=(i,n)=>{for(var s in n||(n={}))B.call(n,s)&&P(i,s,n[s]);if(M)for(var s of M(n))H.call(n,s)&&P(i,s,n[s]);return i};import{d as J,j as t,r as K,L as T}from"./main-149.js";import{m as Q,v as z,_ as l,n as U,o as W,r as O,w as X,z as Y,A as E,b as Z,P as I}from"./bi.738.82.js";import{b as L,d as C,r as S,e as f,f as tt}from"./bi.7.852.js";import{T as et}from"./bi.653.689.js";import"./bi.96.690.js";function it({i,formFields:n,uploadFields:s,field:e,freshSalesConf:a,setFreshSalesConf:c,tab:m}){var j,u,r,w,h,y,D,F,_;const p=m===0?a.moduleData.module:(u=(j=a.relatedlists)==null?void 0:j[m-1])==null?void 0:u.module,o=((h=(w=(r=a.default.modules)==null?void 0:r[p])==null?void 0:w.fields)==null?void 0:h.filter(d=>d.required===!0))||[],g=((F=(D=(y=a.default.modules)==null?void 0:y[p])==null?void 0:D.fields)==null?void 0:F.filter(d=>d.required===!1))||[],N=J(Q),{isPro:v}=N;return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:e.formField||"",onChange:d=>z(d,i,a,c,s,m),children:[t.jsx("option",{value:"",children:l("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Form Fields",children:n.map(d=>t.jsx("option",{value:d.name,children:d.label},`ff-zhcrm-${d.name}`))}),t.jsx("option",{value:"custom",children:l("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${v?"":"(PRO)"}`,children:v&&((_=U)==null?void 0:_.map(d=>t.jsx("option",{value:d.name,children:d.label},`ff-zhcrm-${d.name}`)))})]}),e.formField==="custom"&&t.jsx(et,{onChange:d=>W(d,i,a,c),label:l("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:e.customValue,placeholder:l("Custom Value","bit-integrations"),formFields:n}),t.jsxs("select",{className:"btcd-paper-inp",disabled:i<o.length,name:"freshSalesFormField",value:i<o?o[i].label||"":e.freshSalesFormField||"",onChange:d=>z(d,i,a,c,s,m),children:[t.jsx("option",{value:"",children:l("Select Field","bit-integrations")}),i<o.length?t.jsx("option",{value:o[i].key,children:o[i].label},o[i].key):g.map(({key:d,label:R})=>t.jsx("option",{value:d,children:R},d))]})]}),t.jsx("div",{className:"flx integ-fld-wrp",children:i>=o.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>O(i,a,c,s,m),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>X(i,a,c,s,m),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})})]})})}function lt({tab:i,settab:n,formFields:s,freshSalesConf:e,setFreshSalesConf:a,handleInput:c,isLoading:m,setIsLoading:p,setSnackbar:o}){var g,N,v,j,u,r,w,h,y,D,F,_,d,R,V,A,k,q;return K.useEffect(()=>{L(0,n)},[]),t.jsxs(t.Fragment,{children:[m&&t.jsx(T,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.moduleData.module!==""&&((g=e.default.modules[e.moduleData.module])==null?void 0:g.required)&&!["Account","Product","Deal"].includes(e.moduleData.module)&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:l("Account View:","bit-integrations")}),t.jsxs("select",{onChange:c,name:"account_view_id",value:((N=e.moduleData)==null?void 0:N.account_view_id)||"",className:"btcd-paper-inp w-5",children:[t.jsx("option",{value:"",children:l("Select Account View","bit-integrations")}),((v=e==null?void 0:e.default)==null?void 0:v.accountViews)&&e.default.accountViews.map((b,x)=>t.jsx("option",{value:b.value,children:b.label},`pipedrive-m-${x+20}`))]}),t.jsx("button",{onClick:()=>C(e,a,p,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh views","bit-integrations")}'`},type:"button",disabled:m,children:"↻"}),t.jsx("br",{}),t.jsx("br",{})]}),e.moduleData.module!==""&&((j=e.default.modules[e.moduleData.module])==null?void 0:j.required)&&!["Account","Product","Deal"].includes(e.moduleData.module)&&t.jsxs(t.Fragment,{children:[t.jsx("b",{className:"wdt-200 d-in-b",children:l("Account:","bit-integrations")}),t.jsxs("select",{onChange:c,name:"account_id",value:((u=e.moduleData)==null?void 0:u.account_id)||"",className:"btcd-paper-inp w-5",children:[t.jsx("option",{value:"",children:l("Select Account","bit-integrations")}),((r=e==null?void 0:e.default)==null?void 0:r.accounts)&&e.default.accounts.map((b,x)=>t.jsx("option",{value:b.value,children:b.label},`pipedrive-m-${x+20}`))]}),t.jsx("button",{onClick:()=>S(e,a,p,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh accounts","bit-integrations")}'`},type:"button",disabled:m,children:"↻"}),t.jsx("br",{}),t.jsx("br",{})]}),e.moduleData.module!==""&&((w=e.default.modules[e.moduleData.module])==null?void 0:w.required)&&!["Account","Product","Contact"].includes(e.moduleData.module)&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:l("Contact View:","bit-integrations")}),t.jsxs("select",{onChange:c,name:"contact_view_id",value:((h=e.moduleData)==null?void 0:h.contact_view_id)||"",className:"btcd-paper-inp w-5",children:[t.jsx("option",{value:"",children:l("Select Contact View","bit-integrations")}),((y=e==null?void 0:e.default)==null?void 0:y.contactViews)&&e.default.contactViews.map((b,x)=>t.jsx("option",{value:b.value,children:b.label},`pipedrive-m-${x+20}`))]}),t.jsx("button",{onClick:()=>f(e,a,p,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh views","bit-integrations")}'`},type:"button",disabled:m,children:"↻"})]}),e.moduleData.module!==""&&((D=e.default.modules[e.moduleData.module])==null?void 0:D.required)&&!["Account","Product","Contact"].includes(e.moduleData.module)&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:l("Contact:","bit-integrations")}),t.jsxs("select",{onChange:c,name:"contact_id",value:((F=e.moduleData)==null?void 0:F.contact_id)||"",className:"btcd-paper-inp w-5",children:[t.jsx("option",{value:"",children:l("Select Contact","bit-integrations")}),((_=e==null?void 0:e.default)==null?void 0:_.contacts)&&e.default.contacts.map((b,x)=>t.jsx("option",{value:b.value,children:b.label},`pipedrive-m-${x+20}`))]}),t.jsx("button",{onClick:()=>tt(e,a,p,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh contacts","bit-integrations")}'`},type:"button",disabled:m,children:"↻"}),t.jsx("br",{}),t.jsx("br",{})]}),e.moduleData.module&&((V=(R=(d=e.default)==null?void 0:d.modules)==null?void 0:R[e.moduleData.module])==null?void 0:V.fields)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:l("Field Map","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:l("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:l("FreshSales Fields","bit-integrations")})})]}),e.field_map.map((b,x)=>t.jsx(it,{i:x,field:b,freshSalesConf:e,formFields:s,setFreshSalesConf:a,tab:i,setSnackbar:o},`pipedrive-m-${x+9}`)),t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>O(e.field_map.length,e,a,!1,i),className:"icn-btn sh-sm",type:"button",children:"+"})}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:l("Actions","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"})]}),e.moduleData.module&&!((q=(k=(A=e.default)==null?void 0:A.modules)==null?void 0:k[e.moduleData.module])!=null&&q.fields)&&t.jsx(T,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}})]})}function ot({tab:i,settab:n,formID:s,formFields:e,handleInput:a,freshSalesConf:c,setFreshSalesConf:m,isLoading:p,setIsLoading:o,setSnackbar:g}){var j;const N=()=>{if(c.relatedlists.length<2){const u=$({},c);u.relatedlists.push({actions:{},field_map:[{formField:"",freshSalesFormField:""}],moduleData:{},module:""}),m($({},u))}},v=u=>{const r=$({},c);r.relatedlists.splice(u,1),r.relatedlists.length||n(0),m($({},r))};return t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:l("Module:","bit-integrations")}),t.jsxs("select",{onChange:a,name:"module",value:c.moduleData.module,className:"btcd-paper-inp w-5",disabled:i,children:[t.jsx("option",{value:"",children:l("Select Module","bit-integrations")}),Object.keys(c.default.modules).map(u=>t.jsx("option",{value:u,children:u},u))]}),t.jsx("br",{}),t.jsx("div",{children:t.jsxs(Y,{children:[t.jsxs("div",{className:"flx mt-2",children:[t.jsx(E,{children:t.jsx("button",{className:`btcd-s-tab-link ${i===0&&"s-t-l-active"}`,type:"button",children:l("New Record","bit-integrations")})}),(c==null?void 0:c.relatedlists)&&c.relatedlists.map((u,r)=>t.jsxs(t.Fragment,{children:[t.jsx(E,{children:t.jsxs("button",{className:`btcd-s-tab-link ${i===r+1&&"s-t-l-active"}`,type:"button",children:[l("Related List #","bit-integrations"),r+1]})},`t-${r*3}`),t.jsx("button",{onClick:()=>v(r),className:"icn-btn","aria-label":"delete-relatedlist",type:"button",children:t.jsx(Z,{size:"14"})})]})),c.relatedlists.length<2&&((j=c.default.modules[c.moduleData.module])==null?void 0:j.relatedlists)&&t.jsx("button",{onClick:N,className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Add More Related List","bit-integrations")}'`},type:"button",children:"+"})]}),t.jsx("div",{className:"btcd-hr"}),t.jsx(I,{children:t.jsx(lt,{tab:i,settab:n,formFields:e,freshSalesConf:c,setFreshSalesConf:m,handleInput:a,isLoading:p,setIsLoading:o,setSnackbar:g})})]})}),t.jsx("br",{})]})}export{ot as F};
