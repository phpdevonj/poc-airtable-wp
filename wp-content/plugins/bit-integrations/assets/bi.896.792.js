var w=Object.defineProperty;var _=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var v=(s,c,n)=>c in s?w(s,c,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[c]=n,r=(s,c)=>{for(var n in c||(c={}))y.call(c,n)&&v(s,n,c[n]);if(_)for(var n of _(c))m.call(c,n)&&v(s,n,c[n]);return s};import{d as A,j as e,L as I}from"./main-149.js";import{m as S,_ as u,n as V,o as L,p as M}from"./bi.738.82.js";import{g as $,a as f}from"./bi.972.793.js";import{T as q}from"./bi.653.689.js";const N=(s,c,n,t,d)=>{const a=r({},c);d?t?a.relatedlists[d-1].upload_field_map.splice(s,0,{}):a.relatedlists[d-1].field_map.splice(s,0,{}):t?a.upload_field_map.splice(s,0,{}):a.field_map.splice(s,0,{}),n(r({},a))},R=(s,c,n,t,d)=>{const a=r({},c);d?t?a.relatedlists[d-1].upload_field_map.length>1&&a.relatedlists[d-1].upload_field_map.splice(s,1):a.relatedlists[d-1].field_map.length>1&&a.relatedlists[d-1].field_map.splice(s,1):t?a.upload_field_map.length>1&&a.upload_field_map.splice(s,1):a.field_map.length>1&&a.field_map.splice(s,1),n(r({},a))},F=(s,c,n,t,d,a)=>{const o=r({},n);a?d?o.relatedlists[a-1].upload_field_map[c][s.target.name]=s.target.value:o.relatedlists[a-1].field_map[c][s.target.name]=s.target.value:d?o.upload_field_map[c][s.target.name]=s.target.value:o.field_map[c][s.target.name]=s.target.value,s.target.value==="custom"&&(a?o.relatedlists[a-1].field_map[c].customValue="":o.field_map[c].customValue=""),t(r({},o))};function T({i:s,field:c,formFields:n,kirimEmailConf:t,setKirimEmailConf:d}){var x,g,b,p;if(((x=t==null?void 0:t.field_map)==null?void 0:x.length)===1&&c.kirimEmailFormField===""){const l=r({},t),h=$(l);l.field_map=h,d(l)}const a=((g=t==null?void 0:t.subscriberFields)==null?void 0:g.filter(l=>l.required===!0))||[],o=((b=t==null?void 0:t.subscriberFields)==null?void 0:b.filter(l=>l.required===!1))||[],i=A(S),{isPro:j}=i;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:c.formField||"",onChange:l=>F(l,s,t,d),children:[e.jsx("option",{value:"",children:u("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:n==null?void 0:n.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))}),e.jsx("option",{value:"custom",children:u("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${j?"":"(PRO)"}`,children:j&&((p=V)==null?void 0:p.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),c.formField==="custom"&&e.jsx(q,{onChange:l=>L(l,s,t,d),label:u("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:c.customValue,placeholder:u("Custom Value","bit-integrations"),formFields:n}),e.jsxs("select",{className:"btcd-paper-inp",disabled:s<a.length,name:"kirimEmailFormField",value:s<a.length?a[s].key||"":c.kirimEmailFormField||"",onChange:l=>F(l,s,t,d),children:[e.jsx("option",{value:"",children:u("Select Field","bit-integrations")}),s<a.length?e.jsx("option",{value:a[s].key,children:a[s].label},a[s].key):o.map(({key:l,label:h})=>e.jsx("option",{value:l,children:h},l))]})]}),s>=a.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(s,t,d),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>R(s,t,d),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function z({formID:s,formFields:c,handleInput:n,kirimEmailConf:t,setKirimEmailConf:d,isLoading:a,setIsLoading:o,setSnackbar:i,a:j}){var b;const x=p=>{const l=r({},t),{name:h}=p.target;p.target.value!==""?l[h]=p.target.value:delete l[h],l[p.target.name]=p.target.value,d(r({},l))},g=(p,l)=>{const h=r({},t);l==="listId"&&(p!==""?h[l]=p:delete h[l]),d(r({},h))};return e.jsxs(e.Fragment,{children:[a&&e.jsx(I,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:u("Actions:","bit-integrations")}),e.jsxs("select",{onChange:x,name:"mainAction",value:t==null?void 0:t.mainAction,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:u("Select Actions","bit-integrations")}),(t==null?void 0:t.allActions)&&t.allActions.map(({key:p,label:l})=>e.jsx("option",{value:p,children:l},p))]}),e.jsx("br",{}),e.jsx("br",{}),t.mainAction==="1"&&e.jsxs("div",{className:"flx mt-4",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:u("Select List: ","bit-integrations")}),e.jsx(M,{className:"w-5",defaultValue:t==null?void 0:t.listId,options:((b=t==null?void 0:t.default)==null?void 0:b.allLists)&&(t==null?void 0:t.default.allLists.map(p=>({label:p.name,value:p.id}))),onChange:p=>g(p,"listId"),singleSelect:!0}),e.jsx("button",{onClick:()=>f(t,d,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${u("Fetch All lists","bit-integrations")}'`},type:"button",disabled:a,children:"â†»"})]}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:u("Map Fields","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:u("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:u("Kirim Email Fields","bit-integrations")})})]}),t.field_map.map((p,l)=>e.jsx(T,{i:l,field:p,formFields:c,kirimEmailConf:t,setKirimEmailConf:d},`keap-m-${l+9}`)),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>N(t.field_map.length,t,d),className:"icn-btn sh-sm",type:"button",children:"+"})})]})]})}export{z as K};
