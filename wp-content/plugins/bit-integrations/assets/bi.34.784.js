var h=Object.defineProperty;var v=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var y=(s,i,e)=>i in s?h(s,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[i]=e,d=(s,i)=>{for(var e in i||(i={}))_.call(i,e)&&y(s,e,i[e]);if(v)for(var e of v(i))k.call(i,e)&&y(s,e,i[e]);return s};import{d as I,j as l,k as M,L as T}from"./main-149.js";import{_ as n,m as S,n as q,o as $}from"./bi.738.82.js";import{T as V}from"./bi.21.729.js";import{T as R}from"./bi.653.689.js";const J=(s,i,e)=>{const a=d({},i),{name:r}=s.target;s.target.value!==""?a[r]=s.target.value:delete a[r],e(d({},a))},K=(s,i,e,a,r,o)=>{if(!s.numberID||!s.businessAccountID||!s.token){e({clientId:s.clientId?"":n("Number Id, Bussness Id and Access Token can't be empty or invalid","bit-integrations")});return}e({}),r(!0),a(!0),o({show:!0,msg:n("Authorized Successfully","bit-integrations")}),r(!1)},L=s=>{const i=s==null?void 0:s.whatsAppFields.filter(e=>e.required===!0);return i.length>0?i.map(e=>({formField:"",whatsAppFormField:e.key})):[{formField:"",whatsAppFormField:""}]},Q=s=>!((s.field_map?s.field_map.filter(e=>e.formField&&e.whatsAppFormField):[]).length>0),P=(s,i,e)=>{const a=d({},i);a.field_map.splice(s,0,{}),e(d({},a))},z=(s,i,e)=>{const a=d({},i);a.field_map.length>1&&a.field_map.splice(s,1),e(d({},a))},N=(s,i,e,a)=>{const r=d({},e);r.field_map[i][s.target.name]=s.target.value,s.target.value==="custom"&&(r.field_map[i].customValue=""),a(d({},r))};function B({key:s,i,field:e,whatsAppConf:a,formFields:r,setWhatsAppConf:o,setSnackbar:x}){var j,F;if(((j=a==null?void 0:a.field_map)==null?void 0:j.length)===1&&e.whatsAppFormField===""){const t=d({},a),g=L(t);t.field_map=g,o(t)}const c=(a==null?void 0:a.whatsAppFields.filter(t=>t.required===!0))||[],b=(a==null?void 0:a.whatsAppFields.filter(t=>t.required===!1))||[],u=I(S),{isPro:m}=u;return l.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:l.jsxs("div",{className:"pos-rel flx",children:[l.jsxs("div",{className:"flx integ-fld-wrp",children:[l.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:e.formField||"",onChange:t=>N(t,i,a,o),children:[l.jsx("option",{value:"",children:n("Select Field","bit-integrations")}),l.jsx("optgroup",{label:"Form Fields",children:r==null?void 0:r.map(t=>l.jsx("option",{value:t.name,children:t.label},`ff-rm-${t.name}`))}),l.jsx("option",{value:"custom",children:n("Custom...","bit-integrations")}),l.jsx("optgroup",{label:`General Smart Codes ${m?"":"(PRO)"}`,children:m&&((F=q)==null?void 0:F.map(t=>l.jsx("option",{value:t.name,children:t.label},`ff-rm-${t.name}`)))})]}),e.formField==="custom"&&l.jsx(R,{onChange:t=>$(t,i,a,o),label:n("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:e.customValue,placeholder:n("Custom Value","bit-integrations"),formFields:r}),l.jsxs("select",{className:"btcd-paper-inp",disabled:i<c.length,name:"whatsAppFormField",value:i<c.length?c[i].key||"":e.whatsAppFormField||"",onChange:t=>N(t,i,a,o),children:[l.jsx("option",{value:"",children:n("Select Field","bit-integrations")}),i<c.length?l.jsx("option",{value:c[i].key,children:c[i].label},c[i].key):b.map(({key:t,label:g})=>l.jsx("option",{value:t,children:g},t))]})]}),i>=c.length&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>P(i,a,o),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),l.jsx("button",{onClick:()=>z(i,a,o),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:l.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function U({formFields:s,handleInput:i,whatsAppConf:e,setWhatsAppConf:a,isLoading:r,setIsLoading:o,setSnackbar:x}){const{id:c}=M(),b=u=>{const m=d({},e);m.body=u,a(m)};return l.jsxs(l.Fragment,{children:[l.jsx("br",{}),l.jsxs("div",{className:"flx",children:[l.jsx("b",{className:"wdt-200 d-in-b",children:n("Message Type: ","bit-integrations")}),l.jsxs("select",{onChange:i,name:"messageTypeId",value:e.messageTypeId,className:"btcd-paper-inp w-5",children:[l.jsx("option",{value:"",children:n("Select Message Type","bit-integrations")}),e==null?void 0:e.messageType.map(({id:u,label:m})=>l.jsx("option",{value:u,children:m},u))]})]}),r&&l.jsx(T,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),l.jsx("br",{}),l.jsx("div",{className:"mt-5",children:l.jsx("b",{className:"wdt-100",children:n("Field Map","bit-integrations")})}),l.jsx("div",{className:"btcd-hr mt-1"}),l.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:n("Form Fields","bit-integrations")})}),l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:n("WhatsApp Fields","bit-integrations")})})]}),l.jsx("br",{}),e==null?void 0:e.field_map.map((u,m)=>l.jsx(B,{i:m,field:u,whatsAppConf:e,formFields:s,setWhatsAppConf:a,setSnackbar:x},`rp-m-${m+9}`)),(e==null?void 0:e.messageTypeId)==="1"&&l.jsxs("div",{children:[l.jsx("b",{className:"wdt-200 d-in-b mr-16 mb-4 mt-4",children:n("Messages: ","bit-integrations")}),l.jsx(V,{formFields:s,id:`telegram-message-${c}`,value:e.body,onChangeHandler:b,width:"100%",toolbarMnu:"bold italic underline strikethrough | link | code | addFormField | toggleCode"})]}),l.jsx("br",{}),l.jsx("br",{}),(e==null?void 0:e.messageTypeId)==="2"&&l.jsxs("div",{className:"flx mt-4",children:[l.jsx("b",{className:"wdt-200 d-in-b",children:n("Template Name: ","bit-integrations")}),l.jsx("textarea",{className:"w-5",onChange:i,name:"templateName",rows:"5",value:e.templateName})]})]})}export{U as W,K as a,Q as c,J as h};
