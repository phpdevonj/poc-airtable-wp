var q=Object.defineProperty;var F=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var w=(i,a,t)=>a in i?q(i,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[a]=t,x=(i,a)=>{for(var t in a||(a={}))z.call(a,t)&&w(i,t,a[t]);if(F)for(var t of F(a))E.call(a,t)&&w(i,t,a[t]);return i};import{d as I,j as e,r as M}from"./main-149.js";import{m as P,_ as m,n as W,T as A,e as L,q as N,U as v}from"./bi.738.82.js";import{T as B}from"./bi.653.689.js";const u=(i,a,t,n)=>{const c=x({},t);c[i].splice(a,0,{}),n(x({},c))},D=(i,a,t,n)=>{const c=x({},t);c[i].length>1&&c[i].splice(a,1),n(x({},c))},y=(i,a,t,n,c)=>{const d=x({},n);d[i][t][a.target.name]=a.target.value,c(d)},H=i=>{var t;return!((i?(t=i==null?void 0:i.user_map)==null?void 0:t.filter(n=>!n.formField&&n.required):[]).length>0)};function S({i,type:a,formFields:t,field:n,userConf:c,setUserConf:d,customFields:p,setSnackbar:j}){var _;const g={user:{propName:"user_map",fldName:"userField"},meta:{propName:"meta_map",fldName:"metaField"}},{propName:h,fldName:l}=g[a],r=!!p.find(s=>s.key===n[l]&&s.required),b=I(P),{isPro:o}=b,$=(s,T,R,V)=>{const k=x({},R);k[h][T].customValue=s,V(x({},k))};return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:n.formField||"",onChange:s=>y(h,s,i,c,d),children:[e.jsx("option",{value:"",children:m("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:t==null?void 0:t.map(s=>s.type!=="file"&&e.jsx("option",{value:s.name,children:s.label},`ff-zhcrm-${s==null?void 0:s.name}`))}),e.jsx("option",{value:"custom",children:m("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${o?"":"(PRO)"}`,children:o&&((_=W)==null?void 0:_.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-zhcrm-${s.name}`)))})]}),n.formField==="custom"&&e.jsx(B,{onChange:s=>$(s,i,c,d),label:m("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:n.customValue||"",placeholder:m("Custom Value","bit-integrations"),formFields:t}),a!=="meta"?e.jsxs("select",{className:"btcd-paper-inp",name:l,value:n[l]||"",onChange:s=>y(h,s,i,c,d),disabled:r,children:[e.jsx("option",{children:m("Select Field","bit-integrations")}),p==null?void 0:p.map(s=>e.jsx("option",{value:s.key,children:`${s.name}`},`${s.key}-1`))]}):e.jsx("input",{className:"btcd-paper-inp",name:l,value:n[l]||"",onChange:s=>y(h,s,i,c,d),type:"text"})]}),!r&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>u(h,i,c,d),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>D(h,i,c,d),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(A,{})})]})]})}function J({formFields:i,userConf:a,setUserConf:t,roles:n,userFields:c}){var h;const[d,p]=M.useState({show:!1}),j=l=>{const r=x({},a),{name:b,value:o}=l.target;r[b]=o,t(r)},g=l=>{const r=x({},a),{name:b,checked:o}=l.target;o?r[b]=!0:delete r[b],t(r)};return e.jsxs(e.Fragment,{children:[e.jsx(L,{snack:d,setSnackbar:p}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:m("Field Mappping","bit-integrations")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:m("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:m("User Fields","bit-integrations")})})]})]}),(h=a==null?void 0:a.user_map)==null?void 0:h.map((l,r)=>e.jsx(S,{i:r,type:"user",field:l,formFields:i,userConf:a,setUserConf:t,customFields:c,setSnackbar:p},`analytics-m-${r+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>{var l;return u("user_map",(l=a==null?void 0:a.user_map)==null?void 0:l.length,a,t)},className:"icn-btn sh-sm",type:"button",children:"+"})})]}),(a==null?void 0:a.action_type)!=="updated_user"&&e.jsxs("div",{className:"flx",children:[e.jsxs("div",{className:"w-5 mt-5 flx",children:[e.jsx(N,{name:"user_notify",onChange:g,title:m("User Email Notification","bit-integrations"),checked:!!(a!=null&&a.user_notify),value:!1}),e.jsx(v,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["When this option is enabled, a welcome email will be sent from WordPress after registration.",e.jsx("br",{})]})})]}),e.jsxs("div",{className:"w-5 mt-5 flx",children:[e.jsx(N,{name:"admin_notify",onChange:g,title:m("Admin Email Notification","bit-integrations"),checked:!!(a!=null&&a.admin_notify),value:!1}),e.jsx(v,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["If this option is enabled, e-mail will be sent from WordPress to admin.",e.jsx("br",{})]})})]})]}),e.jsx("br",{}),e.jsx("br",{}),(a==null?void 0:a.action_type)!=="updated_user"&&e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m fw-500",children:m("WP User Role","bit-integrations")}),e.jsxs("select",{name:"user_role",onChange:j,value:a==null?void 0:a.user_role,className:"btcd-paper-inp mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select User Role"}),n.map((l,r)=>e.jsx("option",{value:l==null?void 0:l.key,children:l==null?void 0:l.name},`acf-${r*2}`))]})]}),e.jsxs("div",{className:"w-5 ml-2 mt-2 flx",children:[e.jsx(N,{name:"auto_login",onChange:g,title:m("Auto Login After Registration","bit-integrations"),checked:!!(a!=null&&a.auto_login),value:!1}),e.jsx(v,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["if checked Auto Login, the user login automatically after registration.",e.jsx("br",{})]})})]})]})]})]})}function Q({formFields:i,userConf:a,setUserConf:t}){var d;const[n,c]=M.useState([]);return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:m("User Meta Field Mappping","bit-integrations")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:m("Meta Value","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:m("Meta Key","bit-integrations")})})]})]}),(d=a==null?void 0:a.meta_map)==null?void 0:d.map((p,j)=>e.jsx(S,{i:j,type:"meta",field:p,formFields:i,userConf:a,setUserConf:t,customFields:n,fieldType:"meta"},`analytics-m-${j+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>{var p;return u("meta_map",(p=a==null?void 0:a.meta_map)==null?void 0:p.length,a,t)},className:"icn-btn sh-sm",type:"button",children:"+"})})]})}const X=[{key:"user_email",name:"Email",required:!0},{key:"user_login",name:"Username"},{key:"nickname",name:"Nickname"},{key:"display_name",name:"Display Name"},{key:"first_name",name:"First Name"},{key:"last_name",name:"Last Name"},{key:"user_pass",name:"Password"},{key:"user_url",name:"Website"},{key:"description",name:"Biographical Info"}];export{Q as C,J as U,H as c,X as u};
