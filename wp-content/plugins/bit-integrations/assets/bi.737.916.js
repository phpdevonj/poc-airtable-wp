var V=Object.defineProperty;var I=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var T=(l,d,t)=>d in l?V(l,d,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[d]=t,p=(l,d)=>{for(var t in d||(d={}))L.call(d,t)&&T(l,t,d[t]);if(I)for(var t of I(d))S.call(d,t)&&T(l,t,d[t]);return l};import{r as q,j as e,L as R,d as A}from"./main-149.js";import{q as _,l as r,f as O,p as E,m as G,n as H,H as P,T as U,r as B}from"./bi.738.82.js";import{r as k,a as D,b as $}from"./bi.839.915.js";function Z({zagoMailConf:l,setZagoMailConf:d,isLoading:t,setIsLoading:i}){var j,v;const[u,m]=q.useState({show:!1,action:()=>{}}),h=(c,n)=>{var F;const a=p({},l);n==="tag"&&((F=c.target)!=null&&F.checked?(k(l,d,i),a.actions.tags=!0):(m({show:!1}),delete a.actions.tags),m({show:"tag"})),n==="update"&&(c.target.checked?a.actions.update=!0:delete a.actions.update),d(p({},a))},N=()=>{m({show:!1})},x=c=>{const n=p({},l);n.selectedTags=c,d(p({},n))};return e.jsxs("div",{className:"pos-rel d-flx w-8",children:[e.jsx(_,{checked:(l==null?void 0:l.selectedTags.length)||!1,onChange:c=>h(c,"tag"),className:"wdt-200 mt-4 mr-2",value:"tags",title:r("Add Tags","bit - integrations"),subTitle:r("Selects tags for contact")}),e.jsxs(O,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:r("Ok","bit-integrations"),show:u.show==="tag",close:N,action:N,title:r("Tags","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("div",{className:"mt-2",children:r("Select tags","bit-integrations")}),t.tags?e.jsx(R,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(E,{options:(j=l==null?void 0:l.tags)==null?void 0:j.map(c=>({label:c.tagName,value:c.tagId})),className:"msl-wrp-options",defaultValue:l==null?void 0:l.selectedTags,onChange:c=>x(c)}),e.jsx("button",{onClick:()=>k(l,d,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${r("Refresh Groups","bit-integrations")}'`},type:"button",children:"↻"})]})]}),e.jsx(_,{checked:((v=l.actions)==null?void 0:v.update)||!1,onChange:c=>h(c,"update"),className:"wdt-200 mt-4 mr-2",value:"user_share",title:r("Update ZagoMail","bit-integrations"),subTitle:r("Update Responses with ZagoMail existing email?","bit-integrations")})]})}function J({i:l,formFields:d,field:t,zagoMailConf:i,setZagoMailConf:u}){var a,F,o,y;const m=t.required,h=((a=i==null?void 0:i.default)==null?void 0:a.fields)&&Object.values((F=i==null?void 0:i.default)==null?void 0:F.fields).filter(s=>!s.required),N=A(G),{isPro:x}=N,j=s=>{const b=p({},i);b.field_map.splice(s,0,{}),u(b)},v=s=>{const b=p({},i);b.field_map.length>1&&b.field_map.splice(s,1),u(b)},c=(s,b)=>{const w=p({},i);w.field_map[b][s.target.name]=s.target.value,s.target.value==="custom"&&(w.field_map[b].customValue=""),u(w)},n=(s,b)=>{const w=p({},i);w.field_map[b].customValue=s.target.value,u(w)};return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:s=>c(s,l),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"List Fields",children:d==null?void 0:d.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`))}),e.jsx("option",{value:"custom",children:r("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((o=H)==null?void 0:o.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),t.formField==="custom"&&e.jsx(P,{onChange:s=>n(s,l),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:r("Custom Value","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp",name:"zagoMailField",value:t.zagoMailField,onChange:s=>c(s,l),disabled:m,children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),m?((y=i==null?void 0:i.default)==null?void 0:y.fields)&&Object.values(i.default.fields).map(s=>e.jsx("option",{value:s.fieldId,children:s.fieldName},`${s.fieldId}-1`)):h&&h.map(s=>e.jsx("option",{value:s.fieldId,children:s.fieldName},`${s.fieldId}-1`))]})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>j(l),className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),e.jsx("button",{onClick:()=>v(l),className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:e.jsx(U,{})})]})]})}function Y({formID:l,formFields:d,zagoMailConf:t,setZagoMailConf:i,isLoading:u,setIsLoading:m,setSnackbar:h}){var x,j,v;const N=c=>{const n=c.target.value,a=p({},t);n?a.listId=n:delete a.listId,$(a,i,m,h),i(p({},a))};return(x=t==null?void 0:t.default)==null||x.zagoMailLists,e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("List:","bit-integrations")}),e.jsxs("select",{value:t==null?void 0:t.listId,name:"listId",id:"",className:"btcd-paper-inp w-5",onChange:N,children:[e.jsx("option",{value:"",children:r("Select List","bit-integrations")}),((j=t==null?void 0:t.default)==null?void 0:j.zagoMailLists)&&Object.keys(t.default.zagoMailLists).map(c=>e.jsx("option",{value:t.default.zagoMailLists[c].listId,children:t.default.zagoMailLists[c].listName},`${c+1}`))]}),e.jsx("button",{onClick:()=>D(t,i,m,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh ZagoMail list"'},type:"button",disabled:u,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),u&&e.jsx(R,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,translist:"scale(0.7)"}}),e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:r("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>$(t,i,m,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${r("Refresh ZagoMail Field","bit-integrations")}'`},type:"button",disabled:u,children:"↻"})]}),((t==null?void 0:t.listId)||((v=t==null?void 0:t.default)==null?void 0:v.fields))&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("List Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("ZagoMail Fields","bit-integrations")})})]}),t.field_map.map((c,n)=>e.jsx(J,{i:n,field:c,zagoMailConf:t,formFields:d,setZagoMailConf:i},`ZagoMail-m-${n+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>B(t.field_map.length,t,i),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:r("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(Z,{zagoMailConf:t,setZagoMailConf:i,isLoading:u,setIsLoading:m})]})]})}export{Y as Z};
