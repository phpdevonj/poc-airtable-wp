var I=Object.defineProperty;var w=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var y=(n,a,s)=>a in n?I(n,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[a]=s,m=(n,a)=>{for(var s in a||(a={}))$.call(a,s)&&y(n,s,a[s]);if(w)for(var s of w(a))R.call(a,s)&&y(n,s,a[s]);return n};import{j as e,d as k,L as M}from"./main-149.js";import{q,l as c,m as L,n as T,H as O,T as H,r as S}from"./bi.738.82.js";import{r as A,a as _}from"./bi.441.876.js";function P({lemlistConf:n,setLemlistConf:a}){var i;const s=(d,l)=>{const u=m({},n);l==="update"&&(d.target.checked?u.actions.update=!0:delete u.actions.update),a(m({},u))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(q,{checked:((i=n.actions)==null?void 0:i.update)||!1,onChange:d=>s(d,"update"),className:"wdt-200 mt-4 mr-2",value:"user_share",title:c("Update Lemlist","bit-integrations"),subTitle:c("Update Responses with Lemlist existing email?","bit-integrations")})})}function U({i:n,formFields:a,field:s,lemlistConf:i,setLemlistConf:d}){var g,v,N,F;const l=s.required,u=((g=i==null?void 0:i.default)==null?void 0:g.fields)&&Object.values((v=i==null?void 0:i.default)==null?void 0:v.fields).filter(t=>!t.required),j=k(L),{isPro:x}=j,p=t=>{const r=m({},i);r.field_map.splice(t,0,{}),d(r)},b=t=>{const r=m({},i);r.field_map.length>1&&r.field_map.splice(t,1),d(r)},o=(t,r)=>{const h=m({},i);h.field_map[r][t.target.name]=t.target.value,t.target.value==="custom"&&(h.field_map[r].customValue=""),d(h)},V=(t,r)=>{const h=m({},i);h.field_map[r].customValue=t.target.value,d(h)};return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:t=>o(t,n),children:[e.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"List Fields",children:a==null?void 0:a.map(t=>e.jsx("option",{value:t.name,children:t.label},`ff-rm-${t.name}`))}),e.jsx("option",{value:"custom",children:c("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((N=T)==null?void 0:N.map(t=>e.jsx("option",{value:t.name,children:t.label},`ff-rm-${t.name}`)))})]}),s.formField==="custom"&&e.jsx(O,{onChange:t=>V(t,n),label:c("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:s.customValue,placeholder:c("Custom Value","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp",name:"lemlistField",value:s.lemlistField||"",onChange:t=>o(t,n),disabled:l,children:[e.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),l?((F=i==null?void 0:i.default)==null?void 0:F.fields)&&Object.values(i.default.fields).map(t=>e.jsx("option",{value:t.fieldValue,children:t.fieldName},`${t.fieldValue}`)):u&&u.map(t=>e.jsx("option",{value:t.fieldValue,children:t.fieldName},`${t.fieldValue}`))]})]}),!l&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>p(n),className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),e.jsx("button",{onClick:()=>b(n),className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:e.jsx(H,{})})]})]})}function D({formFields:n,lemlistConf:a,setLemlistConf:s,isLoading:i,setIsLoading:d,setSnackbar:l}){var j,x;const u=p=>{const b=p.target.value,o=m({},a);b&&(o.campaignId=b),_(o,s,d,l)};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:c("Campaigns:","bit-integrations")}),e.jsxs("select",{value:a==null?void 0:a.campaignId,name:"campaignId",id:"",className:"btcd-paper-inp w-5",onChange:u,children:[e.jsx("option",{value:"",children:c("Select Campaigns","bit-integrations")}),((j=a==null?void 0:a.default)==null?void 0:j.lemlistCampaigns)&&Object.keys(a.default.lemlistCampaigns).map(p=>e.jsx("option",{value:a.default.lemlistCampaigns[p].campaignId,children:a.default.lemlistCampaigns[p].campaignName},`${p+1}`))]}),e.jsx("button",{onClick:()=>A(a,s,d,l),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Lemlist campaign"'},type:"button",disabled:i,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),i&&e.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,translist:"scale(0.7)"}}),e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:c("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>_(a,s,d,l),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${c("Refresh Lemlist Field","bit-integrations")}'`},type:"button",disabled:i,children:"↻"})]}),((a==null?void 0:a.campaignsId)||((x=a==null?void 0:a.default)==null?void 0:x.fields))&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("List Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("Lemlist Fields","bit-integrations")})})]}),a.field_map.map((p,b)=>e.jsx(U,{i:b,field:p,lemlistConf:a,formFields:n,setLemlistConf:s},`Lemlist-m-${b+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>S(a.field_map.length,a,s),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:c("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(P,{lemlistConf:a,setLemlistConf:s})]})]})}export{D as L};
