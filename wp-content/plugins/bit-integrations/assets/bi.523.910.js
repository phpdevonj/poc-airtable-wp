var Q=Object.defineProperty;var $=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var E=(e,d,s)=>d in e?Q(e,d,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[d]=s,x=(e,d)=>{for(var s in d||(d={}))B.call(d,s)&&E(e,s,d[s]);if($)for(var s of $(d))D.call(d,s)&&E(e,s,d[s]);return e};import{r as G,j as a,L as w,d as J}from"./main-149.js";import{q as N,_ as i,f as T,p as S,H as L,m as z,n as U,J as W}from"./bi.738.82.js";import{g as X,a as Y,b as Z,d as h,e as f,f as M,i as R}from"./bi.563.909.js";const K=(e,d,s)=>{const c=x({},d);c.field_map.splice(e,0,{}),s(x({},c))},C=(e,d,s)=>{const c=x({},d);c.field_map.length>1&&c.field_map.splice(e,1),s(x({},c))},H=(e,d,s,c)=>{const m=x({},s);m.field_map[d][e.target.name]=e.target.value,e.target.value==="custom"&&(m.field_map[d].customValue=""),e.target.value==="customFieldKey"&&(m.field_map[d].customFieldKey=""),c(x({},m))},ee=(e,d,s,c,m)=>{const o=x({},s);o.field_map[d][m]=e.target.value,c(x({},o))};function ae({nutshellCRMConf:e,setNutshellCRMConf:d,loading:s,setLoading:c}){var v,r,y,p,F,A,k;const[m,o]=G.useState({show:!1,action:()=>{}}),b=(t,j)=>{var u,P,_,O,I,V,q;const l=x({},e);j==="priority"?(u=t.target)!=null&&u.checked?l.actions.Priority=!0:(o({show:!1}),delete l.actions.Priority):j==="Contact"?(P=t.target)!=null&&P.checked?(X(e,d,c),l.actions.Contact=!0):delete l.actions.Contact:j==="Product"?(_=t.target)!=null&&_.checked?(Y(e,d,c),l.actions.Product=!0):delete l.actions.Contact:j==="Source"?(O=t.target)!=null&&O.checked?(Z(e,d,c),l.actions.Source=!0):delete l.actions.Contact:j==="Tag"?(I=t.target)!=null&&I.checked?(h(e,d,c),l.actions.Tag=!0):delete l.actions.Contact:j==="Company"?(V=t.target)!=null&&V.checked?(f(e,d,c),l.actions.Company=!0):delete l.actions.Company:j==="CompanyType"&&((q=t.target)!=null&&q.checked?(M(e,d,c),l.actions.CompanyType=!0):delete l.actions.CompanyType),o({show:j}),d(x({},l))},n=()=>{o({show:!1})},g=(t,j)=>{const l=x({},e);l[j]=t,d(x({},l))};return a.jsxs("div",{className:"pos-rel d-flx flx-wrp",children:[e.actionName==="lead"&&a.jsx(N,{checked:((v=e.actions)==null?void 0:v.Priority)||!1,onChange:t=>b(t,"priority"),className:"wdt-200 mt-4 mr-2",value:"priority",title:i("Priority","bit-integrations"),subTitle:i("Priority","bit-integrations")}),(e.actionName==="lead"||e.actionName==="people")&&a.jsx(N,{checked:(e==null?void 0:e.selectedCompany)||!1,onChange:t=>b(t,"Company"),className:"wdt-200 mt-4 mr-2",value:"Company",title:i("Add Company","bit - integrations"),subTitle:i("Add Company")}),e.actionName==="lead"&&a.jsx(N,{checked:(e==null?void 0:e.selectedProduct)||!1,onChange:t=>b(t,"Product"),className:"wdt-200 mt-4 mr-2",value:"Product",title:i("Add Product","bit - integrations"),subTitle:i("Add Product")}),e.actionName==="lead"&&a.jsx(N,{checked:(e==null?void 0:e.selectedSource)||!1,onChange:t=>b(t,"Source"),className:"wdt-200 mt-4 mr-2",value:"Source",title:i("Add Source","bit - integrations"),subTitle:i("Add Source")}),e.actionName==="lead"&&a.jsx(N,{checked:(e==null?void 0:e.selectedTag)||!1,onChange:t=>b(t,"Tag"),className:"wdt-200 mt-4 mr-2",value:"Tag",title:i("Add Tag","bit - integrations"),subTitle:i("Add Tag")}),(e.actionName==="company"||e.actionName==="lead")&&a.jsx(N,{checked:(e==null?void 0:e.selectedContact)||!1,onChange:t=>b(t,"Contact"),className:"wdt-200 mt-4 mr-2",value:"Contact",title:i("Add Contact","bit - integrations"),subTitle:i("Add Contact")}),e.actionName==="company"&&a.jsx(N,{checked:(e==null?void 0:e.selectedCompanyType)||!1,onChange:t=>b(t,"CompanyType"),className:"wdt-200 mt-4 mr-2",value:"CompanyType",title:i("Add CompanyType","bit - integrations"),subTitle:i("Add CompanyType")}),a.jsxs(T,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:m.show==="Company",close:n,action:n,title:i("Add Company","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"mt-2",children:i("Select Company","bit-integrations")}),s.companies?a.jsx(w,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):a.jsx("div",{className:"flx flx-between mt-2",children:a.jsx(S,{options:(r=e==null?void 0:e.companies)==null?void 0:r.map(t=>({label:t.name,value:t.id})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedCompany,onChange:t=>g(t,"selectedCompany"),singleSelect:!0,closeOnSelect:!0})})]}),a.jsxs(T,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:m.show==="Contact",close:n,action:n,title:i("Add Contact","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"mt-2",children:i("Select Contact","bit-integrations")}),s.contacts?a.jsx(w,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):a.jsx("div",{className:"flx flx-between mt-2",children:a.jsx(S,{options:(y=e==null?void 0:e.contacts)==null?void 0:y.map(t=>({label:t.name,value:t.id})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedContact,onChange:t=>g(t,"selectedContact"),singleSelect:!0,closeOnSelect:!0})})]}),a.jsxs(T,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:m.show==="Product",close:n,action:n,title:i("Add Product","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"mt-2",children:i("Select Product","bit-integrations")}),s.products?a.jsx(w,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):a.jsx("div",{className:"flx flx-between mt-2",children:a.jsx(S,{options:(p=e==null?void 0:e.products)==null?void 0:p.map(t=>({label:t.name,value:t.id})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedProduct,onChange:t=>g(t,"selectedProduct"),singleSelect:!0,closeOnSelect:!0})})]}),a.jsxs(T,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:m.show==="Source",close:n,action:n,title:i("Add Source","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"mt-2",children:i("Select Source","bit-integrations")}),s.sources?a.jsx(w,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):a.jsx("div",{className:"flx flx-between mt-2",children:a.jsx(S,{options:(F=e==null?void 0:e.sources)==null?void 0:F.map(t=>({label:t.name,value:t.id})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedSource,onChange:t=>g(t,"selectedSource"),singleSelect:!0,closeOnSelect:!0})})]}),a.jsxs(T,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:m.show==="Tag",close:n,action:n,title:i("Add Tag","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"mt-2",children:i("Select Tag","bit-integrations")}),s.tags?a.jsx(w,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):a.jsx("div",{className:"flx flx-between mt-2",children:a.jsx(S,{options:(A=e==null?void 0:e.tags)==null?void 0:A.map(t=>({label:t.name,value:t.name})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedTag,onChange:t=>g(t,"selectedTag"),singleSelect:!0,closeOnSelect:!0})})]}),a.jsxs(T,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:m.show==="CompanyType",close:n,action:n,title:i("Add CompanyType","bit-integrations"),children:[a.jsx("div",{className:"btcd-hr mt-2 mb-2"}),a.jsx("div",{className:"mt-2",children:i("Select CompanyType","bit-integrations")}),s.companyTypes?a.jsx(w,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):a.jsx("div",{className:"flx flx-between mt-2",children:a.jsx(S,{options:(k=e==null?void 0:e.companyTypes)==null?void 0:k.map(t=>({label:t.name,value:t.id})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedCompanyType,onChange:t=>g(t,"selectedCompanyType"),singleSelect:!0,closeOnSelect:!0})})]})]})}function te({field:e,index:d,conf:s,setConf:c,fieldValue:m,fieldLabel:o,className:b}){return a.jsx(L,{onChange:n=>ee(n,d,s,c,m),label:i(o,"bit-integrations"),className:b,type:"text",value:e[m],placeholder:i(o,"bit-integrations")})}function ie({i:e,formFields:d,field:s,nutshellCRMConf:c,setNutshellCRMConf:m}){var v;const o=(c==null?void 0:c.nutshellCRMFields)&&(c==null?void 0:c.nutshellCRMFields.filter(r=>r.required===!0))||[],b=(c==null?void 0:c.nutshellCRMFields)&&(c==null?void 0:c.nutshellCRMFields.filter(r=>r.required===!1))||[],n=J(z),{isPro:g}=n;return a.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:a.jsxs("div",{className:"pos-rel flx",children:[a.jsxs("div",{className:"flx integ-fld-wrp",children:[a.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:r=>H(r,e,c,m),children:[a.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),a.jsx("optgroup",{label:"Form Fields",children:d==null?void 0:d.map(r=>a.jsx("option",{value:r.name,children:r.label},`ff-rm-${r.name}`))}),a.jsx("option",{value:"custom",children:i("Custom...","bit-integrations")}),a.jsx("optgroup",{label:`General Smart Codes ${g?"":"(PRO)"}`,children:g&&((v=U)==null?void 0:v.map(r=>a.jsx("option",{value:r.name,children:r.label},`ff-rm-${r.name}`)))})]}),s.formField==="custom"&&a.jsx(te,{field:s,index:e,conf:c,setConf:m,fieldValue:"customValue",fieldLabel:"Custom Value",className:"mr-2"}),a.jsxs("select",{className:"btcd-paper-inp",disabled:e<o.length,name:"nutshellCRMFormField",value:e<o.length?o[e].key||"":s.nutshellCRMFormField||"",onChange:r=>H(r,e,c,m),children:[a.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),e<o.length?a.jsx("option",{value:o[e].key,children:o[e].label},o[e].key):b.map(({key:r,label:y})=>a.jsx("option",{value:r,children:y},r))]})]}),e>=o.length&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>K(e,c,m),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),a.jsx("button",{onClick:()=>C(e,c,m),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:a.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function me({formFields:e,handleInput:d,nutshellCRMConf:s,setNutshellCRMConf:c,loading:m,setLoading:o,isLoading:b,setIsLoading:n,setSnackbar:g}){const v=r=>{c(y=>W(y,p=>{const{name:F}=r.target;r.target.value!==""?(p.actionName=r.target.value,p.actionName==="people"?p.nutshellCRMFields=p.peopleFields:p.actionName==="company"?p.nutshellCRMFields=p.companyFields:p.actionName==="lead"&&(p.nutshellCRMFields=p.leadFields,p.leadStatus=["Lead","Open","Replied","Opportunity","Quotation","Lost Quotation","Interested","Converted","Do Not Company"]),p.field_map=R(p)):delete p[F]}))};return a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Action:","bit-integrations")}),a.jsxs("select",{onChange:v,name:"actionName",value:s.actionName,className:"btcd-paper-inp w-5",children:[a.jsx("option",{value:"",children:i("Select an action","bit-integrations")}),a.jsx("option",{value:"company","data-action_name":"company",children:i("Create Company","bit-integrations")}),a.jsx("option",{value:"people","data-action_name":"people",children:i("Create People","bit-integrations")}),a.jsx("option",{value:"lead","data-action_name":"lead",children:i("Create Lead","bit-integrations")})]}),a.jsx("br",{}),b&&a.jsx(w,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.actionName&&!b&&a.jsxs("div",{children:[a.jsx("br",{}),a.jsx("div",{className:"mt-5",children:a.jsx("b",{className:"wdt-100",children:i("Field Map","bit-integrations")})}),a.jsx("br",{}),a.jsx("div",{className:"btcd-hr mt-1"}),a.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[a.jsx("div",{className:"txt-dp",children:a.jsx("b",{children:i("Form Fields","bit-integrations")})}),a.jsx("div",{className:"txt-dp",children:a.jsx("b",{children:i("NutshellCRM Fields","bit-integrations")})})]}),s==null?void 0:s.field_map.map((r,y)=>a.jsx(ie,{i:y,field:r,nutshellCRMConf:s,formFields:e,setNutshellCRMConf:c,setSnackbar:g},`rp-m-${y+9}`)),a.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:a.jsx("button",{onClick:()=>K(s.field_map.length,s,c),className:"icn-btn sh-sm",type:"button",children:"+"})}),a.jsx("br",{}),a.jsx("br",{}),a.jsx("div",{className:"mt-4",children:a.jsx("b",{className:"wdt-100",children:i("Actions","bit-integrations")})}),a.jsx("div",{className:"btcd-hr mt-1"}),a.jsx(ae,{nutshellCRMConf:s,setNutshellCRMConf:c,formFields:e,loading:m,setLoading:o})]})]})}export{me as N};
