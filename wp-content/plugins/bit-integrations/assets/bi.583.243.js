var B=Object.defineProperty;var N=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var b=(l,a,e)=>a in l?B(l,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[a]=e,d=(l,a)=>{for(var e in a||(a={}))D.call(a,e)&&b(l,e,a[e]);if(N)for(var e of N(a))O.call(a,e)&&b(l,e,a[e]);return l};import{r as j,j as t}from"./main-149.js";import{_ as s,K as R,L as A,z as q,A as u,P as p,O as z,R as S,Q as U,q as V,D as G,N as K,c as M}from"./bi.738.82.js";import{B as Q}from"./bi.150.726.js";function F({formFields:l,webHooks:a,setWebHooks:e,setStep:C,setSnackbar:h,create:T,isInfo:c}){var f,v;const[y,m]=j.useState(!1),[x,o]=j.useState(1),_=["GET","POST","PUT","PATCH","OPTION","DELETE","TRACE","CONNECT"],g=n=>{const i=d({},a);i[n.target.name]=n.target.value,e(d({},i))},E=n=>{m(!0),M({hookDetails:n},"test_webhook").then(i=>{if(i&&i.success)h({show:!0,msg:`${i.data}`}),m(!1);else if(i&&i.data){const r=typeof i.data=="string"?i.data:"Unknown error";h({show:!0,msg:`${r}. ${s("please try again","bit-integrations")}`}),m(!1)}else h({show:!0,msg:s("Webhook tests failed. please try again","bit-integrations")}),m(!1)})};j.useEffect(()=>{if(a&&!(a!=null&&a.condition)){const n=d({},a);n.condition={action_behavior:"",actions:[{field:"",action:"value"}],logics:[{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}]},e(n)}},[]);const P=(n,i)=>{const r=d({},a);i?r.condition.action_behavior=n:r.condition.action_behavior="",e(r)},L=()=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),C(2)},$='You can test any kind of webhook using <a href="https://app.webhook.is/test" target="_blank" rel="noreferrer">app.webhook.is</a>';return t.jsxs("div",{style:{width:c&&900},children:[t.jsx("div",{className:"flx ",children:t.jsxs("div",{className:"w-8 mr-2 mt-2 mb-4",children:[t.jsx("div",{className:"f-m",children:s("Integration name","bit-integrations")}),t.jsx("input",{name:"name",onChange:n=>g(n),className:"btcd-paper-inp mt-1",type:"text",value:a.name,disabled:c})]})}),t.jsxs("div",{className:"flx",children:[t.jsxs("div",{className:"w-5 mr-2 ",children:[t.jsx("div",{className:"f-m",children:s("Link:","bit-integrations")}),t.jsx("input",{name:"url",onChange:n=>g(n),className:"btcd-paper-inp mt-1",type:"text",value:a.url,disabled:c})]}),t.jsxs("div",{className:"w-3",children:[t.jsx("div",{className:"f-m",children:s("Method:","bit-integrations")}),t.jsx("select",{name:"method",onChange:n=>g(n),defaultValue:a.method,className:"btcd-paper-inp mt-1",disabled:c,children:_.map((n,i)=>t.jsx("option",{value:n,children:n},`method-${i*2}`))})]})]}),(a==null?void 0:a.apiConsole)&&t.jsxs("small",{className:"d-blk mt-2",children:[s("To got Webhook , Please Visit","bit-integrations")," ",t.jsx("a",{className:"btcd-link",href:a.apiConsole,target:"_blank",rel:"noreferrer",children:s(`${a.type} Dashboard`,"bit-integrations")})]}),!c&&t.jsxs(R,{onClick:()=>E(a),className:"btn btcd-btn-o-blue",children:[s("Test Webhook","bit-integrations"),y&&t.jsx(A,{size:14,clr:"#022217",className:"ml-2"})]}),t.jsx("br",{}),t.jsx("br",{}),t.jsxs(q,{children:[t.jsxs("div",{className:"flx mt-2",children:[t.jsx(u,{children:t.jsx("button",{className:`btcd-s-tab-link ${x===1&&"s-t-l-active"}`,type:"button",children:s("Params","bit-integrations")})}),t.jsx(u,{children:t.jsx("button",{className:`btcd-s-tab-link ${x===2&&"s-t-l-active"}`,type:"button",children:s("Headers","bit-integrations")})}),t.jsx(u,{children:t.jsx("button",{className:`btcd-s-tab-link ${x===3&&"s-t-l-active"}`,type:"button",children:s("Body","bit-integrations")})})]}),t.jsx("div",{className:"btcd-hr"}),t.jsx(p,{children:t.jsx(z,{webHooks:a,setWebHooks:e,formFields:l,isInfo:c,setTab:o})}),t.jsx(p,{children:t.jsx(S,{webHooks:a,setWebHooks:e,formFields:l,isInfo:c,setTab:o})}),t.jsx(p,{children:t.jsx(U,{webHooks:a,setWebHooks:e,formFields:l,isInfo:c,setTab:o})})]}),(a==null?void 0:a.condition)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flx",children:t.jsx(V,{onChange:n=>P(n.target.value,n.target.checked),checked:((f=a==null?void 0:a.condition)==null?void 0:f.action_behavior)==="cond",className:"wdt-200 mt-4 mr-2",value:"cond",title:s("Conditional Logics","bit_integration"),isInfo:c})}),t.jsx("br",{}),((v=a==null?void 0:a.condition)==null?void 0:v.action_behavior)==="cond"&&t.jsx(G,{formFields:l,dataConf:a,setDataConf:e})]}),T&&t.jsxs("button",{onClick:()=>L(),className:"btn btcd-btn-lg green sh-sm flx",type:"button",children:[s("Next","bit-integrations"),t.jsx(Q,{className:"ml-1 rev-icn"})]}),t.jsx(K,{note:$})]})}export{F as default};
