var R=Object.defineProperty;var N=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var F=(t,s,m)=>s in t?R(t,s,{enumerable:!0,configurable:!0,writable:!0,value:m}):t[s]=m,x=(t,s)=>{for(var m in s||(s={}))S.call(s,m)&&F(t,m,s[m]);if(N)for(var m of N(s))q.call(s,m)&&F(t,m,s[m]);return t};import{r as I,j as e,d as V,L as k}from"./main-149.js";import{q as O,_ as d,f as M,m as $,n as E,o as P,p as T,L as A}from"./bi.738.82.js";import{h as _,a as L,d as B}from"./bi.236.799.js";import{g as G,a as H,b as D,c as J}from"./bi.804.800.js";import{T as K}from"./bi.653.689.js";function Q({selzyConf:t,setSelzyConf:s}){var h,j;const[m,a]=I.useState({show:!1}),n=(l,p)=>{var r,u;const i=x({},t);p==="option"&&((r=l.target)!=null&&r.checked?(i.actions.option=!0,a({show:"option"})):(a({show:!1}),delete i.actions.option)),p==="overwrite"&&((u=l.target)!=null&&u.checked?(i.actions.overwrite=!0,a({show:"overwrite"})):(a({show:!1}),delete i.actions.overwrite)),s(x({},i))},o=()=>{a({show:!1})},b=l=>{const p=x({},t),{name:i,value:r}=l.target;r!==""&&(p[i]=r),s(p)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(O,{checked:((h=t==null?void 0:t.actions)==null?void 0:h.option)||!1,onChange:l=>n(l,"option"),className:"wdt-200 mt-4 mr-2",value:"option ",title:d("Add Option"),subTitle:d("Customize you subcription")}),e.jsxs(M,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:d("Ok"),show:m.show==="option",close:o,action:o,title:d("Subscribe Option"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsxs("div",{className:"p-1",children:[e.jsx("div",{className:"my-2 w-100 ",children:d("Customize your subscription")}),e.jsxs("select",{name:"option",value:t.option,onChange:b,className:"btcd-paper-inp w-100 mx-0",children:[e.jsx("option",{value:"",children:d("Select Option")}),(t==null?void 0:t.doubleOption)&&(t==null?void 0:t.doubleOption.map(l=>e.jsx("option",{value:l.key,children:l.name},l.key)))]})]})]})]}),e.jsxs("div",{children:[e.jsx(O,{checked:((j=t==null?void 0:t.actions)==null?void 0:j.overwrite)||!1,onChange:l=>n(l,"overwrite"),className:"wdt-200 mt-4 mr-2",value:"overwrite",title:d("Overwrite"),subTitle:d("Field and tag rewriting mode")}),e.jsxs(M,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:d("Ok"),show:m.show==="overwrite",close:o,action:o,title:d("Subscribe overwrite"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsxs("div",{className:"p-1",children:[e.jsx("div",{className:"my-2 w-100 ",children:d("Field and tag rewriting mode")}),e.jsxs("select",{name:"overwrite",value:t.overwrite,onChange:b,className:"btcd-paper-inp w-100 mx-0",children:[e.jsx("option",{value:"",children:d("Select Option")}),(t==null?void 0:t.overwriteOption)&&(t==null?void 0:t.overwriteOption.map(l=>e.jsx("option",{value:l.key,children:l.name},l.key)))]})]})]})]})]})}function U({i:t,field:s,formFields:m,selzyConf:a,setSelzyConf:n}){var i,r,u,v,w;const o=V($),{isPro:b}=o;if(((i=a==null?void 0:a.field_map)==null?void 0:i.length)===1&&s.selzyFormField===""){const c=x({},a),g=G(c);c.field_map=g,n(c)}const h=(a==null?void 0:a.selzyFields.filter(c=>c.required===!0))||[],j=a.method==="1"?((r=a==null?void 0:a.selzyFields)==null?void 0:r.filter(c=>c.required===!1))||[]:[],l=a.method==="1"?((v=(u=a==null?void 0:a.default)==null?void 0:u.customFields)==null?void 0:v.filter(c=>c.required===!1))||[]:[],p=a.method==="1"?[...j,...l]:[];return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",onChange:c=>{_(c,t,a,n)},value:s.formField||"",children:[e.jsx("option",{value:"",children:d("Select Field")}),e.jsx("optgroup",{label:"Form Fields",children:m==null?void 0:m.map(c=>e.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`))}),e.jsx("option",{value:"custom",children:d("Custom...")}),e.jsx("optgroup",{label:`General Smart Codes ${b?"":"(PRO)"}`,children:b&&((w=E)==null?void 0:w.map(c=>e.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`)))})]}),s.formField==="custom"&&e.jsx(K,{onChange:c=>P(c,t,a,n),label:d("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:s.customValue,placeholder:d("Custom Value","bit-integrations"),formFields:m}),e.jsxs("select",{className:"btcd-paper-inp",disabled:t<h.length,name:"selzyFormField",onChange:c=>{_(c,t,a,n)},value:t<h.length?h[t].key||"":s.selzyFormField||"",children:[e.jsx("option",{value:"",children:d("Select Field")}),t<h.length?e.jsx("option",{value:h[t].key,children:h[t].label},h[t].key):p.map(({key:c,label:g})=>e.jsx("option",{value:c,children:g},c))]})]}),(a==null?void 0:a.method)==="1"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>L(t,a,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>B(t,a,n),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function C({selzyConf:t,setSelzyConf:s,formFields:m,loading:a,setLoading:n}){var l,p;const[o,b]=I.useState([{key:"1",label:"Subscribe"},{key:"2",label:"unsubscribe"}]),h=(i,r)=>{const u=x({},t);switch(r){case"listIds":u[r]=i;break;case"tags":u[r]=i;break}s(u)},j=i=>{const r=x({},t),{name:u,value:v}=i.target;switch(v!==""&&(r[u]=v),v){case"":delete r[u],r.listIds="",r.tags="";break;case"2":r.tags="",r.field_map=[{formField:"",selzyFormField:""}];break}s(x({},r))};return e.jsxs("div",{className:"mt-2",children:[a.page===!1&&e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"wdt-200 d-in-b ",children:d("Actions:")}),e.jsxs("select",{onChange:j,name:"method",value:t==null?void 0:t.method,className:"btcd-paper-inp w-5 mx-0",children:[e.jsx("option",{value:"",children:d("Select Actions")}),o&&o.map(({key:i,label:r})=>e.jsx("option",{value:i,children:r},i))]})]}),t.method&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flx mt-2",children:[e.jsx("b",{className:"wdt-200 d-in-b mx-0",children:d("List:")}),e.jsx(T,{className:"w-5",defaultValue:t==null?void 0:t.listIds,options:((l=t==null?void 0:t.default)==null?void 0:l.lists)&&(t==null?void 0:t.default.lists.map(i=>({label:i.title,value:i.id}))),onChange:i=>h(i,"listIds"),multiSelect:!0,closeOnSelect:!1}),e.jsx("button",{onClick:()=>H(t,s,a,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh list"'},type:"button",disabled:a.list,children:"↻"}),a.list&&e.jsx(A,{size:"20",clr:"#022217",className:"ml-2"})]}),t.method==="1"&&e.jsxs("div",{className:"flx mt-2",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:d("Tags:")}),e.jsx(T,{className:"w-5",defaultValue:t==null?void 0:t.tags,options:((p=t==null?void 0:t.default)==null?void 0:p.tags)&&(t==null?void 0:t.default.tags.map(i=>({label:i.name,value:i.name}))),onChange:i=>h(i,"tags"),multiSelect:!0,closeOnSelect:!1}),e.jsx("button",{onClick:()=>D(t,s,a,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Tag"'},type:"button",disabled:a.tag,children:"↻"}),a.tag&&e.jsx(A,{size:"20",clr:"#022217",className:"ml-2"})]})]}),a.customFields&&e.jsx(k,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(t==null?void 0:t.listIds)&&t.method&&e.jsxs("div",{className:"mt-5",children:[e.jsxs("b",{className:"wdt-100",children:[d("Field Map"),t.method==="1"&&e.jsx("button",{onClick:()=>J(t,s,a,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Refresh custom fields","bit-integrations")}'`},type:"button",disabled:a.customFields,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-2 mb-4"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Selzy Fields")})})]}),t==null?void 0:t.field_map.map((i,r)=>e.jsx(U,{i:r,field:i,formFields:m,selzyConf:t,setSelzyConf:s},`ko-m-${r+8}`)),(t==null?void 0:t.method)==="1"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>L(t.field_map.length,t,s),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Actions")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(Q,{selzyConf:t,setSelzyConf:s})]})]}),a.page&&e.jsx(k,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}})]})}export{C as S};
