var _=Object.defineProperty;var w=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var N=(a,e,t)=>e in a?_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,p=(a,e)=>{for(var t in e||(e={}))o.call(e,t)&&N(a,t,e[t]);if(w)for(var t of w(e))$.call(e,t)&&N(a,t,e[t]);return a};import{d as H,j as s,L as g}from"./main-149.js";import{m as V,_ as n,n as I,o as M,p as v}from"./bi.738.82.js";import{g as q,a as y,b as k}from"./bi.328.849.js";import{T}from"./bi.653.689.js";const W=(a,e,t)=>{const l=p({},e);l.field_map.splice(a,0,{}),t(p({},l))},A=(a,e,t)=>{const l=p({},e);l.field_map.length>1&&l.field_map.splice(a,1),t(p({},l))},F=(a,e,t,l)=>{const c=p({},t);c.field_map[e][a.target.name]=a.target.value,a.target.value==="custom"&&(c.field_map[e].customValue=""),l(p({},c))};function P({i:a,formFields:e,field:t,zohoSheetConf:l,setZohoSheetConf:c}){var r,d,b;const m=((r=l==null?void 0:l.workSheetHeaders)==null?void 0:r.filter(i=>i.required===!0))||[],j=((d=l==null?void 0:l.workSheetHeaders)==null?void 0:d.filter(i=>i.required===!1))||[],u=H(V),{isPro:x}=u;return s.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:s.jsxs("div",{className:"pos-rel flx",children:[s.jsxs("div",{className:"flx integ-fld-wrp",children:[s.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:i=>F(i,a,l,c),children:[s.jsx("option",{value:"",children:n("Select Field","bit-integrations")}),s.jsx("optgroup",{label:"Form Fields",children:e==null?void 0:e.map(i=>s.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`))}),s.jsx("option",{value:"custom",children:n("Custom...","bit-integrations")}),s.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((b=I)==null?void 0:b.map(i=>s.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`)))})]}),t.formField==="custom"&&s.jsx(T,{onChange:i=>M(i,a,l,c),label:n("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:n("Custom Value","bit-integrations"),formFields:e}),s.jsxs("select",{className:"btcd-paper-inp",disabled:a<m.length,name:"zohoSheetFormField",value:a<m?m[a].label||"":t.zohoSheetFormField||"",onChange:i=>F(i,a,l,c),children:[s.jsx("option",{value:"",children:n("Select Field","bit-integrations")}),a<m.length?s.jsx("option",{value:m[a].key,children:m[a].label},m[a].key):j.map(({key:i,label:R})=>s.jsx("option",{value:i,children:R},i))]})]}),a>=m.length&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>W(a,l,c),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),s.jsx("button",{onClick:()=>A(a,l,c),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:s.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function J({formFields:a,zohoSheetConf:e,setZohoSheetConf:t,loading:l,setLoading:c}){var u,x;const m=(r,d)=>{const b=p({},e);b[d]=r,d==="selectedWorkbook"?(b.selectedWorksheet="",r!==""&&y(b,t,l,c)):d==="selectedWorksheet"&&r!==""&&k(b,t,l,c),t(p({},b))},j=r=>{const d=p({},e),{name:b}=r.target;r.target.value!==""?(d[b]=r.target.value,k(d,t,l,c)):delete d[b],t(p({},d))};return s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsxs("div",{className:"flx",children:[s.jsx("b",{className:"wdt-200 d-in-b",children:n("Select workbook:","bit-integrations")}),s.jsx(v,{singleSelect:!0,options:(u=e.workbooks)==null?void 0:u.map(r=>({label:r.name,value:r.id})),className:"msl-wrp-options dropdown-custom-width",defaultValue:e==null?void 0:e.selectedWorkbook,onChange:r=>m(r,"selectedWorkbook")}),s.jsx("button",{onClick:()=>q(e,t,l,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${n("Refresh  workbooks","bit-integrations")}'`},type:"button",disabled:l.workbooks,children:"↻"})]}),s.jsx("br",{}),s.jsxs("div",{className:"flx",children:[s.jsx("b",{className:"wdt-200 d-in-b",children:n("Select worksheet:","bit-integrations")}),s.jsx(v,{singleSelect:!0,options:(x=e==null?void 0:e.worksheets)==null?void 0:x.map(r=>({label:r.name,value:r.id})),className:"msl-wrp-options dropdown-custom-width",defaultValue:e==null?void 0:e.selectedWorksheet,onChange:r=>m(r,"selectedWorksheet"),disabled:!e.selectedWorkbook||l.worksheets}),s.jsx("button",{onClick:()=>y(e,t,l,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${n("Refresh  worksheets","bit-integrations")}'`},type:"button",disabled:l.worksheets||l.workbooks||!e.selectedWorkbook,children:"↻"})]}),s.jsx("br",{}),s.jsxs("div",{className:"flx",children:[s.jsx("b",{className:"wdt-200 d-in-b",children:n("Header Row:","bit-integrations")}),s.jsx("input",{type:"number",min:"1",className:"btcd-paper-inp w-5",placeholder:"Header Row",onChange:r=>j(r),value:e.headerRow,name:"headerRow",disabled:l.worksheets||l.workbooks||!e.selectedWorkbook||!e.selectedWorksheet}),s.jsx("button",{onClick:()=>k(e,t,l,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${n("Refresh  worksheet headers","bit-integrations")}'`},type:"button",disabled:l.worksheets||l.workbooks||!e.selectedWorkbook||!e.selectedWorksheet||l.header,children:"↻"})]}),(l.workbooks||l.worksheets)&&s.jsx(g,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.jsxs("div",{children:[s.jsx("br",{}),s.jsx("div",{className:"mt-5",children:s.jsx("b",{className:"wdt-100",children:n("Field Map","bit-integrations")})}),s.jsx("br",{}),s.jsx("div",{className:"btcd-hr mt-1"}),s.jsx("br",{}),l.header&&s.jsx(g,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:n("Form Fields","bit-integrations")})}),s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:n("ZohoSheet Fields","bit-integrations")})})]}),l.workSheetHeaders&&e.selectedWorksheet&&s.jsxs("div",{children:[" ",e==null?void 0:e.field_map.map((r,d)=>s.jsx(P,{i:d,field:r,zohoSheetConf:e,formFields:a,setZohoSheetConf:t},`rp-m-${d+9}`)),s.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:s.jsx("button",{onClick:()=>W(e.field_map.length,e,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),s.jsx("br",{}),s.jsx("br",{})]})]})]})}export{J as Z};
