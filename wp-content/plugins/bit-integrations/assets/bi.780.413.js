var I=Object.defineProperty;var v=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var j=(a,s,t)=>s in a?I(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,k=(a,s)=>{for(var t in s||(s={}))_.call(s,t)&&j(a,t,s[t]);if(v)for(var t of v(s))q.call(s,t)&&j(a,t,s[t]);return a};import{u as w,r,j as i}from"./main-149.js";import{e as T,_ as E,I as L,F as z,d as u}from"./bi.738.82.js";import{S as A}from"./bi.384.918.js";import B from"./bi.108.282.js";import{h as C,c as P}from"./bi.737.815.js";import{M as D}from"./bi.427.816.js";import"./bi.452.742.js";import"./bi.653.689.js";import"./bi.96.690.js";function Y({formFields:a,setFlow:s,flow:t,allIntegURL:m}){const p=w(),[y,b]=r.useState(!1),[f,g]=r.useState({auth:!1,customFields:!1}),[n,h]=r.useState(1),[S,c]=r.useState({show:!1}),N=[{key:"email",label:"Email",required:!0},{key:"firstName",label:"First Name",required:!1},{key:"lastName",label:"Last Name",required:!1},{key:"timezone",label:"Timezone",required:!1},{key:"ipAddress",label:"Ip Address",required:!1}],[e,o]=r.useState({name:"MailBluster",type:"MailBluster",auth_token:"",field_map:[{formField:"",mailBlusterFormField:""}],staticFields:N,subscribed:"",customFields:[],selectedTags:[],actions:{}}),M=()=>{b(!0),z(t,s,m,e,p,"","",b).then(d=>{var x;d.success?(u.success((x=d.data)==null?void 0:x.msg),p(m)):u.error(d.data||d)})},F=l=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!P(e)){u.error("Please map mandatory fields");return}e.field_map.length>0&&h(l)};return i.jsxs("div",{children:[i.jsx(T,{snack:S,setSnackbar:c}),i.jsx("div",{className:"txt-center mt-2",children:i.jsx(A,{step:3,active:n})}),i.jsx(B,{mailBlusterConf:e,setMailBlusterConf:o,step:n,setStep:h,loading:f,setLoading:g,setSnackbar:c}),i.jsxs("div",{className:"btcd-stp-page",style:k({},n===2&&{width:900,height:"auto",overflow:"visible"}),children:[i.jsx(D,{formFields:a,handleInput:l=>C(l,e,o),mailBlusterConf:e,setMailBlusterConf:o,loading:f,setLoading:g,setSnackbar:c}),(e==null?void 0:e.subscribed)&&i.jsxs("button",{onClick:()=>F(3),disabled:!(e!=null&&e.subscribed),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[E("Next","bit-integrations")," ","Â ",i.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.subscribed)&&i.jsx(L,{step:n,saveConfig:()=>M(),isLoading:y,dataConf:e,setDataConf:o,formFields:a})]})}export{Y as default};
