var MyAjax={ajaxurl:MyScriptData.ajaxurl,nonce:MyScriptData.nonce};function fetchAirtableTables(e){jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:{action:"fetch_airtable_tables",app_id:e,security:MyAjax.nonce},success:function(e){var a;a="string"==typeof e?JSON.parse(e):e;var t=jQuery("#wpc-wpcf7-airtable-table-id-selected");t.children("option:not(:first)").remove(),jQuery.each(a,(function(e,a){t.append(jQuery("<option>",{value:e,text:a.name}))}));var i=MyScriptData.table_selected;i&&t.find('option[value="'+i+'"]').length?t.val(i):t.val("-1")}})}jQuery(document).ready((function(e){var a=e("#wpc-wpcf7-airtable-table-lookup"),t=function(t){a.next(".error,.notice-success").remove(),a.after(e('<div class="error"></div>').text(t))};function i(){var a=e("#wpc-wpcf7-airtable-app-id-selected").val(),t=e("#wpc-wpcf7-airtable-table-id-selected").val();""!==a&&""!==t&&"-1"!==t?e(".notice-error").show():e(".notice-error").hide()}function l(a){e(".airtable-field-select option").prop("disabled",!1),e(".airtable-field-select").each((function(){var a=e(this).val();a&&e(".airtable-field-select").not(this).find("option[value="+a+"]").prop("disabled",!0)}))}a.change((function(){var i=e(this).val(),l="https://airtable.com/";if(0===i.indexOf(l)){var c=(i=i.replace(l,"")).split("/");0===c.length||c.length<2?t(wp.i18n.__("Invalid Airtable URL","add-on-cf7-for-airtable")):(a.next(".error,.notice-success").remove(),a.after(e('<div class="notice notice-success"></div>').text(wp.i18n.__("Table found.","add-on-cf7-for-airtable"))),e("#wpc-wpcf7-airtable-app-id-selected").val(c[0]),e("#wpc-wpcf7-airtable-table-selected").val(c[1]))}else t(wp.i18n.__("Invalid Airtable URL","add-on-cf7-for-airtable"))})),e("#wpc-wpcf7-airtable-enabled").change((function(){e(this).prop("checked")?e("#wpc-wpcf7-airtable-setup-table, #wpc-wpcf7-airtable-fields-table").removeClass("is-disabled"):e("#wpc-wpcf7-airtable-setup-table, #wpc-wpcf7-airtable-fields-table").addClass("is-disabled")})),fetchAirtableTables(jQuery("#wpc-wpcf7-airtable-app-id-selected").val()),e("#wpc-wpcf7-airtable-app-id-selected, #wpc-wpcf7-airtable-table-id-selected").change(i),i(),e(".airtable-field-select").change((function(){l(e(this).val())})),l()}));