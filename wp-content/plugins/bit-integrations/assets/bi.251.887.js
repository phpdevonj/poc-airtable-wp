var _=Object.defineProperty;var N=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var F=(e,s,a)=>s in e?_(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,m=(e,s)=>{for(var a in s||(s={}))T.call(s,a)&&F(e,a,s[a]);if(N)for(var a of N(s))g.call(s,a)&&F(e,a,s[a]);return e};import{r as y,j as t,d as L,L as R}from"./main-149.js";import{q as M,_ as i,f as k,m as A,n as S}from"./bi.738.82.js";import{T as U}from"./bi.653.689.js";function V({gravitecConf:e,setGravitecConf:s,loading:a,setLoading:l}){var u,n;const[o,d]=y.useState({show:!1,action:()=>{}}),x=(c,j)=>{var p;const r=m({},e);j==="button"&&((p=c.target)!=null&&p.checked?(r.selectedButtonTitle===void 0&&(r.selectedButtonTitle=""),r.selectedButtonURL===void 0&&(r.selectedButtonURL=""),r.actions.button=!0):(d({show:!1}),delete r.actions.button)),d({show:j}),s(r)},h=()=>{d({show:!1})},b=(c,j)=>{s(r=>{const p=m({},r);return p[j]=c,p})};return t.jsxs("div",{className:"pos-rel d-flx flx-wrp",children:[e.actionName==="notification"&&t.jsx(M,{checked:((u=e==null?void 0:e.selectedButtonTitle)==null?void 0:u.length)&&((n=e==null?void 0:e.selectedButtonURL)==null?void 0:n.length)||!1,onChange:c=>x(c,"button"),className:"wdt-200 mt-4 mr-2",value:"button",title:i("Add Button","bit - integrations"),subTitle:i("Add Button")}),t.jsxs(k,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:o.show==="button",close:h,action:h,title:i("Add Button","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:i("Button Title:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp mt-1",onChange:c=>b(c.target.value,"selectedButtonTitle"),name:"button_title",value:e.selectedButtonTitle,type:"text",placeholder:i("Button Title...","bit-integrations")}),t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:i("Button URL:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp mt-1",onChange:c=>b(c.target.value,"selectedButtonURL"),name:"button_url",value:e.selectedButtonURL,type:"text",placeholder:i("Button URL...","bit-integrations")})]})]})}const B=(e,s,a)=>{const l=m({},s);l.field_map.splice(e,0,{}),a(m({},l))},q=(e,s,a)=>{const l=m({},s);l.field_map.length>1&&l.field_map.splice(e,1),a(m({},l))},w=(e,s,a,l)=>{const o=m({},a);o.field_map[s][e.target.name]=e.target.value,e.target.value==="custom"&&(o.field_map[s].customValue=""),l(m({},o))},I=(e,s,a,l)=>{var d;const o=m({},a);o.field_map[s].customValue=((d=e==null?void 0:e.target)==null?void 0:d.value)||e,l(m({},o))};function $({i:e,formFields:s,field:a,gravitecConf:l,setGravitecConf:o}){var u;const d=(l==null?void 0:l.notificationFields)&&(l==null?void 0:l.notificationFields.filter(n=>n.required===!0))||[],x=(l==null?void 0:l.notificationFields)&&(l==null?void 0:l.notificationFields.filter(n=>n.required===!1))||[],h=L(A),{isPro:b}=h;return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:n=>w(n,e,l,o),children:[t.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Form Fields",children:s==null?void 0:s.map(n=>t.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`))}),t.jsx("option",{value:"custom",children:i("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${b?"":"(PRO)"}`,children:b&&((u=S)==null?void 0:u.map(n=>t.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`)))})]}),a.formField==="custom"&&t.jsx(U,{onChange:n=>I(n,e,l,o),label:i("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:a.customValue||"",placeholder:i("Custom Value","bit-integrations"),formFields:s}),t.jsxs("select",{className:"btcd-paper-inp",disabled:e<d.length,name:"gravitecFormField",value:e<d.length?d[e].key||"":a.gravitecFormField||"",onChange:n=>w(n,e,l,o),children:[t.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),e<d.length?t.jsx("option",{value:d[e].key,children:d[e].label},d[e].key):x.map(({key:n,label:c})=>t.jsx("option",{value:n,children:c},n))]})]}),e>=d.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>B(e,l,o),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>q(e,l,o),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function f({formFields:e,gravitecConf:s,setGravitecConf:a,loading:l,setLoading:o,isLoading:d,setIsLoading:x,setSnackbar:h}){const b=u=>{const n=m({},s),{name:c}=u.target;u.target.value!==""?n[c]=u.target.value:delete n[c],a(n)};return t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Action:","bit-integrations")}),t.jsxs("select",{onChange:b,name:"actionName",value:s.actionName,className:"btcd-paper-inp w-5",children:[t.jsx("option",{value:"",children:i("Select an action","bit-integrations")}),t.jsx("option",{value:"notification","data-action_name":"notification",children:i("Push Notification","bit-integrations")})]}),d&&t.jsx(R,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.actionName&&!d&&t.jsxs("div",{children:[t.jsx("br",{}),t.jsx("div",{className:"mt-5",children:t.jsx("b",{className:"wdt-100",children:i("Field Map","bit-integrations")})}),t.jsx("br",{}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:i("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:i("Gravitec Fields","bit-integrations")})})]}),s==null?void 0:s.field_map.map((u,n)=>t.jsx($,{i:n,field:u,gravitecConf:s,formFields:e,setGravitecConf:a,setSnackbar:h},`rp-m-${n+9}`)),t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>B(s.field_map.length,s,a),className:"icn-btn sh-sm",type:"button",children:"+"})}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:i("Actions","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsx(V,{gravitecConf:s,setGravitecConf:a,formFields:e,loading:l,setLoading:o})]})]})}export{f as G};
