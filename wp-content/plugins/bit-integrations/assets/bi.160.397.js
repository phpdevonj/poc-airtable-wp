var R=Object.defineProperty;var L=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var v=(n,s,a)=>s in n?R(n,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[s]=a,N=(n,s)=>{for(var a in s||(s={}))T.call(s,a)&&v(n,a,s[a]);if(L)for(var a of L(s))z.call(s,a)&&v(n,a,s[a]);return n};import{r as u,j as t,u as _,k as B,d as D}from"./main-149.js";import{_ as c,L as F,c as E,B as G,m as P,e as q,I as U,s as H}from"./bi.738.82.js";import{S as O}from"./bi.384.918.js";import{L as $,h as J,c as K}from"./bi.123.785.js";import{B as Q}from"./bi.150.726.js";import{T as S,t as V}from"./bi.452.742.js";import"./bi.582.95.js";import"./bi.21.729.js";/* empty css          */import"./bi.653.689.js";import"./bi.96.690.js";function W({formID:n,learnDashConf:s,setLearnDashConf:a,step:m,setStep:k,isLoading:p,setIsLoading:h,setSnackbar:x}){const[r,y]=u.useState(!1),[l,d]=u.useState(!1),{learnDash:e}=V,b=()=>{h("auth"),E({},"learnDash_authorize").then(o=>{o!=null&&o.success&&(y(!0),x({show:!0,msg:c("Connected with LearnDash Successfully","bit-integrations")})),h(!1),d(!0)})},j=o=>{const g=G(s);g[o.target.name]=o.target.value,a(g)};return t.jsxs("div",{className:"btcd-stp-page",style:{width:m===1&&900,height:m===1&&"auto"},children:[(e==null?void 0:e.youTubeLink)&&t.jsx(S,{title:e==null?void 0:e.title,youTubeLink:e==null?void 0:e.youTubeLink}),(e==null?void 0:e.docLink)&&t.jsx(S,{title:e==null?void 0:e.title,docLink:e==null?void 0:e.docLink}),t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:c("Integration Name:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:j,name:"name",value:s.name,type:"text",placeholder:c("Integration Name...","bit-integrations")}),p==="auth"&&t.jsxs("div",{className:"flx mt-5",children:[t.jsx(F,{size:25,clr:"#022217",className:"mr-2"}),"Checking if LearnDash is active!!!"]}),l&&!r&&!p&&t.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[t.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"LearnDash plugin must be activated to integrate with Bit Integrations."]}),!r&&t.jsx("button",{onClick:b,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:c("Connect","bit-integrations")}),r&&t.jsxs("button",{onClick:()=>k(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!r,children:[c("Next","bit-integrations"),t.jsx(Q,{className:"ml-1 rev-icn"})]})]})}function ce({formFields:n,setFlow:s,flow:a,allIntegURL:m,isInfo:k,edit:p}){const h=_(),{formID:x}=B(),r=D(P),{siteURL:y}=r,[l,d]=u.useState(!1),[e,b]=u.useState(1),[j,o]=u.useState({show:!1}),g=[{key:"1",label:"Create Group"},{key:"2",label:"Add the user to a group pro"},{key:"3",label:"Enroll the user in a course"},{key:"4",label:"Make the user the leader of group"},{key:"5",label:"Mark a course complete for the user"},{key:"6",label:"Mark a lesson complete for the user"},{key:"7",label:"Mark a lesson not complete for the user pro"},{key:"8",label:"Mark a topic complete for the user"},{key:"9",label:"Mark a topic not complete for the user pro"},{key:"10",label:"Remove the Leader from a group and its children pro"},{key:"11",label:"Remove the user from a group pro"},{key:"12",label:"Remove the user from a group and its children pro"},{key:"13",label:"Reset the users attempts for a quiz pro "},{key:"14",label:"Reset the users progress in a course pro"},{key:"16",label:"Send an email to the users group leaders"},{key:"17",label:"Unenroll the user from a course pro"}],w=[{key:"1",label:"Do not add group leader role"},{key:"2",label:"Add the role to their exiting role"},{key:"3",label:"Replace their existing role(s) with the Group Leader role"}],A=[{key:"1",label:"Do nothing"},{key:"2",label:"Add the role to their exiting role"},{key:"3",label:"Replace their existing role(s) with the Group Leader role"}],C=[{key:"title",label:"Title",required:!0}],[i,f]=u.useState({name:"LearnDash",type:"LearnDash",mainAction:"",courseId:"",domainName:y,field_map:[{formField:"",learnDeshFormField:""}],allActions:g,groupUserRole:w,groupOfLeader4:A,createGroupFields:C,actions:{}}),I=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),i.mainAction==="1"&&!K(i)){o({show:!0,msg:"Please map fields to continue."});return}i.mainAction!==""&&b(3)};return t.jsxs("div",{children:[t.jsx(q,{snack:j,setSnackbar:o}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx(O,{step:3,active:e})}),t.jsx(W,{formID:x,learnDashConf:i,setLearnDashConf:f,step:e,setStep:b,isLoading:l,setIsLoading:d,setSnackbar:o}),t.jsxs("div",{className:"btcd-stp-page",style:N({},e===2&&{width:900,height:"auto",overflow:"visible"}),children:[t.jsx($,{formFields:n,handleInput:M=>J(M,i,f),learnDashConf:i,setLearnDashConf:f,isLoading:l,setIsLoading:d,setSnackbar:o,allIntegURL:m,isInfo:k,edit:p}),i.mainAction!=="16"&&t.jsxs("button",{onClick:()=>I(),disabled:!i.mainAction||l,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[c("Next","bit-integrations")," ",t.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),i.mainAction!=="16"&&t.jsx(U,{step:e,saveConfig:()=>H({flow:a,setFlow:s,allIntegURL:m,navigate:h,conf:i,setIsLoading:d,setSnackbar:o}),isLoading:l,dataConf:i,setDataConf:f,formFields:n})]})}export{ce as default};
