var $=Object.defineProperty;var V=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var P=(e,c,s)=>c in e?$(e,c,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[c]=s,g=(e,c)=>{for(var s in c||(c={}))B.call(c,s)&&P(e,s,c[s]);if(V)for(var s of V(c))D.call(c,s)&&P(e,s,c[s]);return e};import{r as K,j as t,d as Q,L as W}from"./main-149.js";import{q as T,_ as i,f as w,p as v,H as G,m as J,n as U,J as h}from"./bi.738.82.js";import{g as X}from"./bi.784.900.js";const E=(e,c,s)=>{const a=g({},c);a.field_map.splice(e,0,{}),s(g({},a))},Y=(e,c,s)=>{const a=g({},c);a.field_map.length>1&&a.field_map.splice(e,1),s(g({},a))},z=(e,c,s,a)=>{const d=g({},s);d.field_map[c][e.target.name]=e.target.value,e.target.value==="custom"&&(d.field_map[c].customValue=""),e.target.value==="customFieldKey"&&(d.field_map[c].customFieldKey=""),a(g({},d))},Z=(e,c,s,a,d)=>{const n=g({},s);n.field_map[c][d]=e.target.value,a(g({},n))};function f({oneHashCRMConf:e,setOneHashCRMConf:c,loading:s,setLoading:a}){var o,r,u,S,p,y,L;const[d,n]=K.useState({show:!1,action:()=>{}}),x=(l,N)=>{var k,A,F,q,O,_,I;const m=g({},e);N==="organizationLead"?(k=l.target)!=null&&k.checked?m.actions.organizationLead=!0:(n({show:!1}),delete m.actions.organizationLead):N==="leadSource"?(A=l.target)!=null&&A.checked?(m.actions.leadSource=!0,m.leadSources=["Advertisement","Campaign","Cold Calling","Customer's Vendor","Exhibition","Existing Cutomer","Mass Mailing","Reference","Supplier Reference","Walk In"]):delete m.actions.leadSource:N==="LeadAddressType"?(F=l.target)!=null&&F.checked?(m.actions.LeadAddressType=!0,m.LeadAddressTypes=["Billing","Shipping","Office","Personal","Plant","Postal","Shop","SubsiDiary","Warehouse","Current","Permanent","Other"]):delete m.actions.LeadAddressType:N==="LeadType"?(q=l.target)!=null&&q.checked?(m.actions.LeadType=!0,m.LeadTypes=["Client","Channel Partner","Consultant"]):delete m.actions.LeadType:N==="RequestType"?(O=l.target)!=null&&O.checked?(m.actions.RequestType=!0,m.RequestTypes=["Product Enquiry","Request For Information","Suggestions","Other"]):delete m.actions.RequestType:N==="MarketSegment"?(_=l.target)!=null&&_.checked?(m.actions.MarketSegment=!0,m.MarketSegments=["Lower Income","Middle Income","Upper Income"]):delete m.actions.MarketSegment:N==="ContactStatus"&&((I=l.target)!=null&&I.checked?(m.actions.ContactStatus=!0,m.ContactStatus=["Passive","Open","Replied"]):delete m.actions.ContactStatus),n({show:N}),c(g({},m))},b=()=>{n({show:!1})},j=(l,N)=>{const m=g({},e);m[N]=l,c(g({},m))};return t.jsxs("div",{className:"pos-rel d-flx flx-wrp",children:[e.actionName==="lead"&&t.jsx(T,{checked:((o=e.actions)==null?void 0:o.organizationLead)||!1,onChange:l=>x(l,"organizationLead"),className:"wdt-200 mt-4 mr-2",value:"organizationLead",title:i("Lead is an Organization","bit-integrations"),subTitle:i("Lead is an Organization","bit-integrations")}),e.actionName==="lead"&&t.jsx(T,{checked:(e==null?void 0:e.selectedLeadSource)||!1,onChange:l=>x(l,"leadSource"),className:"wdt-200 mt-4 mr-2",value:"leadSource",title:i("Add Source","bit - integrations"),subTitle:i("Add Source")}),e.actionName==="lead"&&t.jsx(T,{checked:(e==null?void 0:e.selectedLeadAddressType)||!1,onChange:l=>x(l,"LeadAddressType"),className:"wdt-200 mt-4 mr-2",value:"LeadAddressType",title:i("Add Address Type","bit - integrations"),subTitle:i("Add Address Type")}),e.actionName==="lead"&&t.jsx(T,{checked:(e==null?void 0:e.selectedLeadType)||!1,onChange:l=>x(l,"LeadType"),className:"wdt-200 mt-4 mr-2",value:"LeadType",title:i("Add Lead Type","bit - integrations"),subTitle:i("Add Lead Type")}),e.actionName==="lead"&&t.jsx(T,{checked:(e==null?void 0:e.selectedRequestType)||!1,onChange:l=>x(l,"RequestType"),className:"wdt-200 mt-4 mr-2",value:"RequestType",title:i("Add Request Type","bit - integrations"),subTitle:i("Add Request Type")}),e.actionName==="lead"&&t.jsx(T,{checked:(e==null?void 0:e.selectedMarketSegment)||!1,onChange:l=>x(l,"MarketSegment"),className:"wdt-200 mt-4 mr-2",value:"MarketSegment",title:i("Add Market Segment","bit - integrations"),subTitle:i("Add Market Segment")}),e.actionName==="contact"&&t.jsx(T,{checked:(e==null?void 0:e.selectedContactStatus)||!1,onChange:l=>x(l,"ContactStatus"),className:"wdt-200 mt-4 mr-2",value:"ContactStatus",title:i("Add Status","bit - integrations"),subTitle:i("Add Status")}),t.jsxs(w,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:d.show==="leadSource",close:b,action:b,title:i("Add Source","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:i("Select Source","bit-integrations")}),t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(v,{options:(r=e==null?void 0:e.leadSources)==null?void 0:r.map(l=>({label:l,value:l})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedLeadSource,onChange:l=>j(l,"selectedLeadSource"),singleSelect:!0,closeOnSelect:!0})})]}),t.jsxs(w,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:d.show==="LeadAddressType",close:b,action:b,title:i("Add Address Type","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:i("Select Address Type","bit-integrations")}),t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(v,{options:(u=e==null?void 0:e.LeadAddressTypes)==null?void 0:u.map(l=>({label:l,value:l})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedLeadAddressType,onChange:l=>j(l,"selectedLeadAddressType"),singleSelect:!0,closeOnSelect:!0})})]}),t.jsxs(w,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:d.show==="LeadType",close:b,action:b,title:i("Add Lead Type","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:i("Select Lead Type","bit-integrations")}),t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(v,{options:(S=e==null?void 0:e.LeadTypes)==null?void 0:S.map(l=>({label:l,value:l})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedLeadType,onChange:l=>j(l,"selectedLeadType"),singleSelect:!0,closeOnSelect:!0})})]}),t.jsxs(w,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:d.show==="RequestType",close:b,action:b,title:i("Add Request Type","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:i("Select Request Type","bit-integrations")}),t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(v,{options:(p=e==null?void 0:e.RequestTypes)==null?void 0:p.map(l=>({label:l,value:l})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedRequestType,onChange:l=>j(l,"selectedRequestType"),singleSelect:!0,closeOnSelect:!0})})]}),t.jsxs(w,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:d.show==="MarketSegment",close:b,action:b,title:i("Add Market Segment","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:i("Select Market Segment","bit-integrations")}),t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(v,{options:(y=e==null?void 0:e.MarketSegments)==null?void 0:y.map(l=>({label:l,value:l})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedMarketSegment,onChange:l=>j(l,"selectedMarketSegment"),singleSelect:!0,closeOnSelect:!0})})]}),t.jsxs(w,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:d.show==="ContactStatus",close:b,action:b,title:i("Add Industry","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:i("Select Industry","bit-integrations")}),t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(v,{options:(L=e==null?void 0:e.ContactStatus)==null?void 0:L.map(l=>({label:l,value:l})),className:"msl-wrp-options",defaultValue:e==null?void 0:e.selectedContactStatus,onChange:l=>j(l,"selectedContactStatus"),singleSelect:!0,closeOnSelect:!0})})]})]})}function M({field:e,index:c,conf:s,setConf:a,fieldValue:d,fieldLabel:n,className:x}){return t.jsx(G,{onChange:b=>Z(b,c,s,a,d),label:i(n,"bit-integrations"),className:x,type:"text",value:e[d],placeholder:i(n,"bit-integrations")})}function R({i:e,formFields:c,field:s,oneHashCRMConf:a,setOneHashCRMConf:d}){var o;const n=(a==null?void 0:a.oneHashCRMFields)&&(a==null?void 0:a.oneHashCRMFields.filter(r=>r.required===!0))||[],x=(a==null?void 0:a.oneHashCRMFields)&&(a==null?void 0:a.oneHashCRMFields.filter(r=>r.required===!1))||[],b=Q(J),{isPro:j}=b;return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:r=>z(r,e,a,d),children:[t.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Form Fields",children:c==null?void 0:c.map(r=>t.jsx("option",{value:r.name,children:r.label},`ff-rm-${r.name}`))}),t.jsx("option",{value:"custom",children:i("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${j?"":"(PRO)"}`,children:j&&((o=U)==null?void 0:o.map(r=>t.jsx("option",{value:r.name,children:r.label},`ff-rm-${r.name}`)))})]}),s.formField==="custom"&&t.jsx(M,{field:s,index:e,conf:a,setConf:d,fieldValue:"customValue",fieldLabel:"Custom Value",className:"mr-2"}),t.jsxs("select",{className:"btcd-paper-inp",disabled:e<n.length,name:"oneHashCRMFormField",value:e<n.length?n[e].key||"":s.oneHashCRMFormField||"",onChange:r=>z(r,e,a,d),children:[t.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),e<n.length?t.jsx("option",{value:n[e].key,children:n[e].label},n[e].key):x.map(({key:r,label:u})=>t.jsx("option",{value:r,children:u},r))]})]}),e>=n.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>E(e,a,d),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>Y(e,a,d),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function le({formFields:e,handleInput:c,oneHashCRMConf:s,setOneHashCRMConf:a,loading:d,setLoading:n,isLoading:x,setIsLoading:b,setSnackbar:j}){const o=u=>{a(S=>h(S,p=>{const{name:y}=u.target;u.target.value!==""?(p.actionName=u.target.value,p.actionName==="customer"?p.oneHashCRMFields=p.customerFields:p.actionName==="contact"?p.oneHashCRMFields=p.contactFields:p.actionName==="lead"&&(p.oneHashCRMFields=p.leadFields,p.leadStatus=["Lead","Open","Replied","Opportunity","Quotation","Lost Quotation","Interested","Converted","Do Not Contact"]),p.field_map=X(p)):delete p[y]}))},r=(u,S)=>{const p=g({},s);p[S]=u,a(g({},p))};return t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Action:","bit-integrations")}),t.jsxs("select",{onChange:o,name:"actionName",value:s.actionName,className:"btcd-paper-inp w-5",children:[t.jsx("option",{value:"",children:i("Select an action","bit-integrations")}),t.jsx("option",{value:"lead","data-action_name":"lead",children:i("Create Lead","bit-integrations")}),t.jsx("option",{value:"customer","data-action_name":"customer",children:i("Create Customer","bit-integrations")}),t.jsx("option",{value:"contact","data-action_name":"contact",children:i("Create Contact","bit-integrations")})]}),t.jsx("br",{}),s.actionName==="lead"&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsxs("div",{className:"flx",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:i("Lead Status:","bit-integrations")}),t.jsx(v,{options:s==null?void 0:s.leadStatus.map(u=>({label:u,value:u})),className:"msl-wrp-options dropdown-custom-width",defaultValue:s==null?void 0:s.selectedLeadStatus,onChange:u=>r(u,"selectedLeadStatus"),disabled:x,singleSelect:!0,closeOnSelect:!0})]})]}),s.actionName==="customer"&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsxs("div",{className:"flx",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:i("Customer Type:","bit-integrations")}),t.jsx(v,{options:["Company","Individual"].map(u=>({label:u,value:u})),className:"msl-wrp-options dropdown-custom-width",defaultValue:s==null?void 0:s.selectedCustomerType,onChange:u=>r(u,"selectedCustomerType"),disabled:x,singleSelect:!0,closeOnSelect:!0})]})]}),x&&t.jsx(W,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.actionName&&!x&&t.jsxs("div",{children:[t.jsx("br",{}),t.jsx("div",{className:"mt-5",children:t.jsx("b",{className:"wdt-100",children:i("Field Map","bit-integrations")})}),t.jsx("br",{}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:i("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:i("OneHashCRM Fields","bit-integrations")})})]}),s==null?void 0:s.field_map.map((u,S)=>t.jsx(R,{i:S,field:u,oneHashCRMConf:s,formFields:e,setOneHashCRMConf:a,setSnackbar:j},`rp-m-${S+9}`)),t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>E(s.field_map.length,s,a),className:"icn-btn sh-sm",type:"button",children:"+"})}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:i("Actions","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsx(f,{oneHashCRMConf:s,setOneHashCRMConf:a,formFields:e,loading:d,setLoading:n})]})]})}export{le as O};
