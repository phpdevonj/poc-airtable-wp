var y=Object.defineProperty;var w=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var _=(e,t,i)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,l=(e,t)=>{for(var i in t||(t={}))F.call(t,i)&&_(e,i,t[i]);if(w)for(var i of w(t))k.call(t,i)&&_(e,i,t[i]);return e};import{_ as r,c as f,d as u}from"./bi.738.82.js";const A=(e,t,i)=>{const n=l({},t),{name:o}=e.target;e.target.value!==""?n[o]=e.target.value:delete n[o],i(l({},n))},z=(e,t,i,n)=>{i(!0);const o={tokenDetails:e.tokenDetails,clientId:e.clientId,clientSecret:e.clientSecret};f(o,"mailup_fetch_all_list").then(a=>{if(a&&a.success){const s=l({},e);a.data&&(s.allList=a.data),n({show:!0,msg:r("Mailup all lists fetched successfully","bit-integrations")}),t(l({},s))}else n({show:!0,msg:r("Mailup lists fetching failed. please try again","bit-integrations")});i(!1)}).catch(()=>i(!1))},R=(e,t,i,n)=>{i(!0);const o={tokenDetails:e.tokenDetails,clientId:e.clientId,clientSecret:e.clientSecret,listId:e.listId};f(o,"mailup_fetch_all_group").then(a=>{if(a&&a.success){const s=l({},e);a.data&&(s.allGroup=a.data),n({show:!0,msg:r("All groups fetched successfully","bit-integrations")}),t(l({},s))}else n({show:!0,msg:r("Groups fetching failed. please try again","bit-integrations")});i(!1)}).catch(()=>i(!1))},q=e=>{const t={},n=window.location.href.replace(`${window.opener.location.href}`,"").split("&");n&&n.forEach(o=>{const a=o.split("=");a[1]&&(t[a[0]]=a[1])}),localStorage.setItem(`__${e}`,JSON.stringify(t)),window.close()},v=(e,t,i,n,o,a,s)=>{if(!t.clientId){n({clientId:t.clientId?"":r("Client ID can't be empty","bit-integrations")});return}if(!t.clientSecret){n({clientSecret:t.clientSecret?"":r("Client secret can't be empty","bit-integrations")});return}a(!0);const d=`https://services.mailup.com/Authorization/OAuth/LogOn?client_id=${t.clientId}&response_type=code&redirect_uri=${encodeURIComponent(window.location.href)}`,b=window.open(d,e,"width=400,height=609,toolbar=off"),m=setInterval(()=>{if(b.closed){clearInterval(m);let c={},g=!1;const p=localStorage.getItem(`__${e}`);if(p&&(g=!0,c=JSON.parse(p),localStorage.removeItem(`__${e}`),c.token&&(c.code=c.token)),!c.code||c.error||!c||!g){const h=c.error?`Cause: ${c.error}`:"";s({show:!0,msg:`${r("Authorization failed","bit-integrations")} ${h}. ${r("please try again","bit-integrations")}`}),a(!1)}else{const h=l({},t);I(c,h,i,o,a)}}a(!1)},500)},I=(e,t,i,n,o)=>{const a=l({},e);a.clientId=t.clientId,a.clientSecret=t.clientSecret,f(a,"mailup_authorization").then(s=>{if(s&&s.success){const d=l({},t);d.tokenDetails=s.data,i(d),n(!0),u.success(r("Authorized Successfully","bit-integrations"))}else s&&s.data&&s.data.data||!s.success&&typeof s.data=="string"?u.error(`${r("Authorization failed Cause:","bit-integrations")}${s.data.data||s.data}. ${r("please try again","bit-integrations")}`):u.error(r("Authorization failed. please try again","bit-integrations"));o(!1)})},D=e=>{const t=e==null?void 0:e.staticFields.filter(i=>i.required===!0);return t.length>0?t.map(i=>({formField:"",mailupFormField:i.key})):[{formField:"",mailupFormField:""}]},M=e=>!((e!=null&&e.field_map?e.field_map.filter(i=>!i.formField||!i.mailupFormField||!i.formField==="custom"&&!i.customValue):[]).length>0);export{z as a,v as b,M as c,R as f,D as g,A as h,q as s};
