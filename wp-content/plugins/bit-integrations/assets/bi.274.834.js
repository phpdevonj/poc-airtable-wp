var N=Object.defineProperty;var _=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var u=(l,t,c)=>t in l?N(l,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[t]=c,o=(l,t)=>{for(var c in t||(t={}))f.call(t,c)&&u(l,c,t[c]);if(_)for(var c of _(t))y.call(t,c)&&u(l,c,t[c]);return l};import{d as w,j as e,L as k}from"./main-149.js";import{m as A,_ as r,n as I,o as M}from"./bi.738.82.js";import{g as S}from"./bi.843.835.js";import{T as V}from"./bi.653.689.js";const F=(l,t,c,i,n)=>{const a=o({},t);n?i?a.relatedlists[n-1].upload_field_map.splice(l,0,{}):a.relatedlists[n-1].field_map.splice(l,0,{}):i?a.upload_field_map.splice(l,0,{}):a.field_map.splice(l,0,{}),c(o({},a))},$=(l,t,c,i,n)=>{const a=o({},t);n?i?a.relatedlists[n-1].upload_field_map.length>1&&a.relatedlists[n-1].upload_field_map.splice(l,1):a.relatedlists[n-1].field_map.length>1&&a.relatedlists[n-1].field_map.splice(l,1):i?a.upload_field_map.length>1&&a.upload_field_map.splice(l,1):a.field_map.length>1&&a.field_map.splice(l,1),c(o({},a))},v=(l,t,c,i,n,a)=>{const p=o({},c);a?n?p.relatedlists[a-1].upload_field_map[t][l.target.name]=l.target.value:p.relatedlists[a-1].field_map[t][l.target.name]=l.target.value:n?p.upload_field_map[t][l.target.name]=l.target.value:p.field_map[t][l.target.name]=l.target.value,l.target.value==="custom"&&(a?p.relatedlists[a-1].field_map[t].customValue="":p.field_map[t].customValue=""),i(o({},p))};function q({i:l,field:t,formFields:c,sureCartConf:i,setSureCartConf:n}){var g,d,m,h;if(((g=i==null?void 0:i.field_map)==null?void 0:g.length)===1&&t.SureCartFormField===""){const s=o({},i),b=S(s);s.field_map=b,n(s)}const a=((d=i==null?void 0:i.customerFields)==null?void 0:d.filter(s=>s.required===!0))||[],p=((m=i==null?void 0:i.customerFields)==null?void 0:m.filter(s=>s.required===!1))||[],j=w(A),{isPro:x}=j;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:s=>v(s,l,i,n),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:c==null?void 0:c.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`))}),e.jsx("option",{value:"custom",children:r("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((h=I)==null?void 0:h.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),t.formField==="custom"&&e.jsx(V,{onChange:s=>M(s,l,i,n),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:r("Custom Value","bit-integrations"),formFields:c}),e.jsxs("select",{className:"btcd-paper-inp",disabled:l<a.length,name:"SureCartFormField",value:l<a.length?a[l].key||"":t.SureCartFormField||"",onChange:s=>v(s,l,i,n),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),l<a.length?e.jsx("option",{value:a[l].key,children:a[l].label},a[l].key):p.map(({key:s,label:b})=>e.jsx("option",{value:s,children:b},s))]})]}),l>=a.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F(l,i,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>$(l,i,n),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function E({formID:l,formFields:t,handleInput:c,sureCartConf:i,setSureCartConf:n,isLoading:a,setIsLoading:p,setSnackbar:j,a:x}){const g=d=>{const m=o({},i),{name:h}=d.target;d.target.value!==""?m[h]=d.target.value:delete m[h],m[d.target.name]=d.target.value,n(o({},m))};return e.jsxs(e.Fragment,{children:[a&&e.jsx(k,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("Actions:","bit-integrations")}),e.jsxs("select",{onChange:g,name:"mainAction",value:i==null?void 0:i.mainAction,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:r("Select Actions","bit-integrations")}),(i==null?void 0:i.allActions)&&i.allActions.map(({key:d,label:m})=>e.jsx("option",{value:d,children:m},d))]}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:r("Map Fields","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("SureCart Fields","bit-integrations")})})]}),i.field_map.map((d,m)=>e.jsx(q,{i:m,field:d,formFields:t,sureCartConf:i,setSureCartConf:n},`keap-m-${m+9}`)),e.jsx("br",{}),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>F(i.field_map.length,i,n),className:"icn-btn sh-sm",type:"button",children:"+"})})]})]})}export{E as S};
