var z=Object.defineProperty;var M=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var P=(e,r,n)=>r in e?z(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,v=(e,r)=>{for(var n in r||(r={}))S.call(r,n)&&P(e,n,r[n]);if(M)for(var n of M(r))q.call(r,n)&&P(e,n,r[n]);return e};import{r as f,j as t,L as F,d as L}from"./main-149.js";import{q as w,_ as s,f as y,p as V,m as E,v as A,n as B,o as G,r as $,w as H,T as J}from"./bi.738.82.js";import{r as R,a as Z,b as K,d as Q,e as U}from"./bi.416.759.js";import{T as W}from"./bi.653.689.js";function X({deskConf:e,setDeskConf:r,formID:n,formFields:a,setSnackbar:c}){var o,l,_,T,O,I;const[m,d]=f.useState(!1),[p,b]=f.useState({show:!1}),u=(i,x)=>{const N=v({},e);x==="ticket_owner"?i!==""?N.actions.ticket_owner=i:delete N.actions.ticket_owner:x==="product"?i!==""?N.actions.product=i:delete N.actions.product:x==="attachments"&&(i!==""?N.actions.attachments=i:delete N.actions.attachments),r(v({},N))},j=()=>{var i,x;(x=(i=e.default)==null?void 0:i.owners)!=null&&x[e.orgId]||R(n,e,r,d,c),b({show:"ticket_owner"})},g=()=>{var i,x;(x=(i=e.default)==null?void 0:i.products)!=null&&x[e.department]||Z(n,e,r,d,c),b({show:"product"})},h=()=>{b({show:!1})};return t.jsxs("div",{className:"pos-rel",children:[t.jsxs("div",{className:"d-flx flx-wrp",children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[t.jsx(w,{onChange:j,checked:"ticket_owner"in e.actions,className:"wdt-200 mt-4 mr-2",value:"Ticket_Owner",title:s("Ticket Owner","bit-integrations"),subTitle:s("Add a owner to ticket pushed to Zoho Desk.","bit-integrations")}),!e.actions.ticket_owner&&t.jsx("small",{style:{marginLeft:30,marginTop:10,color:"red"},children:s("ticket owner is required","bit-integrations")})]}),t.jsx(w,{onChange:g,checked:"product"in e.actions,className:"wdt-200 mt-4 mr-2",value:"Product_Name",title:s("Product Name","bit-integrations"),subTitle:s("Add a product to ticket pushed to Zoho Desk.","bit-integrations")}),t.jsx(w,{onChange:()=>b({show:"attachments"}),checked:"attachments"in e.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:s("Attachments","bit-integrations"),subTitle:s("Add attachments from trigger-end to ticket pushed to Zoho Desk.","bit-integrations")})]}),t.jsxs(y,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:s("Ok","bit-integrations"),show:p.show==="ticket_owner",close:h,action:h,title:s("Ticket Owner","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2"}),m?t.jsx(F,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):t.jsxs("div",{className:"flx flx-between mt-2",children:[t.jsxs("select",{value:e.actions.ticket_owner,className:"btcd-paper-inp",onChange:i=>u(i.target.value,"ticket_owner"),children:[t.jsx("option",{value:"",children:s("Select Owner","bit-integrations")}),(_=(l=(o=e.default)==null?void 0:o.owners)==null?void 0:l[e.orgId])==null?void 0:_.map(i=>t.jsx("option",{value:i.ownerId,children:i.ownerName},i.ownerId))]}),t.jsx("button",{onClick:()=>R(n,e,r,d,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Ticket Owners"'},type:"button",disabled:m,children:"↻"})]})]}),t.jsxs(y,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:s("Ok","bit-integrations"),show:p.show==="product",close:h,action:h,title:s("Product Name","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2"}),m?t.jsx(F,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):t.jsxs("div",{className:"flx flx-between mt-2",children:[t.jsxs("select",{value:e.actions.product,className:"btcd-paper-inp",onChange:i=>u(i.target.value,"product"),children:[t.jsx("option",{value:"",children:s("Select Product","bit-integrations")}),(I=(O=(T=e.default)==null?void 0:T.products)==null?void 0:O[e.department])==null?void 0:I.map(i=>t.jsx("option",{value:i.productId,children:i.productName},i.productId))]}),t.jsx("button",{onClick:()=>Z(n,e,r,d,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Products"'},type:"button",disabled:m,children:"↻"})]})]}),t.jsxs(y,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:s("Ok","bit-integrations"),show:p.show==="attachments",close:h,action:h,title:s("Select Attachment","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2"}),t.jsx("div",{className:"mt-2",children:s("Select file upload fields","bit-integrations")}),t.jsx(V,{defaultValue:e.actions.attachments,className:"mt-2 w-9",onChange:i=>u(i,"attachments"),options:a.filter(i=>i.type==="file").map(i=>({label:i.label,value:i.name}))})]})]})}function Y({i:e,formFields:r,field:n,deskConf:a,setDeskConf:c}){var u,j,g,h,o;const{orgId:m}=a,d=n.zohoFormField===""||((u=a.default.fields[m].required)==null?void 0:u.indexOf(n.zohoFormField))===-1,p=L(E),{isPro:b}=p;return t.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:n.formField||"",onChange:l=>A(l,e,a,c),children:[t.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Form Fields",children:r.map(l=>l.type!=="file"&&t.jsx("option",{value:l.name,children:l.label},`ff-zhcrm-${l.name}`))}),t.jsx("option",{value:"custom",children:s("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${b?"":"(PRO)"}`,children:b&&((j=B)==null?void 0:j.map(l=>t.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),n.formField==="custom"&&t.jsx(W,{onChange:l=>G(l,e,a,c),label:s("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:n.customValue,placeholder:s("Custom Value","bit-integrations"),formFields:r}),t.jsxs("select",{className:"btcd-paper-inp",name:"zohoFormField",value:n.zohoFormField||"",disabled:!d,onChange:l=>A(l,e,a,c),children:[t.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),((o=(h=(g=a.default)==null?void 0:g.fields)==null?void 0:h[m])==null?void 0:o.fields)&&Object.values(a.default.fields[m].fields).map(l=>d?l.required===!1&&t.jsx("option",{value:l.apiName,children:l.displayLabel},l.displayLabel):t.jsx("option",{value:l.apiName,children:l.displayLabel},l.displayLabel))]})]}),d&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>$(e,a,c),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>H(e,a,c),className:"icn-btn sh-sm",type:"button","aria-label":"btn",children:t.jsx(J,{})})]})]})}function at({formID:e,formFields:r,handleInput:n,deskConf:a,setDeskConf:c,isLoading:m,setIsLoading:d,setSnackbar:p}){var b,u,j,g,h;return t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:s("Portal:","bit-integrations")}),t.jsxs("select",{onChange:n,name:"orgId",value:a.orgId,className:"btcd-paper-inp w-7",children:[t.jsx("option",{value:"",children:s("Select Portal","bit-integrations")}),((b=a==null?void 0:a.default)==null?void 0:b.organizations)&&Object.values(a.default.organizations).map(o=>t.jsx("option",{value:o.orgId,children:o.portalName},o.orgId))]}),t.jsx("button",{onClick:()=>K(e,a,c,d,p),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${s("Refresh Desk Portals","bit-integrations")}'`},type:"button",disabled:m,children:"↻"}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:s("Department:","bit-integrations")}),t.jsxs("select",{onChange:n,name:"department",value:a.department,className:"btcd-paper-inp w-7",children:[t.jsx("option",{value:"",children:s("Select Department","bit-integrations")}),((j=(u=a==null?void 0:a.default)==null?void 0:u.departments)==null?void 0:j[a.orgId])&&Object.values(a.default.departments[a.orgId]).map(o=>t.jsx("option",{value:o.departmentId,children:o.departmentName},o.departmentId))]}),t.jsx("button",{onClick:()=>Q(e,a,c,d,p),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${s("Refresh Desk Departments","bit-integrations")}'`},type:"button",disabled:m,children:"↻"}),t.jsx("br",{}),t.jsx("br",{}),m&&t.jsx(F,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),a.department&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mt-4",children:[t.jsx("b",{className:"wdt-100",children:s("Map Fields","bit-integrations")}),t.jsx("button",{onClick:()=>U(e,a,c,d,p),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${s("Refresh Desk Fields","bit-integrations")}'`},type:"button",disabled:m,children:"↻"})]}),t.jsx("div",{className:"btcd-hr mt-1"}),((h=(g=a.default)==null?void 0:g.fields)==null?void 0:h[a==null?void 0:a.orgId])&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:s("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:s("Zoho Fields","bit-integrations")})})]}),a.field_map.map((o,l)=>t.jsx(Y,{i:l,field:o,deskConf:a,formFields:r,setDeskConf:c},`desk-m-${l+9}`)),t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>$(a.field_map.length,a,c),className:"icn-btn sh-sm",type:"button",children:"+"})}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:s("Actions","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsx(X,{deskConf:a,setDeskConf:c,formID:e,formFields:r,setSnackbar:p})]})]})]})}export{at as Z};
